(function(t){function e(e){for(var o,r,i=e[0],l=e[1],d=e[2],c=0,m=[];c<i.length;c++)r=i[c],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(o=!1)}o&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},n={app:0},s=[];function r(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-2d216214":"fe4bb11d","chunk-bf1dd3be":"5c15a2a8"}[t]+".js"}function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,o){a=n[t]=[e,o]}));e.push(a[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=r(t);var d=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(c);var a=n[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",d.name="ChunkLoadError",d.type=o,d.request=s,a[1](d)}n[t]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=d;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0836":function(t,e,a){},"14ae":function(t,e,a){},"1a20":function(t,e,a){},"1b56":function(t,e,a){},"26ef":function(t,e,a){},"2afd":function(t,e,a){"use strict";a("ab1b")},"33dc":function(t,e,a){},"357f":function(t,e,a){},"3a37":function(t,e,a){"use strict";a("d58b")},"3e48":function(t,e,a){"use strict";a("9d77")},"426e":function(t,e,a){},4678:function(t,e,a){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=s(t);return a(e)}function s(t){if(!a.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}n.keys=function(){return Object.keys(o)},n.resolve=s,t.exports=n,n.id="4678"},"46cc":function(t,e,a){"use strict";a("473b")},"473b":function(t,e,a){},"4e00":function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"add-client"},[e("div",{staticClass:"back-button-container"},[e("BackButton",{attrs:{to:"/NoteMenu"}})],1),t._m(0),e("form",{on:{submit:function(e){return e.preventDefault(),t.addClient.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"name"}},[t._v("Nombre:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),e("button",{attrs:{type:"submit"}},[t._v("Agregar Cliente")])]),t._m(1),e("ul",t._l(t.clients,(function(a){return e("li",{key:a.id},[t._v(" "+t._s(a.name)+" "),e("button",{on:{click:function(e){return t.deleteClient(a.id)}}},[t._v("Eliminar")])])})),0)])])},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"add-client-form"},[e("h2",[t._v("Agregar Cliente")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"add-client-form"},[e("h2",[t._v("Lista de Clientes")])])}],s=(a("d9e2"),a("74c9")),r=a("dc59"),i=a("1494"),l={components:{BackButton:s["a"]},data(){return{name:"",clients:[]}},methods:{async addClient(){try{if(console.log("DB instance:",r["a"]),!r["a"])throw new Error("Firestore DB is not initialized");await Object(i["a"])(Object(i["b"])(r["a"],"clients"),{name:this.name}),this.name="",this.fetchClients()}catch(t){console.error("Error adding client: ",t)}},async fetchClients(){try{const t=await Object(i["f"])(Object(i["b"])(r["a"],"clients"));this.clients=t.docs.map(t=>({id:t.id,...t.data()}))}catch(t){console.error("Error fetching clients: ",t)}},deleteClient(t){window.confirm("¿Estás seguro de que deseas eliminar este cliente?")&&Object(i["c"])(Object(i["d"])(r["a"],"clients",t)).then(()=>{console.log("Cliente eliminado con éxito")}).catch(t=>{console.error("Error al eliminar el cliente: ",t)})}},async mounted(){this.fetchClients()}},d=l,c=(a("f90b"),a("2877")),u=Object(c["a"])(d,o,n,!1,null,"024a7518",null);e["a"]=u.exports},5355:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var o=a("2b0e"),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Navbar"),e("div",{staticClass:"content-wrapper"},[e("router-view")],1),e("Footer")],1)},s=[],r=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"safe-area-top"}),e("b-navbar",{staticClass:"navbar-custom",attrs:{toggleable:"lg"}},[e("b-navbar-brand",{staticClass:"d-flex align-items-center",attrs:{href:"#"}},[e("b-img",{staticClass:"logo-image mr-2",attrs:{src:"https://res.cloudinary.com/hwkcovsmr/image/upload/v1620946647/samples/REY_PEZ_LOGO_nsotww.png",width:"60",fluid:"",alt:"Rey Pez Logo"}}),e("h1",{staticClass:"navbar-title mb-0"},[t._v("Rey Pez")])],1),e("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[e("b-navbar-nav",{staticClass:"ml-auto"},[e("b-nav-item",[e("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Home")])],1),e("b-nav-item",[e("router-link",{staticClass:"nav-link",attrs:{to:"/noteMenu"}},[t._v("Notas")])],1),e("b-nav-item",[e("router-link",{staticClass:"nav-link",attrs:{to:"/sacadas"}},[t._v("Entradas/Salidas")])],1),e("b-nav-item",[e("router-link",{staticClass:"nav-link",attrs:{to:"/existencias"}},[t._v("Existencias")])],1),e("b-nav-item",[e("router-link",{staticClass:"nav-link",attrs:{to:"/cuentas-mexico"}},[t._v("Cuentas México")])],1)],1)],1)],1)],1)},i=[],l={name:"Navbar",data(){return{}}},d=l,c=(a("8790"),a("2877")),u=Object(c["a"])(d,r,i,!1,null,"a69f3824",null),m=u.exports,p=function(){var t=this,e=t._self._c;return e("footer",{staticClass:"footer"},[e("div",{staticClass:"footer-content"},[e("p",[t._v("© 2024 Rey Pez - Allan Reyes")]),e("nav",{staticClass:"footer-nav"},[e("router-link",{staticClass:"footer-link",attrs:{to:"/"}},[t._v("Home")]),e("router-link",{staticClass:"footer-link",attrs:{to:"/noteMenu"}},[t._v("Notas")])],1)])])},b=[],v={name:"Footer"},f=v,h=(a("3a37"),Object(c["a"])(f,p,b,!1,null,"7eccae20",null)),g=h.exports,_={name:"app",components:{Navbar:m,Footer:g}},y=_,w=(a("9138"),Object(c["a"])(y,n,s,!1,null,null,null)),j=w.exports,k=a("8c4f"),C=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"home"}},[e("b-container",[e("Datos")],1)],1)},P=[],x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"datos-container mt-5"},[e("div",{staticClass:"fecha-actual"},[t._v(t._s(t.fechaActual))]),e("b-row",[e("b-col",{staticClass:"mb-3",attrs:{cols:"12",md:"5"}},[e("b-button",{staticClass:"mb-3",attrs:{variant:"danger",block:""},on:{click:t.borrarDatos}},[t._v("Borrar datos")]),e("b-form-textarea",{staticClass:"text-center",attrs:{name:"dinero",id:"textarea-auto-height",placeholder:"Ingrese cantidades de dinero (una por línea)",rows:"3","max-rows":"10"},model:{value:t.localDatos,callback:function(e){t.localDatos=e},expression:"localDatos"}}),e("div",{staticClass:"mt-3 total-sum"},[e("strong",[t._v("Total: $"+t._s(t.formatNumber(t.totalSum)))])])],1),e("b-col",{attrs:{cols:"12",md:"7"}},[e("Cuentas",{attrs:{datos:t.localDatos}})],1)],1)],1)},D=[],S=(a("13d5"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"cuentas-container"},[e("b-row",[e("b-col",{staticClass:"mb-3",attrs:{cols:"12",md:"6"}},[e("Calcular",{attrs:{cantidad:"$2",datos:t.datos},on:{dataArray:t.getDatos}})],1),e("b-col",{staticClass:"mb-3",attrs:{cols:"12",md:"6"}},[e("Calcular",{attrs:{cantidad:"$1",datos:t.datos},on:{dataArray:t.getDatos}})],1),e("b-col",{staticClass:"mb-3",attrs:{cols:"12"}},[e("b-button",{attrs:{variant:"primary",block:""},on:{click:t.printCuentas}},[t._v("Imprimir sección")])],1),e("b-col",{staticClass:"mb-3",attrs:{cols:"12"}},[e("div",{ref:"printSection",staticClass:"print-section"},[e("h1",[t._v("Cuentas")]),e("p",{staticClass:"print-date"},[t._v(t._s(t.formattedDate))]),e("div",{staticClass:"cuenta-list"},t._l(t.bills,(function(a,o){return e("div",{key:o,staticClass:"cuenta-item"},[e("h2",[t._v(t._s(o)+": "+t._s(a))])])})),0)])])],1)],1)}),A=[],O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"calcular-container"},[e("b-button",{attrs:{variant:"primary"},on:{click:t.processArray}},[t._v(t._s(t.cantidad))])],1)},E=[],M={name:"Calcular",props:{datos:{type:String,required:!0},cantidad:{type:String,required:!0}},methods:{processArray(){const t=this.datos.split("\n").filter(t=>t.trim()),e="$2"===this.cantidad;this.$emit("dataArray",{data:t,isTwo:e})}}},N=M,$=(a("5aa2"),Object(c["a"])(N,O,E,!1,null,"0f039a34",null)),I=$.exports,q={name:"Cuentas",components:{Calcular:I},props:{datos:{type:String,default:""}},data(){return{bills:{500:0,200:0,100:0,50:0,20:0,10:0,5:0,2:0,1:0}}},computed:{formattedDate(){const t={year:"numeric",month:"long",day:"numeric"};return(new Date).toLocaleDateString("es-ES",t)}},methods:{printCuentas(){const t=this.$refs.printSection;if(!t)return void console.error("Print section not found");const e=t.innerHTML,a="\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 100vh;\n            margin: 0;\n            background-color: #f0f0f0;\n          }\n          .print-container {\n            background-color: white;\n            padding: 40px;\n            border-radius: 10px;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n            max-width: 600px;\n            width: 100%;\n          }\n          h1 {\n            color: #3760b0;\n            text-align: center;\n            margin-bottom: 10px;\n            font-size: 24px;\n          }\n          .print-date {\n            text-align: center;\n            color: #666;\n            font-style: italic;\n            margin-bottom: 20px;\n          }\n          .cuenta-list {\n            display: flex;\n            flex-wrap: wrap;\n            justify-content: space-between;\n          }\n          .cuenta-item {\n            width: 45%;\n            margin-bottom: 15px;\n            background-color: #f8f9fa;\n            padding: 10px;\n            border-radius: 5px;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n          }\n          h2 {\n            color: #333;\n            margin: 0;\n            font-size: 18px;\n            text-align: center;\n          }\n        </style>\n      ",o=window.open("","_blank");o?(o.document.write(`\n        <html>\n          <head>\n            <title>Imprimir Cuentas</title>\n            ${a}\n          </head>\n          <body>\n            <div class="print-container">\n              ${e}\n            </div>\n          </body>\n        </html>\n      `),o.document.close(),o.focus(),o.print(),o.onafterprint=()=>{o.close()}):console.error("Unable to open print window")},getDatos({data:t,isTwo:e}){const a=e?[500,200,100,50,20,10,5,2]:[500,200,100,50,20,10,5,1];t.forEach(t=>{let e=parseInt(t);a.forEach(t=>{while(e>=t)e-=t,this.bills[t]++})})}}},z=q,T=(a("bff9"),Object(c["a"])(z,S,A,!1,null,"389f77cf",null)),F=T.exports,B={name:"Datos",components:{Cuentas:F},props:{initialDatos:{type:String,default:""}},data(){return{localDatos:this.initialDatos}},methods:{borrarDatos(){this.localDatos=""},formatNumber(t){return t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}},computed:{fechaActual(){const t=new Date,e={year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("es-ES",e)},totalSum(){return this.localDatos.split("\n").filter(t=>t.trim()).reduce((t,e)=>t+parseFloat(e)||0,0)}}},K=B,L=(a("46cc"),Object(c["a"])(K,x,D,!1,null,"247b5804",null)),G=L.exports,H={name:"home",components:{Datos:G}},R=H,Y=Object(c["a"])(R,C,P,!1,null,null,null),U=Y.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"notes-wrapper"},[e("div",{staticClass:"button-container"},[e("div",{staticClass:"button-wrapper"},[e("button",{on:{click:t.goToSaleNote}},[t._v("Nueva nota")])]),e("div",{staticClass:"button-wrapper"},[e("button",{on:{click:t.goToAddClient}},[t._v("Agregar Cliente")])])]),e("div",{staticClass:"notes-container"},[e("div",{staticClass:"filter-container"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.paymentFilter,expression:"paymentFilter"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.paymentFilter=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:"all"}},[t._v("Todas")]),e("option",{attrs:{value:"paid"}},[t._v("Pagadas")]),e("option",{attrs:{value:"unpaid"}},[t._v("No Pagadas")])])]),e("h2",[t._v("Notas por Cliente")]),t._l(t.filteredNotesByClient,(function(a,o){return e("div",{key:o},[e("details",[e("summary",[t._v(" "+t._s(o)+" - Debe: "+t._s(t._f("currency")(t.totalDebtByClient[o]))+" "),e("span",{staticClass:"note-count"},[t._v("("+t._s(a.length)+")")])]),e("ul",t._l(a,(function(a){return e("li",{key:a.id},[e("button",{attrs:{tabindex:"0"},on:{click:function(e){return t.goToEditNote(a.id)}}},[t._v(" Nota "+t._s(a.folio)+" - "+t._s(a.currentDate)+" ")])])})),0),e("div",{staticClass:"client-actions"},[e("button",{staticClass:"abono-button",on:{click:function(e){return t.showAbonoModal(o)}}},[t._v("Realizar Abono")]),e("button",{staticClass:"abonos-history-button",on:{click:function(e){return t.showAbonosHistory(o)}}},[t._v("Ver Abonos")])])])])}))],2),t.showModal?e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("h2",[t._v("Realizar Abono para "+t._s(t.selectedClient))]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.abonoAmount,expression:"abonoAmount",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"Cantidad a abonar"},domProps:{value:t.abonoAmount},on:{input:function(e){e.target.composing||(t.abonoAmount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("button",{on:{click:t.realizarAbono}},[t._v("Confirmar Abono")]),e("button",{on:{click:t.closeModal}},[t._v("Cancelar")])])]):t._e(),t.showAbonosHistoryModal?e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("h2",[t._v("Historial de Abonos para "+t._s(t.selectedClient))]),e("table",{staticClass:"abonos-history-table"},[t._m(0),e("tbody",t._l(t.paginatedAbonos,(function(a,o){return e("tr",{key:o},[e("td",[t._v(t._s(t.formatDate(a.fecha)))]),e("td",[t._v(t._s(t._f("currency")(a.monto)))]),e("td",[e("button",{staticClass:"delete-button",on:{click:function(e){return t.openDeleteAbonoModal(a.globalIndex)}}},[t._v("Borrar")])])])})),0)]),e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:1===t.currentPage},on:{click:t.prevPage}},[t._v("Anterior")]),e("span",[t._v("Página "+t._s(t.currentPage)+" de "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage===t.totalPages},on:{click:t.nextPage}},[t._v("Siguiente")])]),e("button",{on:{click:t.closeAbonosHistoryModal}},[t._v("Cerrar")])])]):t._e(),t.showDeleteAbonoModal?e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("h2",[t._v("Confirmar borrado de abono")]),e("p",[t._v("¿Estás seguro de que quieres borrar este abono?")]),e("button",{on:{click:t.deleteAbono}},[t._v("Confirmar")]),e("button",{on:{click:t.closeDeleteAbonoModal}},[t._v("Cancelar")])])]):t._e()])},J=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Fecha")]),e("th",[t._v("Monto")]),e("th",[t._v("Acciones")])])])}],X=(a("14d9"),a("dc59")),Z=a("1494"),Q={name:"NoteMenu",data(){return{notesByClient:{},paymentFilter:"unpaid",showModal:!1,selectedClient:"",abonoAmount:0,showAbonosHistoryModal:!1,clientAbonosHistory:[],showDeleteAbonoModal:!1,selectedAbonoIndex:null,selectedAbonoNote:null,currentPage:1,abonosPerPage:7}},methods:{goToSaleNote(){this.$router.push({name:"SaleNote"})},goToAddClient(){this.$router.push({name:"AddClient"})},async fetchNotes(){try{const t=await Object(Z["f"])(Object(Z["b"])(X["a"],"notes")),e=t.docs.map(t=>({id:t.id,...t.data()}));this.notesByClient=e.reduce((t,e)=>(t[e.client]||(t[e.client]=[]),t[e.client].push(e),t),{});for(let a in this.notesByClient)this.notesByClient[a].sort((t,e)=>new Date(e.currentDate)-new Date(t.currentDate))}catch(t){console.error("Error fetching notes: ",t)}},goToEditNote(t){this.$router.push({name:"editar-nota",params:{noteId:t}})},showAbonoModal(t){this.selectedClient=t,this.abonoAmount="",this.showModal=!0},closeModal(){this.showModal=!1,this.selectedClient="",this.abonoAmount=0},async realizarAbono(){if(this.abonoAmount<=0)return void alert("Por favor ingrese una cantidad válida");let t=this.abonoAmount;const e=[],a=new Date,o=[...this.notesByClient[this.selectedClient]].sort((t,e)=>new Date(t.currentDate)-new Date(e.currentDate)).filter(t=>!t.isPaid);for(let s of o){if(t<=0)break;const o=s.products.reduce((t,e)=>t+e.kilos*e.pricePerKilo,0),n=s.abonos.reduce((t,e)=>t+e.monto,0),r=o-n;if(r>0){const i=Math.min(t,r);s.abonos.push({monto:i,fecha:a.toISOString().split("T")[0]}),s.isPaid=o<=n+i,t-=i,e.push(s)}}try{for(let t of e){const e=Object(Z["d"])(X["a"],"notes",t.id);await Object(Z["l"])(e,{abonos:t.abonos,isPaid:t.isPaid})}alert("Abono aplicado con éxito"),this.closeModal(),await this.fetchNotes()}catch(n){console.error("Error al actualizar las notas:",n),alert("Hubo un error al aplicar el abono")}},async showAbonosHistory(t){this.selectedClient=t,this.clientAbonosHistory=[],this.currentPage=1;const e=this.notesByClient[t];let a=0;for(let o of e)o.abonos&&o.abonos.length>0&&o.abonos.forEach((t,e)=>{this.clientAbonosHistory.push({...t,noteId:o.id,abonoIndex:e,globalIndex:a++})});this.clientAbonosHistory.sort((t,e)=>new Date(e.fecha)-new Date(t.fecha)),this.showAbonosHistoryModal=!0},closeAbonosHistoryModal(){this.showAbonosHistoryModal=!1,this.clientAbonosHistory=[]},formatDate(t){const e={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString("es-ES",e)},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},openDeleteAbonoModal(t){const e=this.clientAbonosHistory[t];this.selectedAbonoIndex=e.abonoIndex,this.selectedAbonoNote=e.noteId,this.showDeleteAbonoModal=!0},async deleteAbono(){if(this.selectedAbonoNote)try{const t=Object(Z["d"])(X["a"],"notes",this.selectedAbonoNote),e=await Object(Z["e"])(t);if(e.exists()){const a=e.data(),o=a.abonos.filter((t,e)=>e!==this.selectedAbonoIndex);await Object(Z["l"])(t,{abonos:o}),this.clientAbonosHistory=this.clientAbonosHistory.filter(t=>!(t.noteId===this.selectedAbonoNote&&t.abonoIndex===this.selectedAbonoIndex));const n=this.notesByClient[this.selectedClient].findIndex(t=>t.id===this.selectedAbonoNote);-1!==n&&(this.notesByClient[this.selectedClient][n].abonos=o),this.closeDeleteAbonoModal(),this.currentPage=Math.min(this.currentPage,this.totalPages),alert("Abono eliminado con éxito"),await this.fetchNotes()}}catch(t){console.error("Error al eliminar el abono:",t),alert("Hubo un error al eliminar el abono")}},closeDeleteAbonoModal(){this.showDeleteAbonoModal=!1,this.selectedAbonoIndex=null,this.selectedAbonoNote=null}},computed:{filteredNotesByClient(){const t={};for(const[e,a]of Object.entries(this.notesByClient))t[e]=a.filter(t=>"all"===this.paymentFilter||("paid"===this.paymentFilter?t.isPaid:!t.isPaid)),0===t[e].length&&delete t[e];return t},totalDebtByClient(){const t={};for(const[e,a]of Object.entries(this.notesByClient))t[e]=a.reduce((t,e)=>{const a=e.products.reduce((t,e)=>t+e.kilos*e.pricePerKilo,0)-e.abonos.reduce((t,e)=>t+e.monto,0);return t+(e.isPaid?0:a)},0);return t},paginatedAbonos(){const t=(this.currentPage-1)*this.abonosPerPage,e=t+this.abonosPerPage;return this.clientAbonosHistory.slice(t,e)},totalPages(){return Math.ceil(this.clientAbonosHistory.length/this.abonosPerPage)}},filters:{currency(t){return t?new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(t):"$0.00"}},async mounted(){await this.fetchNotes()}},W=Q,tt=(a("6ad3"),Object(c["a"])(W,V,J,!1,null,"8753db2c",null)),et=tt.exports,at=a("98cf"),ot=a("4e00"),nt=function(){var t=this,e=t._self._c;return t.isLoaded?e("div",{staticClass:"sacadas-container"},[e("div",{staticClass:"back-button-container"},[e("BackButton",{attrs:{to:"/sacadas"}})],1),e("h2",{staticClass:"date-header"},[t._v(t._s(t.formattedDate))]),e("div",{staticClass:"date-selector"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedDate,expression:"selectedDate"}],attrs:{type:"date"},domProps:{value:t.selectedDate},on:{change:t.updateCurrentDate,input:function(e){e.target.composing||(t.selectedDate=e.target.value)}}})]),e("div",{staticClass:"sacadas-content"},[e("div",{staticClass:"salidas-section"},[e("h3",[t._v("Salidas")]),e("div",{staticClass:"input-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.newSalida.tipo,expression:"newSalida.tipo"}],attrs:{required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newSalida,"tipo",e.target.multiple?a:a[0])},t.resetSalidaSelections]}},[e("option",{attrs:{value:""}},[t._v("Tipo")]),e("option",{attrs:{value:"proveedor"}},[t._v("Proveedor")]),e("option",{attrs:{value:"maquila"}},[t._v("Maquila")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.newSalida.proveedor,expression:"newSalida.proveedor"}],attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newSalida,"proveedor",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s("maquila"===t.newSalida.tipo?"Maquila":"Proveedor"))]),t._l(t.filteredProveedoresSalida,(function(a){return e("option",{key:a.id,domProps:{value:a.nombre}},[t._v(" "+t._s(a.nombre)+" ")])}))],2),e("select",{directives:[{name:"model",rawName:"v-model",value:t.newSalida.medida,expression:"newSalida.medida"}],attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newSalida,"medida",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:""}},[t._v("Medida")]),t._l(t.filteredMedidasSalida,(function(a){return e("option",{key:a.id,domProps:{value:a.nombre}},[t._v(" "+t._s(a.nombre)+" ")])}))],2),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newSalida.kilos,expression:"newSalida.kilos",modifiers:{number:!0}}],attrs:{type:"number",inputmode:"decimal",step:"0.1",pattern:"[0-9]*",placeholder:"Kilos",required:""},domProps:{value:t.newSalida.kilos},on:{input:function(e){e.target.composing||t.$set(t.newSalida,"kilos",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("button",{attrs:{disabled:!t.isSalidaValid||t.newSalida.kilos>t.kilosDisponibles},on:{click:t.addSalida}},[t._v("Agregar Salida")])]),null!==t.kilosDisponibles?e("p",{staticClass:"kilos-disponibles"},[t._v(" Kilos disponibles: "),e("span",{class:{"low-stock":t.kilosDisponibles<100}},[t._v(t._s(t.formatNumber(t.kilosDisponibles))+" kg")])]):t._e(),e("ul",{staticClass:"list"},t._l(t.salidas,(function(a,o){return e("li",{key:"salida-"+o},[t._v(" "+t._s("maquila"===a.tipo?"Maquila":"Proveedor")+": "+t._s(a.proveedor)+" - "+t._s(a.medida)+": "+t._s(t.formatNumber(a.kilos))+" kg "),e("button",{staticClass:"delete-btn",on:{click:function(e){return t.removeSalida(o)}}},[t._v("×")])])})),0),e("p",{staticClass:"total"},[t._v("Total Salidas: "+t._s(t.formatNumber(t.totalSalidas))+" kg")])]),e("div",{staticClass:"entradas-section"},[e("h3",[t._v("Entradas")]),e("div",{staticClass:"input-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.newEntrada.tipo,expression:"newEntrada.tipo"}],attrs:{required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newEntrada,"tipo",e.target.multiple?a:a[0])},t.resetEntradaSelections]}},[e("option",{attrs:{value:""}},[t._v("Tipo")]),e("option",{attrs:{value:"proveedor"}},[t._v("Proveedor")]),e("option",{attrs:{value:"maquila"}},[t._v("Maquila")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.newEntrada.proveedor,expression:"newEntrada.proveedor"}],attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newEntrada,"proveedor",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s("maquila"===t.newEntrada.tipo?"Maquila":"Proveedor"))]),t._l(t.filteredProveedoresEntrada,(function(a){return e("option",{key:a.id,domProps:{value:a.nombre}},[t._v(" "+t._s(a.nombre)+" ")])}))],2),e("select",{directives:[{name:"model",rawName:"v-model",value:t.newEntrada.medida,expression:"newEntrada.medida"}],attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newEntrada,"medida",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:""}},[t._v("Medida")]),t._l(t.filteredMedidasEntrada,(function(a){return e("option",{key:a.id,domProps:{value:a.nombre}},[t._v(" "+t._s(a.nombre)+" ")])}))],2),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newEntrada.kilos,expression:"newEntrada.kilos",modifiers:{number:!0}}],attrs:{type:"number",inputmode:"decimal",step:"0.1",pattern:"[0-9]*",placeholder:"Kilos",required:""},domProps:{value:t.newEntrada.kilos},on:{input:function(e){e.target.composing||t.$set(t.newEntrada,"kilos",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("button",{on:{click:t.addEntrada}},[t._v("Agregar Entrada")])]),e("ul",{staticClass:"list"},t._l(t.entradas,(function(a,o){return e("li",{key:"entrada-"+o},[t._v(" "+t._s("maquila"===a.tipo?"Maquila":"Proveedor")+": "+t._s(a.proveedor)+" - "+t._s(a.medida)+": "+t._s(t.formatNumber(a.kilos))+" kg "),e("button",{staticClass:"delete-btn",on:{click:function(e){return t.removeEntrada(o)}}},[t._v("×")])])})),0),e("p",{staticClass:"total"},[t._v("Total Entradas: "+t._s(t.formatNumber(t.totalEntradas))+" kg")])])]),e("div",{staticClass:"summary"},[e("h3",[t._v("Resumen del Día")]),e("p",[t._v("Total Entradas: "+t._s(t.formatNumber(t.totalEntradas))+" kg")]),e("p",[t._v("Total Salidas: "+t._s(t.formatNumber(t.totalSalidas))+" kg")]),e("h4",[t._v("Salidas clientes:")]),e("table",{staticClass:"medidas-summary"},[t._m(0),e("tbody",t._l(t.salidasProveedoresPorMedida,(function(a,o){return e("tr",{key:o},[e("td",[t._v(t._s(a.medida)+" ("+t._s(a.proveedor)+")")]),e("td",[t._v(t._s(t.formatNumber(a.total)))])])})),0)]),e("h4",[t._v("Salidas maquilas:")]),e("table",{staticClass:"medidas-summary"},[t._m(1),e("tbody",[t._l(t.salidasMaquilasPorMedida,(function(a,o){return[e("tr",{key:o+"-header"},[e("td",{attrs:{rowspan:Object.keys(a).length}},[t._v(t._s(o))]),e("td",[t._v(t._s(Object.keys(a)[0]))]),e("td",[t._v(t._s(t.formatNumber(Object.values(a)[0])))])]),t._l(a,(function(a,n,s){return 0!==s?e("tr",{key:`${o}-${n}`},[e("td",[t._v(t._s(n))]),e("td",[t._v(t._s(t.formatNumber(a)))])]):t._e()}))]}))],2)])]),e("button",{staticClass:"save-button",on:{click:t.saveReport}},[t._v(t._s(t.isEditing?"Actualizar":"Guardar")+" Informe del Día")])]):t._e()},st=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Medida")]),e("th",[t._v("Total (kg)")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Maquila")]),e("th",[t._v("Medida")]),e("th",[t._v("Total (kg)")])])])}],rt=a("74c9"),it=a("c1df"),lt=a.n(it),dt={name:"Sacadas",components:{BackButton:rt["a"]},data(){return{currentDate:lt()(),selectedDate:lt()().format("YYYY-MM-DD"),entradas:[],salidas:[],proveedores:[],medidas:[],newEntrada:{tipo:"proveedor",proveedor:"",medida:"",kilos:null},newSalida:{tipo:"proveedor",proveedor:"",medida:"",kilos:null},isEditing:!1,sacadaId:null,isLoaded:!1,kilosDisponibles:null}},computed:{formattedDate(){return this.currentDate.format("DD/MM/YYYY")},filteredProveedoresEntrada(){return this.proveedores.filter(t=>t.tipo===this.newEntrada.tipo)},filteredProveedoresSalida(){return this.proveedores.filter(t=>t.tipo===this.newSalida.tipo)},filteredMedidasEntrada(){if("maquila"===this.newEntrada.tipo){const t=this.proveedores.find(t=>t.nombre===this.newEntrada.proveedor);return t?this.medidas.filter(e=>"maquila"===e.tipo&&e.maquilaId===t.id):[]}return this.medidas.filter(t=>"general"===t.tipo)},filteredMedidasSalida(){if("maquila"===this.newSalida.tipo){const t=this.proveedores.find(t=>t.nombre===this.newSalida.proveedor);return t?this.medidas.filter(e=>"maquila"===e.tipo&&e.maquilaId===t.id):[]}return this.medidas.filter(t=>"general"===t.tipo)},totalEntradas(){return Number(this.entradas.reduce((t,e)=>t+e.kilos,0).toFixed(1))},totalSalidas(){return Number(this.salidas.reduce((t,e)=>t+e.kilos,0).toFixed(1))},salidasProveedoresPorMedida(){return this.salidas.filter(t=>"proveedor"===t.tipo).reduce((t,e)=>{const a=`${e.medida}-${e.proveedor}`;return t[a]||(t[a]={medida:e.medida,proveedor:e.proveedor,total:0}),t[a].total+=e.kilos,t},{})},salidasMaquilasPorMedida(){return this.salidas.filter(t=>"maquila"===t.tipo).reduce((t,e)=>(t[e.proveedor]||(t[e.proveedor]={}),t[e.proveedor][e.medida]||(t[e.proveedor][e.medida]=0),t[e.proveedor][e.medida]+=e.kilos,t),{})},isSalidaValid(){return this.newSalida.tipo&&this.newSalida.proveedor&&this.newSalida.medida&&this.newSalida.kilos&&this.newSalida.kilos>0&&null!==this.kilosDisponibles&&this.newSalida.kilos<=this.kilosDisponibles}},methods:{async loadProveedores(){const t=await Object(Z["f"])(Object(Z["b"])(X["a"],"proveedores"));this.proveedores=t.docs.map(t=>({id:t.id,...t.data()}))},async loadMedidas(){const t=await Object(Z["f"])(Object(Z["b"])(X["a"],"medidas"));this.medidas=t.docs.map(t=>({id:t.id,...t.data()}))},async checkExistingSacada(){const t=Object(Z["b"])(X["a"],"sacadas"),e=this.currentDate.clone().startOf("day"),a=this.currentDate.clone().endOf("day"),o=Object(Z["j"])(t,Object(Z["m"])("fecha",">=",e.toDate()),Object(Z["m"])("fecha","<=",a.toDate())),n=await Object(Z["f"])(o);return!n.empty},resetEntradaSelections(){this.newEntrada.proveedor="",this.newEntrada.medida=""},resetSalidaSelections(){this.newSalida.proveedor="",this.newSalida.medida="",this.kilosDisponibles=null},async addEntrada(){this.newEntrada.tipo&&this.newEntrada.proveedor&&this.newEntrada.medida&&this.newEntrada.kilos&&(this.entradas.push({tipo:this.newEntrada.tipo,proveedor:this.newEntrada.proveedor,medida:this.newEntrada.medida,kilos:Number(this.newEntrada.kilos.toFixed(1))}),this.newEntrada={tipo:"proveedor",proveedor:"",medida:"",kilos:null},await this.updateKilosDisponibles())},async addSalida(){this.isSalidaValid&&this.newSalida.kilos<=this.kilosDisponibles?(this.salidas.push({tipo:this.newSalida.tipo,proveedor:this.newSalida.proveedor,medida:this.newSalida.medida,kilos:Number(this.newSalida.kilos.toFixed(1))}),this.newSalida={tipo:"proveedor",proveedor:"",medida:"",kilos:null},await this.updateKilosDisponibles()):this.newSalida.kilos>this.kilosDisponibles&&alert(`No hay suficientes kilos disponibles. Kilos disponibles: ${this.kilosDisponibles.toFixed(1)} kg`)},async updateKilosDisponibles(){this.newSalida.proveedor&&this.newSalida.medida?(console.log(`Actualizando kilos disponibles para ${this.newSalida.proveedor} - ${this.newSalida.medida}`),this.kilosDisponibles=await this.getKilosDisponibles(this.newSalida.proveedor,this.newSalida.medida),console.log("Kilos disponibles actualizados: "+this.kilosDisponibles)):(console.log("No se puede actualizar kilos disponibles: falta proveedor o medida"),this.kilosDisponibles=null)},async getKilosDisponibles(t,e){let a=0;const o=Object(Z["b"])(X["a"],"sacadas"),n=await Object(Z["f"])(o),s=n.docs.map(t=>({id:t.id,...t.data()})).sort((t,e)=>t.fecha.toDate()-e.fecha.toDate()),r=this.currentDate.clone().endOf("day");return s.forEach(o=>{const n=o.fecha instanceof Date?o.fecha:o.fecha.toDate();lt()(n).isSameOrBefore(r)&&(o.entradas.forEach(o=>{o.proveedor===t&&o.medida===e&&(a+=o.kilos)}),o.salidas.forEach(o=>{o.proveedor===t&&o.medida===e&&(a-=o.kilos)}))}),this.entradas.forEach(o=>{o.proveedor===t&&o.medida===e&&(a+=o.kilos)}),this.salidas.forEach(o=>{o.proveedor===t&&o.medida===e&&(a-=o.kilos)}),console.log(`Kilos disponibles para ${t} - ${e}: ${a}`),Number(a.toFixed(1))},async removeEntrada(t){this.entradas.splice(t,1),await this.updateKilosDisponibles()},async removeSalida(t){this.salidas.splice(t,1),await this.updateKilosDisponibles()},formatNumber(t){return t.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})},async loadSacada(t){console.log("Cargando sacada con ID:",t);const e=Object(Z["d"])(X["a"],"sacadas",t),a=await Object(Z["e"])(e);if(a.exists()){console.log("Documento encontrado:",a.data());const e=a.data();this.currentDate=lt()(e.fecha.toDate()),console.log("Fecha cargada:",this.currentDate),this.entradas=e.entradas||[],console.log("Entradas cargadas:",this.entradas),this.salidas=e.salidas||[],console.log("Salidas cargadas:",this.salidas),this.sacadaId=t,this.isEditing=!0,await this.updateKilosDisponibles()}else console.log("No se encontró el documento con ID:",t)},async saveReport(){try{if(!this.isEditing){const t=await this.checkExistingSacada();if(t)return void alert("Ya existe un registro de sacada para esta fecha. No se puede crear uno nuevo.")}const t={fecha:this.currentDate.toDate(),entradas:this.entradas,salidas:this.salidas,totalEntradas:this.totalEntradas,totalSalidas:this.totalSalidas};this.isEditing?(await Object(Z["l"])(Object(Z["d"])(X["a"],"sacadas",this.sacadaId),t),alert("Informe del día actualizado exitosamente")):(await Object(Z["a"])(Object(Z["b"])(X["a"],"sacadas"),t),alert("Informe del día guardado exitosamente")),this.$router.push("/sacadas")}catch(t){console.error("Error al guardar/actualizar el documento: ",t),alert("Error al guardar/actualizar el informe del día: "+t.message)}},updateCurrentDate(){this.currentDate=lt()(this.selectedDate)}},async created(){await this.loadProveedores(),await this.loadMedidas(),this.$route.params.id?(console.log("ID de la ruta encontrado:",this.$route.params.id),await this.loadSacada(this.$route.params.id)):console.log("No se encontró ID en la ruta"),this.isLoaded=!0},watch:{"newSalida.proveedor":"updateKilosDisponibles","newSalida.medida":"updateKilosDisponibles","newSalida.kilos":"updateKilosDisponibles"}},ct=dt,ut=(a("3e48"),Object(c["a"])(ct,nt,st,!1,null,"167d1176",null)),mt=ut.exports,pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sacadas-menu-container"},[e("h1",[t._v("Menú de Sacadas")]),e("div",{staticClass:"actions-container"},[e("router-link",{staticClass:"action-button new-sacada-btn",attrs:{to:"/sacadas/new"}},[t._v(" Nueva Sacada ")]),e("router-link",{staticClass:"action-button",attrs:{to:"/gestionar-productos"}},[t._v(" Gestionar Productos ")])],1),e("div",{staticClass:"sacadas-list"},[e("h2",[t._v("Registros de Sacadas")]),t.isLoading?e("div",{staticClass:"loading"},[t._v("Cargando registros...")]):0===t.sacadas.length?e("div",{staticClass:"no-records"},[t._v(" No hay registros de sacadas. ")]):e("ul",t._l(t.paginatedSacadas,(function(a){return e("li",{key:a.id,staticClass:"sacada-item"},[e("div",{staticClass:"sacada-content",on:{click:function(e){return t.editSacada(a.id)}}},[e("span",{staticClass:"sacada-date"},[t._v(t._s(t.formatDate(a.fecha)))]),e("div",{staticClass:"sacada-summary"},[e("div",{staticClass:"sacada-entry"},[e("span",{staticClass:"sacada-label"},[t._v("Entradas:")]),e("span",{staticClass:"sacada-value"},[t._v(t._s(t.formatNumber(a.totalEntradas))+" kg")])]),e("div",{staticClass:"sacada-entry"},[e("span",{staticClass:"sacada-label"},[t._v("Salidas:")]),e("span",{staticClass:"sacada-value"},[t._v(t._s(t.formatNumber(a.totalSalidas))+" kg")])])])]),e("div",{staticClass:"sacada-actions"},[e("button",{staticClass:"delete-btn",on:{click:function(e){return e.stopPropagation(),t.deleteSacada(a.id)}}},[t._v("Borrar")])])])})),0),e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:1===t.currentPage},on:{click:t.prevPage}},[t._v("Anterior")]),e("span",[t._v("Página "+t._s(t.currentPage)+" de "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage===t.totalPages},on:{click:t.nextPage}},[t._v("Siguiente")])])])])},bt=[];a("898b");lt.a.locale("es");var vt={name:"SacadasMenu",data(){return{sacadas:[],isLoading:!0,currentPage:1,itemsPerPage:10}},computed:{paginatedSacadas(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.sacadas.slice(t,e)},totalPages(){return Math.ceil(this.sacadas.length/this.itemsPerPage)}},methods:{async loadSacadas(){try{this.isLoading=!0;const t=Object(Z["b"])(X["a"],"sacadas"),e=Object(Z["j"])(t,Object(Z["i"])("fecha","desc")),a=await Object(Z["f"])(e);this.sacadas=a.docs.map(t=>{const e=t.data();let a;return a=e.fecha instanceof Date?lt()(e.fecha).toDate():e.fecha&&"function"===typeof e.fecha.toDate?lt()(e.fecha.toDate()).toDate():lt()(e.fecha).toDate(),a=lt()(a).toDate(),{id:t.id,...e,fecha:a,totalEntradas:e.totalEntradas||0,totalSalidas:e.totalSalidas||0}})}catch(t){console.error("Error al cargar sacadas: ",t),this.sacadas=[]}finally{this.isLoading=!1}},formatDate(t){return lt()(t).format("DD [de] MMMM [de] YYYY")},formatNumber(t){return(t||0).toLocaleString("es-ES",{minimumFractionDigits:1,maximumFractionDigits:1})},editSacada(t){this.$router.push("/sacadas/"+t)},async deleteSacada(t){if(confirm("¿Estás seguro de que quieres borrar este registro de sacadas?"))try{await Object(Z["c"])(Object(Z["d"])(X["a"],"sacadas",t)),this.sacadas=this.sacadas.filter(e=>e.id!==t),alert("Registro de sacadas borrado con éxito")}catch(e){console.error("Error al borrar el registro de sacadas: ",e),alert("Error al borrar el registro de sacadas")}},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}},mounted(){this.loadSacadas()}},ft=vt,ht=(a("2afd"),Object(c["a"])(ft,pt,bt,!1,null,"3fcb6479",null)),gt=ht.exports,_t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"gestionar-productos-container"},[e("div",{staticClass:"back-button-container"},[e("BackButton",{attrs:{to:"/sacadas"}})],1),e("h1",[t._v("Gestión de Productos")]),e("div",{staticClass:"actions-container"},[e("router-link",{staticClass:"action-button",attrs:{to:"/gestionar-medidas"}},[t._v(" Gestionar Medidas ")]),e("router-link",{staticClass:"action-button",attrs:{to:"/gestionar-proveedores"}},[t._v(" Gestionar Proveedores ")])],1),e("div",{staticClass:"modify-product-form"},[e("h2",[t._v("Modificar Existencia de Producto")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.modifyProduct.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"tipo"}},[t._v("Tipo:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modifyProductData.tipo,expression:"modifyProductData.tipo"}],attrs:{id:"tipo",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.modifyProductData,"tipo",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"proveedor"}},[t._v("Proveedor")]),e("option",{attrs:{value:"maquila"}},[t._v("Maquila")])])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"proveedor"}},[t._v("Proveedor/Maquila:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modifyProductData.proveedor,expression:"modifyProductData.proveedor"}],attrs:{id:"proveedor",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.modifyProductData,"proveedor",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:""}},[t._v("Seleccione un proveedor/maquila")]),t._l(t.proveedoresFiltrados,(function(a){return e("option",{key:a.id,domProps:{value:a.nombre}},[t._v(" "+t._s(a.nombre)+" ")])}))],2)]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"medida"}},[t._v("Medida:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modifyProductData.medida,expression:"modifyProductData.medida"}],attrs:{id:"medida",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.modifyProductData,"medida",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:""}},[t._v("Seleccione una medida")]),t._l(t.medidasFiltradas,(function(a){return e("option",{key:a.id,domProps:{value:a.nombre}},[t._v(" "+t._s(a.nombre)+" ")])}))],2)]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"kilos"}},[t._v("Kilos:")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.modifyProductData.kilos,expression:"modifyProductData.kilos",modifiers:{number:!0}}],attrs:{id:"kilos",type:"number",step:"0.1",required:""},domProps:{value:t.modifyProductData.kilos},on:{input:function(e){e.target.composing||t.$set(t.modifyProductData,"kilos",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"operacion"}},[t._v("Operación:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modifyProductData.operacion,expression:"modifyProductData.operacion"}],attrs:{id:"operacion",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.modifyProductData,"operacion",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"sumar"}},[t._v("Sumar")]),e("option",{attrs:{value:"restar"}},[t._v("Restar")])])]),e("button",{staticClass:"submit-btn",attrs:{type:"submit"}},[t._v("Modificar Existencia")])])]),e("div",{staticClass:"products-list"},[e("h2",[t._v("Existencias Actuales")]),e("ul",t._l(t.existencias,(function(a,o){return e("li",{key:o},[e("strong",[t._v(t._s(o))]),e("ul",t._l(a,(function(a,o){return e("li",{key:o},[t._v(" "+t._s(o)+" - "+t._s(t.formatNumber(a))+" kg ")])})),0)])})),0)]),e("router-link",{staticClass:"back-btn",attrs:{to:"/sacadas"}},[t._v("Volver al Menú de Sacadas")])],1)},yt=[],wt={name:"GestionarProductos",components:{BackButton:rt["a"]},setup(){const t=Object(o["ref"])({}),e=Object(o["ref"])([]),a=Object(o["ref"])([]),n=Object(o["ref"])({tipo:"proveedor",proveedor:"",medida:"",kilos:null,operacion:"sumar"}),s=async()=>{try{const e=await Object(Z["f"])(Object(Z["b"])(X["a"],"sacadas")),a={};e.forEach(t=>{const e=t.data();e.entradas.forEach(t=>{a[t.proveedor]||(a[t.proveedor]={}),a[t.proveedor][t.medida]||(a[t.proveedor][t.medida]=0),a[t.proveedor][t.medida]+=t.kilos}),e.salidas.forEach(t=>{a[t.proveedor]||(a[t.proveedor]={}),a[t.proveedor][t.medida]||(a[t.proveedor][t.medida]=0),a[t.proveedor][t.medida]-=t.kilos})}),Object.keys(a).forEach(t=>{a[t]=Object.fromEntries(Object.entries(a[t]).filter(([t,e])=>e>0))}),t.value=a}catch(e){console.error("Error al cargar existencias: ",e)}},r=async()=>{try{const t=await Object(Z["f"])(Object(Z["b"])(X["a"],"medidas"));e.value=t.docs.map(t=>({id:t.id,...t.data()}))}catch(t){console.error("Error al cargar medidas: ",t)}},i=async()=>{try{const t=await Object(Z["f"])(Object(Z["b"])(X["a"],"proveedores"));a.value=t.docs.map(t=>({id:t.id,...t.data()}))}catch(t){console.error("Error al cargar proveedores: ",t)}},l=async()=>{try{const{proveedor:t,medida:e,kilos:a,operacion:o}=n.value,r={fecha:new Date,entradas:[],salidas:[]};"sumar"===o?r.entradas.push({proveedor:t,medida:e,kilos:a}):r.salidas.push({proveedor:t,medida:e,kilos:a}),await Object(Z["a"])(Object(Z["b"])(X["a"],"sacadas"),r),alert("Existencia modificada con éxito"),n.value={tipo:"proveedor",proveedor:"",medida:"",kilos:null,operacion:"sumar"},s()}catch(t){console.error("Error al modificar producto: ",t),alert("Error al modificar la existencia del producto")}},d=t=>t.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1}),c=Object(o["computed"])(()=>a.value.filter(t=>"proveedor"===n.value.tipo?"maquila"!==t.tipo:"maquila"===t.tipo)),u=Object(o["computed"])(()=>e.value.filter(t=>"proveedor"===n.value.tipo?"general"===t.tipo:"maquila"===t.tipo));return Object(o["onMounted"])(()=>{s(),r(),i()}),{existencias:t,medidas:e,proveedores:a,modifyProductData:n,modifyProduct:l,formatNumber:d,proveedoresFiltrados:c,medidasFiltradas:u}}},jt=wt,kt=(a("e6b2"),Object(c["a"])(jt,_t,yt,!1,null,"67f08a69",null)),Ct=kt.exports,Pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"gestionar-medidas-container"},[e("div",{staticClass:"back-button-container"},[e("BackButton",{attrs:{to:"/gestionar-productos"}})],1),e("h1",[t._v("Gestión de Medidas")]),e("div",{staticClass:"add-medida-form"},[e("h2",[t._v("Agregar Medida")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.addMedida.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"medida"}},[t._v("Medida:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newMedida.nombre,expression:"newMedida.nombre"}],attrs:{id:"medida",required:"",placeholder:"Ej: 16/20, 21/25, 26/30, etc."},domProps:{value:t.newMedida.nombre},on:{input:function(e){e.target.composing||t.$set(t.newMedida,"nombre",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"tipo"}},[t._v("Tipo:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.newMedida.tipo,expression:"newMedida.tipo"}],attrs:{id:"tipo",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newMedida,"tipo",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"general"}},[t._v("General")]),e("option",{attrs:{value:"maquila"}},[t._v("Maquila")])])]),"maquila"===t.newMedida.tipo?e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"maquila"}},[t._v("Maquila:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.newMedida.maquilaId,expression:"newMedida.maquilaId"}],attrs:{id:"maquila",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newMedida,"maquilaId",e.target.multiple?a:a[0])}}},t._l(t.maquilas,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.nombre)+" ")])})),0)]):t._e(),e("button",{staticClass:"submit-btn",attrs:{type:"submit"}},[t._v("Agregar Medida")])])]),e("div",{staticClass:"medidas-list"},[e("h2",[t._v("Lista de Medidas")]),e("h3",[t._v("Medidas Generales")]),e("ul",t._l(t.medidasGenerales,(function(a){return e("li",{key:a.id},[t._v(" "+t._s(a.nombre)+" "),e("button",{staticClass:"delete-btn",on:{click:function(e){return t.deleteMedida(a.id)}}},[t._v("Eliminar")])])})),0),e("h3",[t._v("Medidas de Maquilas")]),t._l(t.maquilas,(function(a){return e("div",{key:a.id},[e("h4",[t._v(t._s(a.nombre))]),e("ul",t._l(t.getMedidasMaquila(a.id),(function(a){return e("li",{key:a.id},[t._v(" "+t._s(a.nombre)+" "),e("button",{staticClass:"delete-btn",on:{click:function(e){return t.deleteMedida(a.id)}}},[t._v("Eliminar")])])})),0)])}))],2)])},xt=[],Dt={name:"GestionarMedidas",components:{BackButton:rt["a"]},setup(){const t=Object(o["ref"])([]),e=Object(o["ref"])([]),a=Object(o["ref"])({nombre:"",tipo:"general",maquilaId:""}),n=async()=>{try{const e=await Object(Z["f"])(Object(Z["b"])(X["a"],"medidas"));t.value=e.docs.map(t=>({id:t.id,...t.data()}))}catch(e){console.error("Error al cargar medidas: ",e)}},s=async()=>{try{const t=Object(Z["j"])(Object(Z["b"])(X["a"],"proveedores"),Object(Z["m"])("tipo","==","maquila")),a=await Object(Z["f"])(t);e.value=a.docs.map(t=>({id:t.id,...t.data()}))}catch(t){console.error("Error al cargar maquilas: ",t)}},r=async()=>{try{await Object(Z["a"])(Object(Z["b"])(X["a"],"medidas"),{nombre:a.value.nombre,tipo:a.value.tipo,maquilaId:"maquila"===a.value.tipo?a.value.maquilaId:null}),a.value={nombre:"",tipo:"general",maquilaId:""},n()}catch(t){console.error("Error al añadir medida: ",t)}},i=async t=>{if(confirm("¿Estás seguro de que quieres eliminar esta medida?"))try{await Object(Z["c"])(Object(Z["d"])(X["a"],"medidas",t)),n()}catch(e){console.error("Error al eliminar medida: ",e)}},l=Object(o["computed"])(()=>t.value.filter(t=>"general"===t.tipo)),d=e=>t.value.filter(t=>"maquila"===t.tipo&&t.maquilaId===e);return Object(o["onMounted"])(()=>{n(),s()}),{medidas:t,maquilas:e,newMedida:a,addMedida:r,deleteMedida:i,medidasGenerales:l,getMedidasMaquila:d}}},St=Dt,At=(a("db6c"),Object(c["a"])(St,Pt,xt,!1,null,"2b06bfca",null)),Ot=At.exports,Et=function(){var t=this,e=t._self._c;return e("div",{staticClass:"gestionar-proveedores-container"},[e("div",{staticClass:"back-button-container"},[e("BackButton",{attrs:{to:"/gestionar-productos"}})],1),e("h1",[t._v("Gestión de Proveedores y Maquilas")]),e("div",{staticClass:"add-proveedor-form"},[e("h2",[t._v("Agregar Proveedor/Maquila")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.addProveedor.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"nombre"}},[t._v("Nombre:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newProveedor.nombre,expression:"newProveedor.nombre"}],attrs:{id:"nombre",required:"",placeholder:"Nombre del proveedor/maquila"},domProps:{value:t.newProveedor.nombre},on:{input:function(e){e.target.composing||t.$set(t.newProveedor,"nombre",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"tipo"}},[t._v("Tipo:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.newProveedor.tipo,expression:"newProveedor.tipo"}],attrs:{id:"tipo",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newProveedor,"tipo",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"proveedor"}},[t._v("Proveedor")]),e("option",{attrs:{value:"maquila"}},[t._v("Maquila")])])]),e("button",{staticClass:"submit-btn",attrs:{type:"submit"}},[t._v("Agregar")])])]),e("div",{staticClass:"proveedores-list"},[e("h2",[t._v("Lista de Proveedores y Maquilas")]),e("ul",t._l(t.sortedProveedores,(function(a){return e("li",{key:a.id},[e("div",{staticClass:"proveedor-info"},[e("strong",[t._v(t._s(a.nombre))]),e("span",[t._v("("+t._s("proveedor"===a.tipo?"Proveedor":"Maquila")+")")])]),e("button",{staticClass:"delete-btn",on:{click:function(e){return t.deleteProveedor(a.id)}}},[t._v("Eliminar")])])})),0)])])},Mt=[],Nt={name:"GestionarProveedores",components:{BackButton:rt["a"]},setup(){const t=Object(o["ref"])([]),e=Object(o["ref"])({nombre:"",tipo:"proveedor"}),a=async()=>{try{const e=await Object(Z["f"])(Object(Z["b"])(X["a"],"proveedores"));t.value=e.docs.map(t=>({id:t.id,...t.data()}))}catch(e){console.error("Error al cargar proveedores: ",e)}},n=async()=>{try{await Object(Z["a"])(Object(Z["b"])(X["a"],"proveedores"),{nombre:e.value.nombre,tipo:e.value.tipo}),e.value={nombre:"",tipo:"proveedor"},a()}catch(t){console.error("Error al añadir proveedor: ",t)}},s=async t=>{if(confirm("¿Estás seguro de que quieres eliminar este proveedor/maquila?"))try{await Object(Z["c"])(Object(Z["d"])(X["a"],"proveedores",t)),a()}catch(e){console.error("Error al eliminar proveedor: ",e)}},r=Object(o["computed"])(()=>[...t.value].sort((t,e)=>t.nombre.localeCompare(e.nombre)));return Object(o["onMounted"])(a),{proveedores:t,newProveedor:e,addProveedor:n,deleteProveedor:s,sortedProveedores:r}}},$t=Nt,It=(a("9226"),Object(c["a"])($t,Et,Mt,!1,null,"14c80c33",null)),qt=It.exports,zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"existencias-page"},[e("div",{staticClass:"existencias-container"},[e("div",{staticClass:"header"},[e("h1",[t._v("Reporte de Existencias")]),e("button",{staticClass:"print-button",on:{click:t.imprimirReporte}},[t._v(" Imprimir Reporte ")])]),e("div",{staticClass:"filters"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search-input",attrs:{placeholder:"Buscar por proveedor o medida"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),e("div",{staticClass:"existencias-grid"},t._l(t.filteredExistencias,(function(a,o){return e("div",{key:o,staticClass:"proveedor-card"},[e("h2",[t._v(t._s(o))]),e("div",{staticClass:"medidas-container"},t._l(a,(function(a,n){return e("div",{key:n,staticClass:"medida-item"},[e("div",{staticClass:"medida-info"},[e("span",{staticClass:"medida-nombre"},[t._v(t._s(n))]),e("span",{staticClass:"medida-kilos"},[t._v(t._s(t.formatNumber(a))+" kg")])]),e("div",{staticClass:"medida-bar-container"},[e("div",{staticClass:"medida-bar",style:{width:a/("ozuna"===o.toLowerCase()?t.maxKilos.ozuna:t.maxKilos.normal)*100+"%"}})])])})),0),e("div",{staticClass:"proveedor-total"},[t._v("Total: "+t._s(t.formatNumber(t.calcularTotalProveedor(a)))+" kg")])])})),0),e("div",{staticClass:"total-general"},[e("h2",[t._v("Total General: "+t._s(t.formatNumber(t.totalGeneral))+" kg")])]),e("div",{staticClass:"totales-por-medida"},[e("h3",[t._v("Totales por Medida")]),e("table",[t._m(0),e("tbody",[t._l(t.totalesPorMedida.totales,(function(a,o){return e("tr",{key:o},[e("td",[t._v(t._s(o))]),e("td",[t._v(t._s(t.formatNumber(a))+" kg")])])})),e("tr",{staticClass:"total-row"},[t._m(1),e("td",[e("strong",[t._v(t._s(t.formatNumber(t.totalPorMedidas))+" kg")])])])],2)]),e("h3",[t._v("Totales Ozuna")]),e("table",[t._m(2),e("tbody",[t._l(t.totalesPorMedida.ozunaTotales,(function(a,o){return e("tr",{key:o},[e("td",[t._v(t._s(o))]),e("td",[t._v(t._s(t.formatNumber(a))+" kg")])])})),e("tr",{staticClass:"total-row"},[t._m(3),e("td",[e("strong",[t._v(t._s(t.formatNumber(t.totalOzuna))+" kg")])])])],2)])])])])},Tt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Medida")]),e("th",[t._v("Total (kg)")])])])},function(){var t=this,e=t._self._c;return e("td",[e("strong",[t._v("Total")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Medida")]),e("th",[t._v("Total (kg)")])])])},function(){var t=this,e=t._self._c;return e("td",[e("strong",[t._v("Total")])])}],Ft={name:"Existencias",setup(){const t=Object(o["ref"])({}),e=Object(o["ref"])(""),a=async()=>{const e=await Object(Z["f"])(Object(Z["b"])(X["a"],"sacadas")),a={};e.forEach(t=>{const e=t.data();e.entradas.forEach(t=>{a[t.proveedor]||(a[t.proveedor]={}),a[t.proveedor][t.medida]||(a[t.proveedor][t.medida]=0),a[t.proveedor][t.medida]+=t.kilos}),e.salidas.forEach(t=>{a[t.proveedor]||(a[t.proveedor]={}),a[t.proveedor][t.medida]||(a[t.proveedor][t.medida]=0),a[t.proveedor][t.medida]-=t.kilos})}),Object.keys(a).forEach(t=>{a[t]=Object.fromEntries(Object.entries(a[t]).filter(([t,e])=>e>0)),0===Object.keys(a[t]).length&&delete a[t]}),t.value=a},n=Object(o["computed"])(()=>{if(!e.value)return t.value;const a=e.value.toLowerCase(),o={};return Object.entries(t.value).forEach(([t,e])=>{const n=Object.entries(e).filter(([e])=>t.toLowerCase().includes(a)||e.toLowerCase().includes(a));n.length>0&&(o[t]=Object.fromEntries(n))}),o}),s=Object(o["computed"])(()=>{let e=0,a=0;return Object.entries(t.value).forEach(([t,o])=>{Object.values(o).forEach(o=>{"ozuna"===t.toLowerCase()?o>a&&(a=o):o>e&&(e=o)})}),{normal:e,ozuna:a}}),r=Object(o["computed"])(()=>Object.values(n.value).reduce((t,e)=>t+Object.values(e).reduce((t,e)=>t+e,0),0)),i=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),l=()=>{const t=(new Date).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),e="\n        <style>\n          @page { size: A4 landscape; margin: 1cm; }\n          body {\n            font-family: Arial, sans-serif;\n            font-size: 14pt;\n            line-height: 1.4;\n            color: #333;\n          }\n          h1, h2, h3 { color: #2c3e50; margin: 0 0 10px 0; }\n          h1 {\n            text-align: center;\n            font-size: 24pt;\n            border-bottom: 2px solid #3498db;\n            padding-bottom: 8px;\n          }\n          .fecha-reporte {\n            text-align: right;\n            font-size: 12pt;\n            margin-bottom: 10px;\n          }\n          .reporte-container {\n            display: flex;\n            flex-wrap: wrap;\n            justify-content: space-between;\n          }\n          .proveedor-card {\n            width: 48%;\n            background-color: #f8f9fa;\n            border-radius: 6px;\n            padding: 12px;\n            margin-bottom: 15px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n          }\n          .proveedor-card h2 {\n            font-size: 18pt;\n            border-bottom: 1px solid #bdc3c7;\n            padding-bottom: 5px;\n          }\n          .medida-item {\n            margin-bottom: 8px;\n          }\n          .medida-info {\n            display: flex;\n            justify-content: space-between;\n            font-size: 14pt;\n            margin-bottom: 3px;\n          }\n          .medida-nombre { color: #2c3e50; }\n          .medida-kilos { font-weight: bold; }\n          .medida-bar-container {\n            height: 15px;\n            background-color: #ecf0f1;\n            border-radius: 3px;\n            overflow: hidden;\n          }\n          .medida-bar {\n            height: 100%;\n            background-color: #3498db;\n          }\n          .proveedor-total {\n            text-align: right;\n            font-weight: bold;\n            margin-top: 8px;\n            font-size: 16pt;\n          }\n          .totales-section {\n            display: flex;\n            justify-content: space-between;\n            margin-top: 20px;\n          }\n          .totales-table {\n            width: 48%;\n          }\n          table {\n            width: 100%;\n            border-collapse: collapse;\n          }\n          th, td {\n            border: 1px solid #ddd;\n            padding: 6px;\n            text-align: left;\n            font-size: 13pt;\n          }\n          th { \n            background-color: #f2f2f2; \n            font-weight: bold;\n          }\n          .total-general {\n            text-align: right;\n            font-size: 18pt;\n            font-weight: bold;\n            margin-top: 15px;\n            border-top: 2px solid #3498db;\n            padding-top: 10px;\n          }\n          .total-row {\n            font-weight: bold;\n            background-color: #f2f2f2;\n          }\n          .total-row td {\n            border-top: 2px solid #3498db;\n          }\n        </style>\n      ",a=`\n        <h1>Reporte de Existencias - Rey Pez</h1>\n        <div class="fecha-reporte">${t}</div>\n        <div class="reporte-container">\n          ${Object.entries(n.value).map(([t,e])=>`\n            <div class="proveedor-card">\n              <h2>${t}</h2>\n              <div class="medidas-container">\n                ${Object.entries(e).map(([e,a])=>`\n                  <div class="medida-item">\n                    <div class="medida-info">\n                      <span class="medida-nombre">${e}</span>\n                      <span class="medida-kilos">${i(a)} kg</span>\n                    </div>\n                    <div class="medida-bar-container">\n                      <div class="medida-bar" style="width: ${a/("ozuna"===t.toLowerCase()?s.value.ozuna:s.value.normal)*100}%;"></div>\n                    </div>\n                  </div>\n                `).join("")}\n              </div>\n              <div class="proveedor-total">\n                Total: ${i(m(e))} kg\n              </div>\n            </div>\n          `).join("")}\n        </div>\n        <div class="totales-section">\n          <div class="totales-table">\n            <h3>Totales por Medida</h3>\n            <table>\n              <thead>\n                <tr>\n                  <th>Medida</th>\n                  <th>Total (kg)</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${Object.entries(d.value.totales).map(([t,e])=>`\n                  <tr>\n                    <td>${t}</td>\n                    <td>${i(e)}</td>\n                  </tr>\n                `).join("")}\n                <tr class="total-row">\n                  <td><strong>Total</strong></td>\n                  <td><strong>${i(c.value)} kg</strong></td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <div class="totales-table">\n            <h3>Totales Maquila (Ozuna)</h3>\n            <table>\n              <thead>\n                <tr>\n                  <th>Medida</th>\n                  <th>Total (kg)</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${Object.entries(d.value.ozunaTotales).map(([t,e])=>`\n                  <tr>\n                    <td>${t}</td>\n                    <td>${i(e)}</td>\n                  </tr>\n                `).join("")}\n                <tr class="total-row">\n                  <td><strong>Total</strong></td>\n                  <td><strong>${i(u.value)} kg</strong></td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <div class="total-general">\n          Total General: ${i(r.value)} kg\n        </div>\n      `,o=window.open("","_blank");o.document.write(`\n        <html>\n          <head>\n            <title>Reporte de Existencias - Rey Pez</title>\n            ${e}\n          </head>\n          <body>\n            ${a}\n          </body>\n        </html>\n      `),o.document.close(),o.print()},d=Object(o["computed"])(()=>{const t={},e={};return Object.entries(n.value).forEach(([a,o])=>{Object.entries(o).forEach(([o,n])=>{"ozuna"===a.toLowerCase()?e[o]=(e[o]||0)+n:t[o]=(t[o]||0)+n})}),{totales:t,ozunaTotales:e}}),c=Object(o["computed"])(()=>Object.values(d.value.totales).reduce((t,e)=>t+e,0)),u=Object(o["computed"])(()=>Object.values(d.value.ozunaTotales).reduce((t,e)=>t+e,0)),m=t=>Object.values(t).reduce((t,e)=>t+e,0);let p;return Object(o["onMounted"])(()=>{a(),p=Object(Z["h"])(Object(Z["b"])(X["a"],"sacadas"),()=>{a()})}),Object(o["onUnmounted"])(()=>{p&&p()}),Object(o["watchEffect"])(()=>{console.log("Existencias actualizadas:",t.value)}),{existencias:t,filteredExistencias:n,search:e,maxKilos:s,totalGeneral:r,formatNumber:i,imprimirReporte:l,totalesPorMedida:d,totalPorMedidas:c,totalOzuna:u,calcularTotalProveedor:m}}},Bt=Ft,Kt=(a("9a83"),Object(c["a"])(Bt,zt,Tt,!1,null,"493c92fe",null)),Lt=Kt.exports,Gt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-container"},[e("div",{staticClass:"content-wrap"},[e("div",{staticClass:"cuentas-mexico-container"},[e("h1",[t._v("Cuentas México")]),e("div",{staticClass:"botones-container"},[e("router-link",{staticClass:"boton-cuenta",attrs:{to:"/cuentas-ozuna"}},[e("div",{staticClass:"card"},[e("h2",[t._v("Ozuna")])])])],1)])])])},Ht=[],Rt=(a("67d2"),{}),Yt=Object(c["a"])(Rt,Gt,Ht,!1,null,"4cdaf5a7",null),Ut=Yt.exports,Vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ozuna-cuentas-menu-container"},[e("h1",[t._v("Menú de Cuentas Ozuna")]),e("div",{staticClass:"actions-container"},[e("router-link",{staticClass:"action-button back-btn",attrs:{to:"/cuentas-mexico"}},[t._v(" Cuentas México ")]),e("router-link",{staticClass:"action-button new-cuenta-btn",attrs:{to:"/cuentas-ozuna/nueva"}},[t._v(" Nueva Cuenta ")])],1),e("div",{staticClass:"cuentas-list"},[e("h2",[t._v("Registros de Cuentas")]),t.isLoading?e("div",{staticClass:"loading"},[t._v("Cargando registros...")]):0===t.cuentas.length?e("div",{staticClass:"no-records"},[t._v(" No hay registros de cuentas. ")]):e("ul",t._l(t.cuentas,(function(a){return e("li",{key:a.id,staticClass:"cuenta-item"},[e("div",{staticClass:"cuenta-content"},[e("span",{staticClass:"cuenta-date"},[t._v(t._s(t.formatDate(a.fecha)))]),e("p",{staticClass:"cuenta-summary"},[e("span",[t._v("Saldo Hoy: $"+t._s(t.formatNumber(a.saldoHoy)))]),e("span",[t._v("Total Acumulado: $"+t._s(t.formatNumber(a.totalNota)))])])]),e("div",{staticClass:"cuenta-actions"},[e("button",{staticClass:"edit-btn",on:{click:function(e){return t.editarCuenta(a.id)}}},[t._v("Editar")]),e("button",{staticClass:"delete-btn",on:{click:function(e){return t.borrarCuenta(a.id)}}},[t._v("Borrar")])])])})),0)])])},Jt=[],Xt={name:"OzunaCuentasMenu",data(){return{cuentas:[],isLoading:!0}},methods:{async loadCuentas(){try{this.isLoading=!0;const t=Object(Z["b"])(X["a"],"cuentasOzuna"),e=Object(Z["j"])(t,Object(Z["i"])("fecha","desc")),a=await Object(Z["f"])(e);this.cuentas=a.docs.map(t=>{const e=t.data();return{id:t.id,fecha:e.fecha,saldoHoy:e.totalGeneral||0,totalNota:e.totalSaldo||0}}),console.log("Cuentas cargadas:",this.cuentas)}catch(t){console.error("Error al cargar cuentas: ",t),this.cuentas=[]}finally{this.isLoading=!1}},formatDate(t){const e=new Date(t);return e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),e.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})},formatNumber(t){return t.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})},editarCuenta(t){this.$router.push(`/cuentas-ozuna/${t}?edit=true`)},async borrarCuenta(t){if(confirm("¿Estás seguro de que quieres borrar este registro de cuenta?"))try{await Object(Z["c"])(Object(Z["d"])(X["a"],"cuentasOzuna",t)),this.cuentas=this.cuentas.filter(e=>e.id!==t),alert("Registro de cuenta borrado con éxito"),this.loadCuentas()}catch(e){console.error("Error al borrar el registro de cuenta: ",e),alert("Error al borrar el registro de cuenta")}}},mounted(){this.loadCuentas()}},Zt=Xt,Qt=(a("ff89"),Object(c["a"])(Zt,Vt,Jt,!1,null,"6763c659",null)),Wt=Qt.exports,te=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cuentas-ozuna-container"},[e("div",{staticClass:"back-button-container"},[e("BackButton",{attrs:{to:"/cuentas-ozuna"}})],1),e("h1",[t._v("Cuentas Ozuna")]),e("div",{staticClass:"fecha-actual"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.fechaSeleccionada,expression:"fechaSeleccionada"}],attrs:{type:"date"},domProps:{value:t.fechaSeleccionada},on:{input:function(e){e.target.composing||(t.fechaSeleccionada=e.target.value)}}}),e("span",[t._v(t._s(t.fechaFormateada))])]),e("div",{staticClass:"input-section"},[e("h2",[t._v("Ingresar Datos")]),e("div",{staticClass:"input-row"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newItem.kilos,expression:"newItem.kilos",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"Kilos"},domProps:{value:t.newItem.kilos},on:{input:function(e){e.target.composing||t.$set(t.newItem,"kilos",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem.medida,expression:"newItem.medida"}],attrs:{type:"text",placeholder:"Medida"},domProps:{value:t.newItem.medida},on:{input:function(e){e.target.composing||t.$set(t.newItem,"medida",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newItem.costo,expression:"newItem.costo",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"Costo"},domProps:{value:t.newItem.costo},on:{input:function(e){e.target.composing||t.$set(t.newItem,"costo",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("button",{on:{click:t.addItem}},[t._v("Agregar")])])]),e("table",{staticClass:"tabla-principal"},[t._m(0),e("tbody",t._l(t.items,(function(a,o){return e("tr",{key:o,on:{touchstart:function(e){return t.iniciarPresion(o)},touchend:t.finalizarPresion}},[e("td",[t._v(t._s(t.formatNumber(a.kilos)))]),e("td",[t._v(t._s(a.medida))]),e("td",[t._v("$"+t._s(t.formatNumber(a.costo)))]),e("td",[t._v("$"+t._s(t.formatNumber(a.total)))]),e("td",{staticClass:"action-column desktop-only"},[e("button",{staticClass:"delete-btn",on:{click:function(e){return t.removeItem(o)}}},[t._v("Eliminar")])])])})),0),e("tfoot",[e("tr",[e("td",{attrs:{colspan:"3"}}),e("td",[t._v("$"+t._s(t.formatNumber(t.totalGeneral)))]),e("td")])])]),e("h2",[t._v("Saldo pendiente")]),e("div",{staticClass:"saldo-pendiente"},[e("div",{staticClass:"input-row"},[e("span",[t._v("Saldo Acumulado Anterior: $"+t._s(t.formatNumber(t.saldoAcumuladoAnterior)))])]),t._l(t.cobros,(function(a,o){return e("div",{key:o,staticClass:"input-row"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.descripcion,expression:"cobro.descripcion"}],attrs:{type:"text",placeholder:"Descripción"},domProps:{value:a.descripcion},on:{input:function(e){e.target.composing||t.$set(a,"descripcion",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model.number",value:a.monto,expression:"cobro.monto",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"Monto"},domProps:{value:a.monto},on:{input:function(e){e.target.composing||t.$set(a,"monto",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("button",{staticClass:"delete-btn",on:{click:function(e){return t.removeCobro(o)}}},[t._v("Eliminar")])])})),e("button",{staticClass:"add-btn",on:{click:t.addCobro}},[t._v("Agregar Cobro")])],2),e("h2",[t._v("Abonos")]),e("div",{staticClass:"abonos"},[t._l(t.abonos,(function(a,o){return e("div",{key:o,staticClass:"input-row"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.descripcion,expression:"abono.descripcion"}],attrs:{type:"text",placeholder:"Descripción"},domProps:{value:a.descripcion},on:{input:function(e){e.target.composing||t.$set(a,"descripcion",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model.number",value:a.monto,expression:"abono.monto",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"Monto"},domProps:{value:a.monto},on:{input:function(e){e.target.composing||t.$set(a,"monto",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("button",{staticClass:"delete-btn",on:{click:function(e){return t.removeAbono(o)}}},[t._v("Eliminar")])])})),e("button",{staticClass:"add-btn",on:{click:t.addAbono}},[t._v("Agregar Abono")])],2),e("table",{staticClass:"tabla-saldo"},[e("tr",[e("td",[t._v("Saldo Acumulado Anterior")]),e("td",[t._v("$"+t._s(t.formatNumber(t.saldoAcumuladoAnterior)))])]),e("tr",[e("td",[t._v("Saldo Hoy")]),e("td",[t._v("$"+t._s(t.formatNumber(t.totalGeneral)))])]),t._l(t.cobros,(function(a,o){return e("tr",{key:o},[e("td",[t._v(t._s(a.descripcion))]),e("td",[t._v("$"+t._s(t.formatNumber(a.monto)))])])})),t._l(t.abonos,(function(a,o){return e("tr",{key:"abono-"+o},[e("td",[t._v(t._s(a.descripcion)+" (Abono)")]),e("td",[t._v("-$"+t._s(t.formatNumber(a.monto)))])])})),e("tr",{staticClass:"total"},[e("td",[t._v("Total")]),e("td",[t._v("$"+t._s(t.formatNumber(t.totalSaldo)))])]),e("tr",{staticClass:"total"},[e("td",[t._v("Nuevo Saldo Acumulado")]),e("td",[t._v("$"+t._s(t.formatNumber(t.nuevoSaldoAcumulado)))])])],2),e("div",{staticClass:"button-container"},[e("button",{staticClass:"save-button",on:{click:t.guardarNota}},[t._v("Guardar Nota")]),e("button",{staticClass:"print-button",on:{click:t.imprimirTablas}},[t._v("Imprimir")])]),t.showMobileActions?e("div",{staticClass:"mobile-actions-modal"},[e("button",{on:{click:function(e){return t.editItem(t.selectedItemIndex)}}},[t._v("Editar")]),e("button",{on:{click:function(e){return t.removeItem(t.selectedItemIndex)}}},[t._v("Eliminar")]),e("button",{on:{click:t.cancelMobileActions}},[t._v("Cancelar")])]):t._e()])},ee=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Kilos")]),e("th",[t._v("Medida")]),e("th",[t._v("Costo")]),e("th",[t._v("Total")]),e("th",{staticClass:"desktop-only"},[t._v("Acciones")])])])}],ae={name:"CuentasOzuna",components:{BackButton:rt["a"]},data(){return{items:[],newItem:{kilos:null,medida:"",costo:null},saldoAcumuladoAnterior:0,cobros:[],abonos:[],fechaSeleccionada:this.obtenerFechaActual(),showMobileActions:!1,selectedItemIndex:null,presionTimer:null}},computed:{fechaFormateada(){const t=new Date(this.fechaSeleccionada+"T00:00:00"),e={year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("es-ES",e)},totalGeneral(){return this.items.reduce((t,e)=>t+e.total,0)},totalSaldo(){const t=this.cobros.reduce((t,e)=>t+(e.monto||0),0),e=this.abonos.reduce((t,e)=>t+(e.monto||0),0);return this.saldoAcumuladoAnterior+this.totalGeneral+t-e},nuevoSaldoAcumulado(){return this.totalSaldo}},watch:{fechaSeleccionada:{handler:"loadSaldoAcumuladoAnterior",immediate:!0}},async mounted(){console.log("Mounted ejecutado",this.$route.params,this.$route.query);const t=this.$route.params.id,e="true"===this.$route.query.edit;t&&e?(console.log("Iniciando carga de cuenta existente"),await this.loadExistingCuenta(t)):(console.log("Cargando saldo acumulado anterior para nueva cuenta"),await this.loadSaldoAcumuladoAnterior())},methods:{async loadExistingCuenta(t){try{console.log("Cargando cuenta con ID:",t);const e=Object(Z["d"])(X["a"],"cuentasOzuna",t),a=await Object(Z["e"])(e);if(a.exists()){const t=a.data();console.log("Datos de la cuenta cargados:",t),this.$nextTick(()=>{this.items=t.items||[],this.saldoAcumuladoAnterior=t.saldoAcumuladoAnterior||0,this.cobros=t.cobros||[],this.abonos=t.abonos||[],this.fechaSeleccionada=t.fecha||this.obtenerFechaActual(),console.log("Estado actualizado con $nextTick:",{items:this.items,saldoAcumuladoAnterior:this.saldoAcumuladoAnterior,cobros:this.cobros,abonos:this.abonos,fechaSeleccionada:this.fechaSeleccionada})})}else console.error("No se encontró la cuenta con el ID proporcionado")}catch(e){console.error("Error al cargar la cuenta existente: ",e)}},async loadSaldoAcumuladoAnterior(){try{const t=Object(Z["b"])(X["a"],"cuentasOzuna"),e=Object(Z["j"])(t,Object(Z["m"])("fecha","<",this.fechaSeleccionada),Object(Z["i"])("fecha","asc")),a=await Object(Z["f"])(e);let o=0;a.forEach(t=>{const e=t.data(),a=e.totalGeneral||0,n=(e.cobros||[]).reduce((t,e)=>t+(e.monto||0),0),s=(e.abonos||[]).reduce((t,e)=>t+(e.monto||0),0);o+=a+n-s}),this.saldoAcumuladoAnterior=o,console.log("Saldo acumulado anterior calculado:",this.saldoAcumuladoAnterior)}catch(t){console.error("Error al calcular el saldo acumulado anterior:",t),this.saldoAcumuladoAnterior=0}},formatNumber(t){return t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},addItem(){if(this.newItem.kilos&&this.newItem.medida&&this.newItem.costo){const t=this.newItem.kilos*this.newItem.costo;this.items.push({...this.newItem,total:t}),this.newItem={kilos:null,medida:"",costo:null}}},removeItem(t){this.items.splice(t,1),this.showMobileActions=!1},addCobro(){this.cobros.push({descripcion:"",monto:0})},removeCobro(t){this.cobros.splice(t,1)},addAbono(){this.abonos.push({descripcion:"",monto:0})},removeAbono(t){this.abonos.splice(t,1)},obtenerFechaActual(){const t=new Date;return t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")},async guardarNota(){try{const t={fecha:this.fechaSeleccionada,items:this.items,saldoAcumuladoAnterior:this.saldoAcumuladoAnterior,cobros:this.cobros,abonos:this.abonos,totalGeneral:this.totalGeneral,totalSaldo:this.totalSaldo,nuevoSaldoAcumulado:this.nuevoSaldoAcumulado};console.log("Datos a guardar:",t);const e=Object(Z["b"])(X["a"],"cuentasOzuna"),a=Object(Z["j"])(e,Object(Z["m"])("fecha","==",this.fechaSeleccionada)),o=await Object(Z["f"])(a);if(o.empty)await Object(Z["a"])(Object(Z["b"])(X["a"],"cuentasOzuna"),t),console.log("Nueva cuenta guardada exitosamente");else{const e=o.docs[0].id;await Object(Z["l"])(Object(Z["d"])(X["a"],"cuentasOzuna",e),t),console.log("Cuenta actualizada exitosamente")}alert("Cuenta guardada exitosamente"),this.$router.push("/cuentas-ozuna")}catch(t){console.error("Error al guardar la cuenta:",t),alert("Error al guardar la cuenta")}},iniciarPresion(t){this.presionTimer=setTimeout(()=>{this.showMobileActionsModal(t)},500)},finalizarPresion(){clearTimeout(this.presionTimer)},showMobileActionsModal(t){this.selectedItemIndex=t,this.showMobileActions=!0},cancelMobileActions(){this.showMobileActions=!1,this.selectedItemIndex=null},editItem(t){console.log("Editar item:",t),this.showMobileActions=!1},imprimirTablas(){const t=`\n        <html>\n          <head>\n            <title>Cuentas Ozuna - ${this.fechaFormateada}</title>\n            <style>\n              body {\n                font-family: Arial, sans-serif;\n                font-size: 20pt;\n                line-height: 1.6;\n                max-width: 800px;\n                margin: 0 auto;\n                padding: 20px;\n                text-align: center;\n              }\n              h1 { font-size: 30pt; margin-bottom: 20px; }\n              h2 { font-size: 27pt; margin-top: 30px; margin-bottom: 15px; }\n              table {\n                width: 100%;\n                border-collapse: collapse;\n                margin-bottom: 30px;\n                font-size: 20pt;\n              }\n              th, td {\n                border: 1px solid #ddd;\n                padding: 10px;\n                text-align: left;\n              }\n              th { background-color: #f2f2f2; font-weight: bold; }\n              .total { font-weight: bold; }\n              .total td:first-child { text-align: right; }\n              @media print {\n                body { font-size: 20pt; }\n                h1 { font-size: 25pt; }\n                h2 { font-size: 25pt; }\n                table { font-size: 20pt; }\n              }\n            </style>\n          </head>\n          <body>\n            <h1>Cuentas Ozuna - ${this.fechaFormateada}</h1>\n            \n            <h2>Detalles de la cuenta</h2>\n            <table>\n              <thead>\n                <tr>\n                  <th>Kilos</th>\n                  <th>Medida</th>\n                  <th>Costo</th>\n                  <th>Total</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${this.items.map(t=>`\n                  <tr>\n                    <td>${this.formatNumber(t.kilos)}</td>\n                    <td>${t.medida}</td>\n                    <td>$${this.formatNumber(t.costo)}</td>\n                    <td>$${this.formatNumber(t.total)}</td>\n                  </tr>\n                `).join("")}\n              </tbody>\n              <tfoot>\n                <tr class="total">\n                  <td colspan="3">Total</td>\n                  <td>$${this.formatNumber(this.totalGeneral)}</td>\n                </tr>\n              </tfoot>\n            </table>\n\n            <h2>Resumen de saldo</h2>\n            <table>\n              <tr>\n                <td>Saldo Anterior</td>\n                <td>$${this.formatNumber(this.saldoAcumuladoAnterior)}</td>\n              </tr>\n              <tr>\n                <td>Saldo Hoy</td>\n                <td>$${this.formatNumber(this.totalGeneral)}</td>\n              </tr>\n              ${this.cobros.map(t=>`\n                <tr>\n                  <td>${t.descripcion}</td>\n                  <td>$${this.formatNumber(t.monto)}</td>\n                </tr>\n              `).join("")}\n              ${this.abonos.map(t=>`\n                <tr>\n                  <td>${t.descripcion} (Abono)</td>\n                  <td>-$${this.formatNumber(t.monto)}</td>\n                </tr>\n              `).join("")}\n              <tr class="total">\n                <td>Total</td>\n                <td>$${this.formatNumber(this.totalSaldo)}</td>\n              </tr>\n            </table>\n          </body>\n        </html>\n      `,e=window.open("","_blank");e.document.write(t),e.document.close(),e.print()}}},oe=ae,ne=(a("ad65"),Object(c["a"])(oe,te,ee,!1,null,"655783a7",null)),se=ne.exports;o["default"].use(k["a"]);const re=[{path:"/noteMenu",name:"NoteMenu",component:et},{path:"/",name:"home",component:U},{path:"/sale-note/:noteId?",name:"SaleNote",component:()=>Promise.resolve().then(a.bind(null,"98cf"))},{path:"/add-client",name:"AddClient",component:ot["a"]},{path:"/editar-nota/:noteId",name:"editar-nota",component:at["default"],props:!0},{path:"/sacadas",name:"SacadasMenu",component:gt},{path:"/sacadas/new",name:"NuevaSacada",component:mt},{path:"/sacadas/:id",name:"DetalleSacada",component:mt,props:!0},{path:"/gestionar-productos",name:"GestionarProductos",component:Ct},{path:"/gestionar-medidas",name:"GestionarMedidas",component:Ot},{path:"/gestionar-proveedores",name:"GestionarProveedores",component:qt},{path:"/existencias",name:"Existencias",component:Lt},{path:"/cuentas-mexico",name:"CuentasMexico",component:Ut},{path:"/cuentas-ozuna",name:"ozuna-cuentas-menu",component:Wt},{path:"/cuentas-ozuna/nueva",name:"nueva-cuenta-ozuna",component:se},{path:"/cuentas-ozuna/:id",name:"ver-cuenta-ozuna",component:se},{path:"/cuentas-ozuna/:id?",name:"CuentasOzuna",component:se}],ie=new k["a"]({routes:re});var le=ie,de=a("5f5b"),ce=a("b1e0");a("f9e3"),a("2dd8");o["default"].use(de["a"]),o["default"].use(ce["a"]),o["default"].config.productionTip=!1,new o["default"]({router:le,render:t=>t(j)}).$mount("#app")},"5aa2":function(t,e,a){"use strict";a("8d5c")},"67d2":function(t,e,a){"use strict";a("26ef")},"6ad3":function(t,e,a){"use strict";a("e3b7")},"74c9":function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"btn-back",attrs:{to:t.to}},[t._v("Atrás")])},n=[],s={props:{to:{type:String,required:!0}}},r=s,i=(a("e0fe"),a("2877")),l=Object(i["a"])(r,o,n,!1,null,null,null);e["a"]=l.exports},"7b89":function(t,e,a){"use strict";a("8509")},"7fa2":function(t,e,a){},8509:function(t,e,a){},8790:function(t,e,a){"use strict";a("357f")},"8d5c":function(t,e,a){},9138:function(t,e,a){"use strict";a("7fa2")},9226:function(t,e,a){"use strict";a("928d")},"928d":function(t,e,a){},"98cf":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sale-note"},[e("div",{staticClass:"back-button-container"},[e("BackButton",{attrs:{to:"/NoteMenu"}})],1),e("h2",{staticClass:"sale-note-title"},[t._v("Nota de Venta")]),e("div",{staticClass:"folio-date"},[e("p",[e("strong",[t._v("Folio:")]),t._v(" "+t._s(t.formattedFolio))]),e("p",[e("strong",[t._v("Fecha de Creación:")]),t._v(" "+t._s(t.formattedCreationDate))])]),e("form",{on:{submit:function(e){return e.preventDefault(),t.addProduct.apply(null,arguments)}}},[e("div",{staticClass:"form-row"},[e("div",[e("label",{attrs:{for:"client"}},[t._v("Cliente:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.client,expression:"client"}],attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.client=e.target.multiple?a:a[0]}}},t._l(t.clients,(function(a){return e("option",{key:a.id,domProps:{value:a.name}},[t._v(" "+t._s(a.name)+" ")])})),0)]),e("div",[e("label",{attrs:{for:"date"}},[t._v("Fecha:")]),e("DatePicker",{attrs:{"value-type":"format",format:"DD MMMM YYYY",placeholder:"Selecciona una fecha"},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)]),e("div",{staticClass:"form-row"},[e("div",[e("label",{attrs:{for:"kilos"}},[t._v("Kilos:")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newProduct.kilos,expression:"newProduct.kilos",modifiers:{number:!0}}],attrs:{type:"number",step:"0.01",required:""},domProps:{value:t.newProduct.kilos},on:{input:function(e){e.target.composing||t.$set(t.newProduct,"kilos",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("div",[e("label",{attrs:{for:"product"}},[t._v("Producto:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.product,expression:"newProduct.product"}],attrs:{type:"text",id:"product",required:""},domProps:{value:t.newProduct.product},on:{input:function(e){e.target.composing||t.$set(t.newProduct,"product",e.target.value)}}})]),e("div",[e("label",{attrs:{for:"pricePerKilo"}},[t._v("Precio por Kilo:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.pricePerKilo,expression:"newProduct.pricePerKilo"}],attrs:{type:"number",id:"pricePerKilo",required:""},domProps:{value:t.newProduct.pricePerKilo},on:{input:function(e){e.target.composing||t.$set(t.newProduct,"pricePerKilo",e.target.value)}}})]),e("button",{attrs:{type:"submit"}},[t._v("Agregar Producto")])])]),t.products.length||t.abonos.length?e("div",[e("div",{ref:"printSection",staticClass:"print-section"},[e("div",{staticClass:"folio-date"},[e("p",[e("strong",[t._v("Folio:")]),t._v(" "+t._s(t.formattedFolio))]),e("p",[e("strong",[t._v("Fecha de Creación:")]),t._v(" "+t._s(t.formattedCreationDate))])]),t.products.length?e("div",[e("h3",[t._v("Resumen")]),e("table",[t._m(0),e("tbody",t._l(t.products,(function(a,o){return e("tr",{key:o,on:{touchstart:function(e){return t.startLongPress(o)},touchend:t.endLongPress,touchmove:t.endLongPress}},[t.editIndex===o?[e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editProduct.product,expression:"editProduct.product"}],attrs:{type:"text"},domProps:{value:t.editProduct.product},on:{input:function(e){e.target.composing||t.$set(t.editProduct,"product",e.target.value)}}})]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.editProduct.kilos,expression:"editProduct.kilos",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.editProduct.kilos},on:{input:function(e){e.target.composing||t.$set(t.editProduct,"kilos",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.editProduct.pricePerKilo,expression:"editProduct.pricePerKilo",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.editProduct.pricePerKilo},on:{input:function(e){e.target.composing||t.$set(t.editProduct,"pricePerKilo",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("td",[t._v("$"+t._s(t.formatNumber(t.editProduct.kilos*t.editProduct.pricePerKilo)))]),e("td",{staticClass:"action-column"},[e("button",{on:{click:t.confirmEdit}},[e("span",[t._v("✔")])]),e("button",{on:{click:t.cancelEdit}},[e("span",[t._v("❌")])])])]:[e("td",[t._v(t._s(a.product))]),e("td",[t._v(t._s(t.formatNumber(a.kilos)))]),e("td",[t._v("$"+t._s(t.formatNumber(a.pricePerKilo)))]),e("td",[t._v("$"+t._s(t.formatNumber(a.total)))]),e("td",{staticClass:"action-column"},[e("button",{on:{click:function(e){return t.editProductDetails(o)}}},[t._v("Editar")]),e("button",{on:{click:function(e){return t.removeProduct(o)}}},[t._v("Borrar")])])]],2)})),0)]),e("div",{staticClass:"total-general"},[e("h3",[t._v("Total General: $"+t._s(t.formatNumber(t.grandTotal)))])])]):t._e(),e("div",{staticClass:"abonos-container"},[e("div",{staticClass:"abonos-section"},[e("h3",[t._v("Registrar Abonos")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.addAbono.apply(null,arguments)}}},[e("div",{staticClass:"form-row"},[e("div",[e("label",{attrs:{for:"abonoMonto"}},[t._v("Monto del Abono:")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newAbono.monto,expression:"newAbono.monto",modifiers:{number:!0}}],attrs:{type:"number",id:"abonoMonto",required:""},domProps:{value:t.newAbono.monto},on:{input:function(e){e.target.composing||t.$set(t.newAbono,"monto",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("div",[e("label",{attrs:{for:"abonoFecha"}},[t._v("Fecha del Abono:")]),e("DatePicker",{attrs:{"value-type":"format",format:"DD MMMM YYYY",placeholder:"Selecciona una fecha"},model:{value:t.newAbono.fecha,callback:function(e){t.$set(t.newAbono,"fecha",e)},expression:"newAbono.fecha"}})],1)]),e("button",{staticClass:"add-abono-button",attrs:{type:"submit"}},[t._v("Agregar Abono")])]),t.abonos.length?e("div",[e("h3",[t._v("Abonos Realizados")]),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"abonos-table"},[t._m(1),e("tbody",t._l(t.abonos,(function(a,o){return e("tr",{key:o},[e("td",[t._v("$"+t._s(t.formatNumber(a.monto)))]),e("td",[t._v(t._s(t.formatDate(a.fecha)))])])})),0)])]),e("div",{staticClass:"abonos-summary"},[e("p",[e("strong",[t._v("Total Abonado:")]),t._v(" $"+t._s(t.formatNumber(t.totalAbonado)))]),e("p",[e("strong",[t._v("Saldo Restante:")]),t._v(" $"+t._s(t.formatNumber(t.saldoRestante)))]),e("p",{staticClass:"estado-pago",class:{pagado:t.isPaid,"no-pagado":!t.isPaid}},[e("strong",[t._v("Estado:")]),t._v(" "+t._s(t.isPaid?"Pagada":"No Pagada")+" ")])])]):t._e()])]),e("div",{staticClass:"action-buttons"},[e("div",{staticClass:"button-column"},[e("button",{on:{click:t.exportPDF}},[t._v("Exportar a PDF")]),e("button",{on:{click:t.printSection}},[t._v("Imprimir")])]),e("div",{staticClass:"button-column"},[e("button",{on:{click:t.saveNote}},[t._v("Guardar Nota")]),e("button",{staticClass:"delete-note-button",on:{click:t.deleteNote}},[t._v("Eliminar Nota")])])])]),t.showMobileActions?e("div",{staticClass:"mobile-actions-modal"},[e("button",{on:{click:function(e){return t.editProductDetails(t.selectedProductIndex)}}},[t._v("Editar")]),e("button",{on:{click:function(e){return t.removeProduct(t.selectedProductIndex)}}},[t._v("Borrar")]),-1!==t.editIndex?e("button",{on:{click:t.confirmEdit}},[t._v("Confirmar Edición")]):t._e(),e("button",{on:{click:t.cancelMobileActions}},[t._v("Cancelar")])]):t._e()]):t._e()])},n=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Producto")]),e("th",[t._v("Kg")]),e("th",[t._v("Precio")]),e("th",[t._v("Total")]),e("th",{staticClass:"action-column"},[t._v("Accion")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Monto")]),e("th",[t._v("Fecha")])])])}],s=(a("14d9"),a("13d5"),a("74c9")),r=a("ec45"),i=(a("411c"),a("d67e")),l=a.n(i),d=a("4e00"),c=a("dc59"),u=a("1494"),m={components:{DatePicker:r["a"],AddClient:d["a"],BackButton:s["a"]},data(){const t=new Date;return{folio:Math.floor(1e4*Math.random()),client:"",currentDate:t.toISOString().substr(0,10),newProduct:{product:"",kilos:null,pricePerKilo:null,total:0},editProduct:{product:"",kilos:0,pricePerKilo:0,total:0},products:[],clients:[],editIndex:-1,newAbono:{monto:null,fecha:t.toISOString().substr(0,10)},abonos:[],isPaid:!1,creationDate:t.toISOString().substr(0,10),noteId:null,longPressTimer:null,showMobileActions:!1,selectedProductIndex:null}},computed:{grandTotal(){return this.products.reduce((t,e)=>t+e.total,0)},totalAbonado(){return this.abonos.reduce((t,e)=>t+Number(e.monto),0)},saldoRestante(){return this.grandTotal-this.totalAbonado},formattedFolio(){return"F-"+this.folio.toString().padStart(4,"0")},formattedCreationDate(){return this.formatDate(this.creationDate)}},watch:{saldoRestante(t){this.isPaid=t<=0}},methods:{async deleteNote(){if(this.noteId){if(confirm("¿Estás seguro de que quieres eliminar esta nota?"))try{await Object(u["c"])(Object(u["d"])(c["a"],"notes",this.noteId)),alert("Nota eliminada con éxito"),this.$router.push({name:"NoteMenu"})}catch(t){console.error("Error al eliminar la nota: ",t),alert("Error al eliminar la nota: "+t.message)}}else alert("El ID de la nota no está definido")},async saveNote(){try{const t={folio:this.folio,client:this.client,currentDate:this.currentDate,products:this.products,abonos:this.abonos,isPaid:this.isPaid,creationDate:this.creationDate};if(this.noteId)await Object(u["k"])(Object(u["d"])(c["a"],"notes",this.noteId),t);else{const e=await Object(u["a"])(Object(u["b"])(c["a"],"notes"),t);this.noteId=e.id}alert("Nota guardada exitosamente."),this.$router.push({name:"NoteMenu"})}catch(t){console.error("Error saving note: ",t),alert("Hubo un error al guardar la nota.")}},async addProduct(){this.newProduct.total=this.newProduct.kilos*this.newProduct.pricePerKilo,this.products.push({...this.newProduct}),this.resetForm()},resetForm(){this.newProduct={product:"",kilos:null,pricePerKilo:null,total:0}},removeProduct(t){this.products.splice(t,1),this.showMobileActions=!1},editProductDetails(t){this.editIndex=t,this.editProduct={...this.products[t]}},confirmEdit(){-1!==this.editIndex&&(this.editProduct.total=this.editProduct.kilos*this.editProduct.pricePerKilo,this.products[this.editIndex]={...this.editProduct},this.editIndex=-1,this.showMobileActions=!1)},cancelEdit(){this.editIndex=-1},async fetchClients(){try{const t=await Object(u["f"])(Object(u["b"])(c["a"],"clients"));this.clients=t.docs.map(t=>({id:t.id,...t.data()}))}catch(t){console.error("Error fetching clients: ",t)}},async fetchNoteData(){try{const t=Object(u["d"])(c["a"],"notes",this.noteId),e=await Object(u["e"])(t);if(e.exists()){const t=e.data();this.folio=t.folio,this.client=t.client,this.currentDate=t.currentDate,this.products=t.products,this.abonos=t.abonos,this.isPaid=t.isPaid,this.creationDate=t.creationDate}else console.log("No such document!")}catch(t){console.error("Error fetching note: ",t)}},addAbono(){this.abonos.push({...this.newAbono}),this.resetAbonoForm()},resetAbonoForm(){this.newAbono={monto:null,fecha:(new Date).toISOString().substr(0,10)}},formatNumber(t){return t.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})},formatDate(t){const e={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString("es-ES",e)},exportPDF(){const t=this.$refs.printSection,e={margin:.5,filename:`Nota_de_Venta_${this.formattedFolio}_${(new Date).toLocaleDateString()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}},a=t.cloneNode(!0),o=a.querySelectorAll("button");o.forEach(t=>t.style.display="none");const n=a.querySelectorAll("td:nth-child(5), th:nth-child(5)");n.forEach(t=>t.style.display="none");const s=a.querySelector(".abonos-section form");s&&(s.style.display="none");const r=a.querySelector(".abonos-section h3:first-child");r&&(r.style.display="none"),l()().from(a).set(e).save()},printSection(){const t=this.$refs.printSection.cloneNode(!0),e=t.querySelectorAll("button");e.forEach(t=>t.style.display="none");const a=t.querySelectorAll("td:nth-child(5), th:nth-child(5)");a.forEach(t=>t.style.display="none");const o=t.querySelector(".abonos-section form");o&&(o.style.display="none");const n=t.querySelector(".abonos-section h3:first-child");n&&(n.style.display="none");const s=window.open("","","width=800,height=600");s.document.write("<html><head><title>Nota de Venta</title>"),s.document.write("</head><body >"),s.document.write(t.innerHTML),s.document.write("</body></html>"),s.document.close(),s.print()},startLongPress(t){this.longPressTimer=setTimeout(()=>{this.showMobileActions=!0,this.selectedProductIndex=t},500)},endLongPress(){clearTimeout(this.longPressTimer)},cancelMobileActions(){this.showMobileActions=!1,this.selectedProductIndex=null,this.editIndex=-1}},async mounted(){this.fetchClients(),this.$route.params.noteId&&(this.noteId=this.$route.params.noteId,await this.fetchNoteData())}},p=m,b=(a("7b89"),a("2877")),v=Object(b["a"])(p,o,n,!1,null,"4e6b6cbc",null);e["default"]=v.exports},"9a83":function(t,e,a){"use strict";a("14ae")},"9d77":function(t,e,a){},ab1b:function(t,e,a){},ad65:function(t,e,a){"use strict";a("33dc")},bff9:function(t,e,a){"use strict";a("426e")},d58b:function(t,e,a){},db6c:function(t,e,a){"use strict";a("1a20")},dc59:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var o=a("bc7b"),n=a("1494");const s={apiKey:"AIzaSyDEXrriJ15Gg2IyPYh56gNktfGaSsP6KeE",authDomain:"reypezapp-1ced2.firebaseapp.com",projectId:"reypezapp-1ced2",storageBucket:"reypezapp-1ced2.appspot.com",messagingSenderId:"512757841511",appId:"1:512757841511:web:d15e6a6276e84c42959ec2"},r=Object(o["a"])(s),i=Object(n["g"])(r)},e0fe:function(t,e,a){"use strict";a("5355")},e3b7:function(t,e,a){},e6b2:function(t,e,a){"use strict";a("1b56")},f90b:function(t,e,a){"use strict";a("0836")},ff02:function(t,e,a){},ff89:function(t,e,a){"use strict";a("ff02")}});
//# sourceMappingURL=app.9562d59a.js.map