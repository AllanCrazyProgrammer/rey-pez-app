(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app.4ba72edf"],{"03c4":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"precio-cliente-button-container"},[t("PreciosHistorialModal",{attrs:{clienteActual:e.clienteId}})],1)},r=[],o=i("666c"),s={name:"PreciosClienteButton",components:{PreciosHistorialModal:o["a"]},props:{clienteId:{type:String,required:!0}}},c=s,n=(i("f971"),i("2877")),l=Object(n["a"])(c,a,r,!1,null,"76dcdc36",null);t["a"]=l.exports},"0b8c":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return e.mostrar?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("h3",[e._v("Nuevo Cliente Temporal")]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"nombreCliente"}},[e._v("Nombre del Cliente:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nombreCliente,expression:"nombreCliente"}],staticClass:"input-field",attrs:{type:"text",id:"nombreCliente",placeholder:"Ingrese el nombre del cliente"},domProps:{value:e.nombreCliente},on:{input:function(t){t.target.composing||(e.nombreCliente=t.target.value)}}})]),t("div",{staticClass:"buttons-container"},[t("button",{staticClass:"btn-guardar",attrs:{disabled:!e.nombreCliente.trim()},on:{click:e.guardarCliente}},[e._v(" Guardar ")]),t("button",{staticClass:"btn-cancelar",on:{click:function(t){return e.$emit("cerrar")}}},[e._v(" Cancelar ")])])])]):e._e()},r=[],o={name:"NuevoClienteModal",props:{mostrar:{type:Boolean,required:!0}},data(){return{nombreCliente:""}},methods:{guardarCliente(){this.nombreCliente.trim()&&(this.$emit("guardar",{id:this.nombreCliente.toLowerCase().replace(/\s+/g,"-"),nombre:this.nombreCliente.trim()}),this.nombreCliente="")}}},s=o,c=(i("5617"),i("2877")),n=Object(c["a"])(s,a,r,!1,null,"ea897a92",null);t["a"]=n.exports},"0d65":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("BaseModal",{attrs:{mostrar:e.mostrar,titulo:"Nueva Medida",textoBotonConfirmar:"Siguiente"},on:{cerrar:function(t){return e.$emit("cerrar")},confirmar:e.guardarMedida}},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"medidaInput"}},[e._v("Nombre de la Medida:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.medidaLocal,expression:"medidaLocal"}],ref:"medidaInput",staticClass:"form-control",attrs:{type:"text",id:"medidaInput",placeholder:"Ej: 16/20, 21/25, 26/30, etc."},domProps:{value:e.medidaLocal},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.guardarMedida.apply(null,arguments)},input:function(t){t.target.composing||(e.medidaLocal=t.target.value)}}})]),t("div",{staticClass:"ejemplos-medidas"},[t("p",[t("strong",[e._v("Ejemplos:")])]),t("div",{staticClass:"ejemplos-lista"},[t("span",{staticClass:"ejemplo-tag",on:{click:function(t){return e.seleccionarEjemplo("16/20")}}},[e._v("16/20")]),t("span",{staticClass:"ejemplo-tag",on:{click:function(t){return e.seleccionarEjemplo("21/25")}}},[e._v("21/25")]),t("span",{staticClass:"ejemplo-tag",on:{click:function(t){return e.seleccionarEjemplo("26/30")}}},[e._v("26/30")]),t("span",{staticClass:"ejemplo-tag",on:{click:function(t){return e.seleccionarEjemplo("31/35")}}},[e._v("31/35")]),t("span",{staticClass:"ejemplo-tag",on:{click:function(t){return e.seleccionarEjemplo("36/40")}}},[e._v("36/40")]),t("span",{staticClass:"ejemplo-tag",on:{click:function(t){return e.seleccionarEjemplo("41/50")}}},[e._v("41/50")]),t("span",{staticClass:"ejemplo-tag",on:{click:function(t){return e.seleccionarEjemplo("51/60")}}},[e._v("51/60")]),t("span",{staticClass:"ejemplo-tag",on:{click:function(t){return e.seleccionarEjemplo("61/70")}}},[e._v("61/70")])])])])},r=[],o=i("ff7a"),s={name:"MedidaModal",components:{BaseModal:o["a"]},props:{mostrar:{type:Boolean,required:!0},medida:{type:String,default:""}},data(){return{medidaLocal:""}},watch:{mostrar(e){e&&(this.medidaLocal=this.medida,this.$nextTick(()=>{var e;null===(e=this.$refs.medidaInput)||void 0===e||e.focus()}))},medida(e){this.medidaLocal=e}},methods:{guardarMedida(){const e=this.medidaLocal.trim();e?this.$emit("guardar",e):alert("Por favor ingrese el nombre de la medida")},seleccionarEjemplo(e){var t;this.medidaLocal=e,null===(t=this.$refs.medidaInput)||void 0===t||t.focus()}}},c=s,n=(i("d66c"),i("2877")),l=Object(n["a"])(c,a,r,!1,null,"50e98fd6",null);t["a"]=l.exports},"2efd":function(e,t,i){},4786:function(e,t,i){"use strict";i("e1ab")},"4c80":function(e,t,i){},5617:function(e,t,i){"use strict";i("4c80")},6479:function(e,t,i){"use strict";i("986b")},"666c":function(e,t,i){"use strict";var a=function(){var e,t=this,i=t._self._c;return i("div",[i("button",{staticClass:"precio-historial-btn",on:{click:t.abrirModal}},[t._v(" "+t._s(t.clienteActual?"Precios de Venta - "+t.obtenerNombreCliente(t.clienteActual):"Precios de Venta")+" ")]),t.showModal?i("div",{staticClass:"modal-overlay"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h2",[t._v(t._s(t.clienteActual?"Precios de Venta - "+t.obtenerNombreCliente(t.clienteActual):"Precios de Venta"))]),i("button",{staticClass:"close-btn",on:{click:function(e){t.showModal=!1}}},[t._v("×")])]),i("div",{staticClass:"add-price-form"},[i("h3",[t._v("Agregar Nuevo Precio")]),i("div",{staticClass:"form-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newPrice.producto,expression:"newPrice.producto"}],attrs:{type:"text",placeholder:"Producto/Medida",list:"productos"},domProps:{value:t.newPrice.producto},on:{input:function(e){e.target.composing||t.$set(t.newPrice,"producto",e.target.value)}}}),i("datalist",{attrs:{id:"productos"}},t._l(t.preciosActuales,(function(e){return i("option",{key:e.id,domProps:{value:e.producto}})})),0),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newPrice.precio,expression:"newPrice.precio",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"Precio"},domProps:{value:t.newPrice.precio},on:{input:function(e){e.target.composing||t.$set(t.newPrice,"precio",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.newPrice.fecha,expression:"newPrice.fecha"}],attrs:{type:"date"},domProps:{value:t.newPrice.fecha},on:{input:function(e){e.target.composing||t.$set(t.newPrice,"fecha",e.target.value)}}}),i("div",{staticClass:"cliente-especifico"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newPrice.esClienteEspecifico,expression:"newPrice.esClienteEspecifico"}],attrs:{type:"checkbox",id:"clienteEspecifico"},domProps:{checked:Array.isArray(t.newPrice.esClienteEspecifico)?t._i(t.newPrice.esClienteEspecifico,null)>-1:t.newPrice.esClienteEspecifico},on:{change:function(e){var i=t.newPrice.esClienteEspecifico,a=e.target,r=!!a.checked;if(Array.isArray(i)){var o=null,s=t._i(i,o);a.checked?s<0&&t.$set(t.newPrice,"esClienteEspecifico",i.concat([o])):s>-1&&t.$set(t.newPrice,"esClienteEspecifico",i.slice(0,s).concat(i.slice(s+1)))}else t.$set(t.newPrice,"esClienteEspecifico",r)}}}),i("label",{attrs:{for:"clienteEspecifico"}},[t._v("Precio para cliente específico")])]),t.newPrice.esClienteEspecifico?i("div",{staticClass:"cliente-selector"},[i("label",[t._v("Seleccionar cliente:")]),i("div",{staticClass:"cliente-botones"},t._l(t.clientes,(function(e){return i("button",{key:e.id,staticClass:"cliente-btn",class:{"cliente-seleccionado":t.newPrice.clienteId===e.id},style:{backgroundColor:e.color},on:{click:function(i){return t.seleccionarCliente(e.id)}}},[t._v(" "+t._s(e.nombre)+" ")])})),0)]):t._e(),i("button",{staticClass:"add-btn",on:{click:t.agregarPrecio}},[t._v("Agregar")])])]),i("div",{staticClass:"filter-section"},[i("label",[t._v("Filtrar por cliente:")]),i("div",{staticClass:"cliente-filtro-botones"},[i("button",{staticClass:"cliente-filtro-btn",class:{"cliente-filtro-seleccionado":""===t.filtroCliente},on:{click:function(e){t.filtroCliente=""}}},[t._v(" Todos ")]),t._l(t.clientes,(function(e){return i("button",{key:e.id,staticClass:"cliente-filtro-btn",class:{"cliente-filtro-seleccionado":t.filtroCliente===e.id},style:{backgroundColor:e.color},on:{click:function(i){t.filtroCliente=e.id}}},[t._v(" "+t._s(e.nombre)+" ")])}))],2)]),i("div",{staticClass:"current-prices"},[i("h3",[t._v("Precios Actuales")]),t._l(t.categorias,(function(e){return i("div",{key:e,staticClass:"categoria-section"},[i("h4",{staticClass:"categoria-title"},[t._v(t._s(e))]),i("div",{staticClass:"products-grid"},t._l(t.filtrarPreciosPorCliente(t.preciosOrdenados[e]),(function(e){return i("div",{key:e.id,staticClass:"product-card",class:{"precio-especifico":e.clienteId},style:e.clienteId?{borderColor:t.obtenerColorCliente(e.clienteId),backgroundColor:t.obtenerColorClienteConOpacidad(e.clienteId)}:{}},[i("h4",[t._v(t._s(e.producto))]),i("p",{staticClass:"price"},[t._v("$"+t._s(t.formatNumber(e.precio)))]),i("p",{staticClass:"date"},[t._v("Desde: "+t._s(t.formatDate(e.fecha)))]),e.clienteId?i("p",{staticClass:"cliente-especifico-tag",style:{backgroundColor:t.obtenerColorCliente(e.clienteId)}},[t._v(" Cliente: "+t._s(t.obtenerNombreCliente(e.clienteId))+" ")]):t._e(),i("p",{staticClass:"historial-count"},[t._v(" "+t._s(e.historial.length)+" precio"+t._s(1!==e.historial.length?"s":"")+" registrado"+t._s(1!==e.historial.length?"s":"")+" ")]),i("button",{staticClass:"history-btn",on:{click:function(i){return t.mostrarHistorial(e)}}},[t._v(" Ver Historial ")])])})),0)])}))],2),t.showHistorialModal?i("div",{staticClass:"historial-modal"},[i("div",{staticClass:"historial-content"},[i("div",{staticClass:"historial-header"},[i("h3",[t._v("Historial de Precios - "+t._s(null===(e=t.productoSeleccionado)||void 0===e?void 0:e.producto))]),i("button",{staticClass:"close-btn",on:{click:function(e){t.showHistorialModal=!1}}},[t._v("×")])]),i("table",[t._m(0),i("tbody",t._l(t.historialPaginado,(function(e,a){return i("tr",{key:a},[i("td",[t._v(t._s(t.formatDate(e.fecha)))]),i("td",[t._v("$"+t._s(t.formatNumber(e.precio)))]),i("td",[e.clienteId?i("span",{staticClass:"cliente-especifico-tag",style:{backgroundColor:t.obtenerColorCliente(e.clienteId)}},[t._v(" "+t._s(t.obtenerNombreCliente(e.clienteId))+" ")]):i("span",[t._v("General")])]),i("td",[t.calcularIndiceGlobal(a)<t.historialPrecios.length-1?i("span",{class:{"precio-subio":e.precio<t.historialPrecios[t.calcularIndiceGlobal(a)+1].precio,"precio-bajo":e.precio>t.historialPrecios[t.calcularIndiceGlobal(a)+1].precio}},[t._v(" "+t._s(t.calcularCambio(e.precio,t.historialPrecios[t.calcularIndiceGlobal(a)+1].precio))+" ")]):t._e()]),i("td",{staticClass:"actions-cell"},[i("button",{staticClass:"delete-btn",attrs:{title:"Eliminar precio"},on:{click:function(i){return t.eliminarPrecio(e)}}},[i("span",{staticClass:"delete-icon"},[t._v("×")])])])])})),0)]),t.historialPrecios.length>0?i("div",{staticClass:"pagination-info"},[i("span",[t._v("Mostrando "+t._s(t.infoPaginacion.inicio)+"-"+t._s(t.infoPaginacion.fin)+" de "+t._s(t.infoPaginacion.total)+" registros")]),i("div",{staticClass:"items-per-page"},[i("label",[t._v("Registros por página:")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.itemsPorPagina,expression:"itemsPorPagina"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));t.itemsPorPagina=e.target.multiple?i:i[0]},function(e){t.paginaActual=1}]}},[i("option",{domProps:{value:5}},[t._v("5")]),i("option",{domProps:{value:10}},[t._v("10")]),i("option",{domProps:{value:20}},[t._v("20")]),i("option",{domProps:{value:50}},[t._v("50")])])])]):t._e(),t.totalPaginas>1?i("div",{staticClass:"pagination-controls"},[i("button",{staticClass:"pagination-btn",attrs:{disabled:1===t.paginaActual},on:{click:function(e){t.paginaActual=1}}},[t._v(" « ")]),i("button",{staticClass:"pagination-btn",attrs:{disabled:1===t.paginaActual},on:{click:function(e){t.paginaActual--}}},[t._v(" ‹ ")]),i("div",{staticClass:"pagination-numbers"},t._l(t.numerosVisibles,(function(e){return i("button",{key:e,staticClass:"pagination-number",class:{"pagination-btn":!0,active:e===t.paginaActual},on:{click:function(i){t.paginaActual=e}}},[t._v(" "+t._s(e)+" ")])})),0),i("button",{staticClass:"pagination-btn",attrs:{disabled:t.paginaActual===t.totalPaginas},on:{click:function(e){t.paginaActual++}}},[t._v(" › ")]),i("button",{staticClass:"pagination-btn",attrs:{disabled:t.paginaActual===t.totalPaginas},on:{click:function(e){t.paginaActual=t.totalPaginas}}},[t._v(" » ")])]):t._e()])]):t._e()])]):t._e()])},r=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Fecha")]),t("th",[e._v("Precio")]),t("th",[e._v("Cliente")]),t("th",[e._v("Cambio")]),t("th",[e._v("Acciones")])])])}],o=(i("14d9"),i("dc59")),s=i("1494"),c={name:"PreciosHistorialModal",props:{clienteActual:{type:String,default:""}},data(){return{showModal:!1,showHistorialModal:!1,preciosActuales:[],historialPrecios:[],productoSeleccionado:null,paginaActual:1,itemsPorPagina:10,categorias:["Camarón S/C","Camarón C/C","Otros"],clientes:[{id:"joselito",nombre:"Joselito",color:"#2196F3"},{id:"catarro",nombre:"Catarro",color:"#d32f2f"},{id:"otilio",nombre:"Otilio",color:"#FFD700"},{id:"ozuna",nombre:"Ozuna",color:"#07711e"}],filtroCliente:"",newPrice:{producto:"",precio:null,fecha:(new Date).toISOString().split("T")[0],categoria:"Otros",esClienteEspecifico:!1,clienteId:""}}},computed:{currentDate(){return(new Date).toISOString().split("T")[0]},totalPaginas(){return Math.ceil(this.historialPrecios.length/this.itemsPorPagina)},historialPaginado(){const e=(this.paginaActual-1)*this.itemsPorPagina,t=e+this.itemsPorPagina;return this.historialPrecios.slice(e,t)},infoPaginacion(){const e=(this.paginaActual-1)*this.itemsPorPagina+1,t=Math.min(this.paginaActual*this.itemsPorPagina,this.historialPrecios.length);return{inicio:e,fin:t,total:this.historialPrecios.length}},numerosVisibles(){const e=5,t=this.totalPaginas,i=this.paginaActual;if(t<=e)return Array.from({length:t},(e,t)=>t+1);let a=Math.max(1,i-Math.floor(e/2)),r=Math.min(t,a+e-1);return r-a+1<e&&(a=Math.max(1,r-e+1)),Array.from({length:r-a+1},(e,t)=>a+t)},preciosOrdenados(){const e={};return this.categorias.forEach(t=>{e[t]=[]}),this.preciosActuales.forEach(t=>{const i=t.producto.toLowerCase();i.includes("s/c")||i.match(/\d+\/\d+/)?e["Camarón S/C"].push(t):i.includes("c/c")?e["Camarón C/C"].push(t):e["Otros"].push(t)}),Object.keys(e).forEach(t=>{e[t].sort((e,t)=>{const i=e=>{const t=e.match(/(\d+)\/(\d+)/);return t?[parseInt(t[1]),parseInt(t[2])]:[0,0]},a=i(e.producto),r=i(t.producto);return a[0]&&r[0]?a[0]-r[0]:e.producto.localeCompare(t.producto)})}),e}},methods:{formatNumber(e){return(null===e||void 0===e?void 0:e.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"},formatDate(e){if(!e)return"";const t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString("es-ES",t)},calcularCambio(e,t){const i=e-t,a=i/t*100,r=i>0?"+":"";return`${r}${this.formatNumber(i)} (${r}${a.toFixed(1)}%)`},calcularIndiceGlobal(e){return(this.paginaActual-1)*this.itemsPorPagina+e},async cargarPreciosActuales(){try{const e=Object(s["c"])(o["a"],"precios"),t=Object(s["o"])(e,Object(s["l"])("fecha","desc")),i=await Object(s["g"])(t),a=new Map;i.docs.forEach(e=>{const t={id:e.id,...e.data()},i=t.clienteId?`${t.producto}-${t.clienteId}`:t.producto;a.has(i)||a.set(i,{producto:t.producto,precioActual:t.precio,fechaActual:t.fecha,clienteId:t.clienteId||null,historial:[]}),a.get(i).historial.push({id:e.id,fecha:t.fecha,precio:t.precio,clienteId:t.clienteId||null})}),this.preciosActuales=Array.from(a.values()).map(e=>({id:e.historial[0].id,producto:e.producto,precio:e.precioActual,fecha:e.fechaActual,clienteId:e.clienteId,historial:e.historial}))}catch(e){console.error("Error al cargar precios:",e)}},obtenerNombreCliente(e){const t=this.clientes.find(t=>t.id===e);return t?t.nombre:"Cliente desconocido"},obtenerColorCliente(e){const t=this.clientes.find(t=>t.id===e);return t?t.color:"#2196F3"},obtenerColorClienteConOpacidad(e){const t=this.clientes.find(t=>t.id===e);if(!t)return"rgba(33, 150, 243, 0.1)";let i=t.color.replace("#",""),a=parseInt(i.substring(0,2),16),r=parseInt(i.substring(2,4),16),o=parseInt(i.substring(4,6),16);return`rgba(${a}, ${r}, ${o}, 0.15)`},seleccionarCliente(e){this.newPrice.clienteId=e},filtrarPreciosPorCliente(e){if(this.filtroCliente){const t=e.filter(e=>e.clienteId===this.filtroCliente),i=e.filter(e=>!e.clienteId),a={};t.forEach(e=>{a[e.producto]=!0});const r=i.filter(e=>!a[e.producto]);return[...t,...r]}return e.filter(e=>!e.clienteId)},async agregarPrecio(){if(this.newPrice.producto&&this.newPrice.precio&&this.newPrice.fecha)if(!this.newPrice.esClienteEspecifico||this.newPrice.clienteId)try{const e=new Date(this.newPrice.fecha);e.setDate(e.getDate()+1);const t=e.toISOString().split("T")[0],i=this.newPrice.producto.toLowerCase();let a="Otros";i.includes("s/c")||i.match(/\d+\/\d+/)?a="Camarón S/C":i.includes("c/c")&&(a="Camarón C/C");const r={producto:this.newPrice.producto,precio:this.newPrice.precio,fecha:t,categoria:a};this.newPrice.esClienteEspecifico&&this.newPrice.clienteId&&(r.clienteId=this.newPrice.clienteId),await Object(s["b"])(Object(s["c"])(o["a"],"precios"),r),this.newPrice={producto:"",precio:null,fecha:(new Date).toISOString().split("T")[0],categoria:"Otros",esClienteEspecifico:!1,clienteId:""},await this.cargarPreciosActuales()}catch(e){console.error("Error al agregar precio:",e),alert("Error al guardar el precio")}else alert("Por favor seleccione un cliente");else alert("Por favor complete todos los campos")},async eliminarPrecio(e){if(confirm("¿Estás seguro de que deseas eliminar este precio?"))try{if(await Object(s["d"])(Object(s["e"])(o["a"],"precios",e.id)),await this.cargarPreciosActuales(),this.productoSeleccionado){const e=this.preciosActuales.find(e=>e.producto===this.productoSeleccionado.producto);e?this.historialPrecios=e.historial:this.showHistorialModal=!1}}catch(t){console.error("Error al eliminar precio:",t),alert("Error al eliminar el precio")}},async mostrarHistorial(e){try{this.productoSeleccionado=e,this.historialPrecios=e.historial,this.paginaActual=1,this.showHistorialModal=!0}catch(t){console.error("Error al cargar historial:",t),alert("Error al cargar el historial de precios")}},abrirModal(){this.clienteActual&&this.clientes.some(e=>e.id===this.clienteActual)&&(this.filtroCliente=this.clienteActual,this.newPrice.esClienteEspecifico=!0,this.newPrice.clienteId=this.clienteActual),this.showModal=!0}},watch:{clienteActual:{immediate:!0,handler(e){e&&this.clientes.some(t=>t.id===e)&&(this.filtroCliente=e,e&&(this.newPrice.esClienteEspecifico=!0,this.newPrice.clienteId=e))}}},mounted(){this.cargarPreciosActuales()}},n=c,l=(i("6479"),i("2877")),d=Object(l["a"])(n,a,r,!1,null,"5c2b1c2a",null);t["a"]=d.exports},"6bfe":function(e,t,i){},"73bd":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",[t("button",{staticClass:"medidas-btn",on:{click:function(t){e.showModal=!0}}},[t("i",{staticClass:"fas fa-ruler"}),e._v(" Medidas ")]),e.showModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h2",[e._v("Gestión de Medidas")]),t("button",{staticClass:"close-btn",on:{click:e.cerrarModal}},[e._v("×")])]),t("div",{staticClass:"add-medida-form"},[t("h3",[e._v("Agregar Nueva Medida")]),t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMedida.nombre,expression:"newMedida.nombre"}],staticClass:"medida-input",attrs:{type:"text",placeholder:"Nombre de la medida"},domProps:{value:e.newMedida.nombre},on:{input:function(t){t.target.composing||e.$set(e.newMedida,"nombre",t.target.value)}}}),t("button",{staticClass:"add-btn",on:{click:e.agregarMedida}},[e._v("Agregar")])])]),t("div",{staticClass:"medidas-list"},[t("div",{staticClass:"medidas-grid"},e._l(e.medidasOrdenadas,(function(i){return t("div",{key:i.id,staticClass:"medida-card"},[t("span",{staticClass:"medida-nombre"},[e._v(e._s(i.nombre))]),t("button",{staticClass:"delete-btn",attrs:{title:"Eliminar medida"},on:{click:function(t){return e.eliminarMedida(i.id)}}},[e._v(" × ")])])})),0)]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"cancel-btn",on:{click:e.cerrarModal}},[e._v("Cerrar")])])])]):e._e()])},r=[],o=(i("14d9"),i("dc59")),s=i("1494"),c={name:"MedidasModal",data(){return{showModal:!1,medidas:[],newMedida:{tipo:"granja",nombre:""}}},computed:{medidasOrdenadas(){const e=this.medidas.filter(e=>"especial"===e.tipo),t=this.medidas.filter(e=>"granja"===e.tipo);return e.sort((e,t)=>e.nombre.localeCompare(t.nombre)),t.sort((e,t)=>{const i=parseInt(e.nombre.split("/")[0]),a=parseInt(t.nombre.split("/")[0]);return i-a}),[...e,...t]}},methods:{async cargarMedidas(){try{const e=Object(s["c"])(o["a"],"medidas"),t=Object(s["o"])(e,Object(s["l"])("nombre")),i=await Object(s["g"])(t);this.medidas=i.docs.map(e=>({id:e.id,...e.data()}))}catch(e){console.error("Error al cargar medidas:",e),alert("Error al cargar las medidas")}},async agregarMedida(){if(this.newMedida.nombre)try{const e=await Object(s["b"])(Object(s["c"])(o["a"],"medidas"),{tipo:this.newMedida.tipo,nombre:this.newMedida.nombre});this.medidas.push({id:e.id,tipo:this.newMedida.tipo,nombre:this.newMedida.nombre}),this.newMedida.nombre=""}catch(e){console.error("Error al agregar medida:",e),alert("Error al guardar la medida")}else alert("Por favor ingrese el nombre de la medida")},async eliminarMedida(e){if(confirm("¿Estás seguro de que deseas eliminar esta medida?"))try{await Object(s["d"])(Object(s["e"])(o["a"],"medidas",e)),this.medidas=this.medidas.filter(t=>t.id!==e)}catch(t){console.error("Error al eliminar medida:",t),alert("Error al eliminar la medida")}},cerrarModal(){this.showModal=!1,this.$emit("medidas-actualizadas",this.medidas)}},mounted(){this.cargarMedidas()}},n=c,l=(i("4786"),i("2877")),d=Object(l["a"])(n,a,r,!1,null,"60908f5b",null);t["a"]=d.exports},9362:function(e,t,i){},"986b":function(e,t,i){},d1d7:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return e.mostrar?t("div",{staticClass:"modal-overlay",on:{click:function(t){return t.target!==t.currentTarget?null:e.cerrarModal.apply(null,arguments)}}},[t("div",{staticClass:"modal-content"},[t("h3",[e._v("Proveedor")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.proveedorLocal,expression:"proveedorLocal"}],staticClass:"input-proveedor",attrs:{type:"text",placeholder:"Nombre del proveedor"},domProps:{value:e.proveedorLocal},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.guardarProveedor.apply(null,arguments)},input:function(t){t.target.composing||(e.proveedorLocal=t.target.value)}}}),t("div",{staticClass:"modal-buttons"},[t("button",{staticClass:"btn-guardar",on:{click:e.guardarProveedor}},[e._v("Guardar")]),t("button",{staticClass:"btn-cancelar",on:{click:e.cerrarModal}},[e._v("Cancelar")])])])]):e._e()},r=[],o={name:"ProveedorModal",props:{mostrar:{type:Boolean,required:!0},proveedor:{type:String,default:""}},data(){return{proveedorLocal:this.proveedor}},watch:{mostrar(e){e&&(this.proveedorLocal=this.proveedor)}},methods:{cerrarModal(){this.$emit("cerrar")},guardarProveedor(){this.$emit("guardar",this.proveedorLocal),this.cerrarModal()}}},s=o,c=(i("fbdc"),i("2877")),n=Object(c["a"])(s,a,r,!1,null,"69665719",null);t["a"]=n.exports},d66c:function(e,t,i){"use strict";i("9362")},e1ab:function(e,t,i){},f971:function(e,t,i){"use strict";i("6bfe")},fbdc:function(e,t,i){"use strict";i("2efd")}}]);