(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app.193e24cd"],{"4c57":function(e,a,t){"use strict";t("13d5");var o=function(){var e=this,a=e._self._c;return a("div",{staticClass:"existencias-page"},[a("div",{staticClass:"existencias-container"},[a("div",{staticClass:"header"},[a("h1",[e._v("Reporte de Existencias")]),a("button",{staticClass:"print-button",on:{click:e.imprimirReporte}},[e._v(" Imprimir Reporte ")])]),a("div",{staticClass:"filters"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"search-input",attrs:{placeholder:"Buscar por proveedor o medida"},domProps:{value:e.search},on:{input:function(a){a.target.composing||(e.search=a.target.value)}}})]),a("div",{staticClass:"existencias-grid"},e._l(e.filteredExistencias,(function(t,o){return a("div",{key:o,staticClass:"medida-card",class:{"maquila-card":"Ozuna"===o||"Joselito"===o}},["Ozuna"===o||"Joselito"===o?[a("h2",[e._v(" "+e._s(o)+" (Maquila) "),e.tienePrecio&&t.precioPromedio?a("span",{staticClass:"precio-promedio"},[e._v(" - Promedio: $"+e._s(t.precioPromedio.toFixed(2))+" ")]):e._e()]),a("table",{staticClass:"medida-table"},[a("thead",[a("tr",[a("th",[e._v("Medida")]),e.tienePrecio?a("th",[e._v("Precio")]):e._e(),a("th",{staticClass:"kilos-cell"},[e._v("Kilos")])])]),a("tbody",[e._l(t.items,(function(t,o){return t.kilos>0?a("tr",{key:o},[a("td",[e._v(" "+e._s(t.medida)+" "),t.fechaEntrada?a("span",{staticClass:"fecha-entrada"},[e._v(" ("+e._s(e.formatFecha(t.fechaEntrada))+") ")]):e._e()]),e.tienePrecio?a("td",{staticClass:"precio-cell"},[e._v(e._s(t.precio?"$"+t.precio:"-"))]):e._e(),a("td",{staticClass:"kilos-cell"},[e._v(e._s(e.formatNumber(t.kilos)))])]):e._e()})),a("tr",{staticClass:"total-row"},[a("td",[a("strong",[e._v("Total "+e._s(o))])]),e.tienePrecio?a("td"):e._e(),a("td",{staticClass:"kilos-cell"},[a("strong",[e._v(e._s(e.formatNumber(Object.values(t.items).reduce((e,a)=>e+a.kilos,0))))])])])],2)])]:[a("h2",[e._v(" "+e._s(o)+" "),"51/60"===o&&e.promedioCombinado516141?a("div",{staticClass:"promedio-combinado"},[e._v(" Promedio 51,61 y 41 (Selecta): $"+e._s(e.promedioCombinado516141.toFixed(2))+" ")]):e._e(),e.tienePrecio&&t.precioPromedioGeneral?a("span",{staticClass:"precio-promedio"},[e._v(" - Promedio General: $"+e._s(t.precioPromedioGeneral.toFixed(2))+" ")]):e._e()]),e._l(t.proveedores,(function(t,o){return a("div",{key:o,staticClass:"proveedor-section"},[a("h3",{staticClass:"proveedor-header"},[e._v(" "+e._s(o)+" "),e.tienePrecio&&t.precioPromedio?a("span",{staticClass:"precio-promedio-proveedor"},[e._v(" - Promedio: $"+e._s(t.precioPromedio.toFixed(2))+" ")]):e._e()]),a("table",{staticClass:"medida-table"},[a("thead",[a("tr",[a("th",[e._v("Medida")]),e.tienePrecio?a("th",[e._v("Precio")]):e._e(),a("th",{staticClass:"kilos-cell"},[e._v("Kilos")])])]),a("tbody",[e._l(t.items,(function(t){return t.kilos>0?a("tr",{key:`${t.medida}-${t.proveedor}-${t.precio||"sin-precio"}`},[a("td",[e._v(" "+e._s(t.medida)+" "),t.fechaEntrada?a("span",{staticClass:"fecha-entrada"},[e._v(" ("+e._s(e.formatFecha(t.fechaEntrada))+") ")]):e._e()]),e.tienePrecio?a("td",{staticClass:"precio-cell"},[e._v(e._s(t.precio?"$"+t.precio:"-"))]):e._e(),a("td",{staticClass:"kilos-cell"},[e._v(e._s(e.formatNumber(t.kilos)))])]):e._e()})),a("tr",{staticClass:"subtotal-row"},[a("td",[a("strong",[e._v("Total "+e._s(o))])]),e.tienePrecio?a("td"):e._e(),a("td",{staticClass:"kilos-cell"},[a("strong",[e._v(e._s(e.formatNumber(t.items.reduce((e,a)=>e+a.kilos,0))))])])])],2)])])})),a("div",{staticClass:"total-medida"},[a("div",{staticClass:"total-medida-kilos"},[a("strong",[e._v("Total "+e._s(o)+": "+e._s(e.formatNumber(Object.values(t.proveedores).reduce((e,a)=>e+a.items.reduce((e,a)=>e+a.kilos,0),0)))+" kg")])]),e.tienePrecio&&Object.values(t.proveedores).some(e=>e.items.some(e=>e.precio))?a("div",{staticClass:"total-medida-valor"},[a("strong",[e._v("Valor Total: $"+e._s(e.formatNumber(Object.values(t.proveedores).reduce((e,a)=>e+a.items.reduce((e,a)=>a.precio?e+a.precio*a.kilos:e,0),0))))])]):e._e()])],("Ozuna"===o||"Joselito"===o)&&e.tienePrecio&&Object.values(t.items).some(e=>e.precio)?a("div",{staticClass:"total-maquila-valor"},[a("strong",[e._v("Valor Total: $"+e._s(e.formatNumber(Object.values(t.items).reduce((e,a)=>a.precio?e+a.precio*a.kilos:e,0))))])]):e._e()],2)})),0),e.tienePrecio?a("div",{staticClass:"valor-total"},[a("h2",[e._v("Valor Total: $"+e._s(e.formatNumber(e.valorTotal)))])]):e._e(),e.tienePrecio?a("div",{staticClass:"saldo-pendiente-deudas"},[a("h2",[e._v("Saldo Pendiente Deudas: $"+e._s(e.formatNumber(e.saldoPendienteDeudas)))])]):e._e(),e.tienePrecio?a("div",{staticClass:"valor-libre"},[a("h2",[e._v("Valor Libre: $"+e._s(e.formatNumber(e.valorLibre)))])]):e._e(),a("div",{staticClass:"total-general"},[a("h2",[e._v("Kilos Totales: "+e._s(e.formatNumber(e.totalGeneral)))])]),e.salidasDiaSiguiente.length>0?a("div",{staticClass:"salidas-dia-siguiente"},[a("h2",[e._v("Apartado para Mañana ("+e._s(e.fechaDiaSiguiente)+")")]),a("div",{staticClass:"salidas-grid"},[e.salidasProveedoresDiaSiguiente.length>0?a("div",{staticClass:"salidas-proveedores"},[a("h3",[e._v("Clientes")]),a("table",{staticClass:"salidas-table"},[a("thead",[a("tr",[a("th",[e._v("Proveedor")]),a("th",[e._v("Medida")]),e.tienePrecio?a("th",[e._v("Precio")]):e._e(),a("th",{staticClass:"kilos-cell"},[e._v("Kilos")])])]),a("tbody",e._l(e.salidasProveedoresDiaSiguiente,(function(t){return a("tr",{key:`${t.proveedor}-${t.medida}-${t.precio||"sin-precio"}`},[a("td",[e._v(e._s(t.proveedor))]),a("td",[e._v(e._s(t.medida))]),e.tienePrecio?a("td",{staticClass:"precio-cell"},[e._v(e._s(t.precio?"$"+t.precio:"-"))]):e._e(),a("td",{staticClass:"kilos-cell"},[e._v(e._s(e.formatNumber(t.kilos)))])])})),0)])]):e._e(),e.salidasMaquilasDiaSiguiente.length>0?a("div",{staticClass:"salidas-maquilas"},[a("h3",[e._v("Maquilas")]),a("table",{staticClass:"salidas-table"},[a("thead",[a("tr",[a("th",[e._v("Maquila")]),a("th",[e._v("Medida")]),e.tienePrecio?a("th",[e._v("Precio")]):e._e(),a("th",{staticClass:"kilos-cell"},[e._v("Kilos")])])]),a("tbody",e._l(e.salidasMaquilasDiaSiguiente,(function(t){return a("tr",{key:`${t.proveedor}-${t.medida}-${t.precio||"sin-precio"}`},[a("td",[e._v(e._s(t.proveedor))]),a("td",[e._v(e._s(t.medida))]),e.tienePrecio?a("td",{staticClass:"precio-cell"},[e._v(e._s(t.precio?"$"+t.precio:"-"))]):e._e(),a("td",{staticClass:"kilos-cell"},[e._v(e._s(e.formatNumber(t.kilos)))])])})),0)])]):e._e()]),a("div",{staticClass:"total-salidas-siguiente"},[a("h3",[e._v("Total Apartado: "+e._s(e.formatNumber(e.totalSalidasDiaSiguiente))+" kg")])])]):e._e(),a("div",{staticClass:"total-general"},[a("h2",[e._v("Kilos Totales: "+e._s(e.formatNumber(e.totalGeneral)))])])])])},n=[],i=(t("14d9"),t("2b0e")),r=t("dc59"),s=t("1494"),d=t("c1df"),l=t.n(d),c={name:"Existencias",setup(){const e=Object(i["ref"])({}),a=Object(i["ref"])(""),t=Object(i["ref"])(!1),o=Object(i["ref"])([]),n=Object(i["ref"])([]),d=async()=>{const a=await Object(s["g"])(Object(s["c"])(r["a"],"sacadas")),o={};let n=!1;console.log("=== Rastreando Selecta 51/60 1ra Nacional ===");let i=0;const d=a.docs.map(e=>({id:e.id,...e.data()})).sort((e,a)=>{const t=e.fecha instanceof Date?e.fecha:e.fecha.toDate(),o=a.fecha instanceof Date?a.fecha:a.fecha.toDate();return t-o});d.forEach(e=>{const a=e.fecha instanceof Date?e.fecha:e.fecha.toDate(),t=l()(a);e.entradas.forEach(e=>{const r=null!==e.precio&&void 0!==e.precio;r&&(n=!0),"Selecta"===e.proveedor&&"51/60 1ra Nacional"===e.medida&&(i+=e.kilos,console.log(`Entrada: ${e.kilos} kg - Fecha: ${t.format("DD/MM/YYYY")} - Precio: ${e.precio||"N/A"}`)),o[e.proveedor]||(o[e.proveedor]={});const s=r?e.precio:null,d=null!==s?`${e.medida}_$${s}`:e.medida;o[e.proveedor][d]||(o[e.proveedor][d]={medida:e.medida,precio:s,lotes:[]});const l=o[e.proveedor][d];l.lotes.push({kilos:e.kilos,fechaEntrada:a}),l.kilos=(l.kilos||0)+e.kilos}),e.salidas.forEach(e=>{const a=null!==e.precio&&void 0!==e.precio;"Selecta"===e.proveedor&&"51/60 1ra Nacional"===e.medida&&(i-=e.kilos,console.log(`Salida: ${e.kilos} kg - Fecha: ${t.format("DD/MM/YYYY")} - Precio: ${e.precio||"N/A"}`)),o[e.proveedor]||(o[e.proveedor]={});const n=a?e.precio:null,r=null!==n?`${e.medida}_$${n}`:e.medida;o[e.proveedor][r]||(o[e.proveedor][r]={medida:e.medida,precio:n,lotes:[]});const s=o[e.proveedor][r];let d=e.kilos;for(let t=0;t<s.lotes.length&&d>0;t+=1){const e=s.lotes[t];e.kilos>=d?(e.kilos-=d,d=0):(d-=e.kilos,e.kilos=0)}s.lotes=s.lotes.filter(e=>e.kilos>0),s.kilos=s.lotes.reduce((e,a)=>e+a.kilos,0),d>0&&console.warn("[Existencias] Salida sin suficientes lotes registrados",{proveedor:e.proveedor,medida:e.medida,precio:n,kilosPendientes:d})})}),console.log(`=== Total final Selecta 51/60 1ra Nacional: ${i} kg ===`),Object.keys(o).forEach(e=>{Object.entries(o[e]).forEach(([a,t])=>{t.lotes||(t.lotes=[]),t.lotes=t.lotes.filter(e=>e.kilos>0),t.kilos=t.lotes.reduce((e,a)=>e+a.kilos,0),t.kilos<=0&&delete o[e][a]}),0===Object.keys(o[e]).length&&delete o[e]}),e.value=o,t.value=n},c=async()=>{try{const e=await Object(s["g"])(Object(s["o"])(Object(s["c"])(r["a"],"deudas"),Object(s["l"])("fecha","desc")));o.value=e.docs.map(e=>({id:e.id,...e.data()}))}catch(e){console.error("Error al cargar deudas: ",e)}},p=async()=>{try{const e=l()(),a=e.clone().add(1,"day"),t=a.startOf("day").toDate(),o=a.endOf("day").toDate(),i=await Object(s["g"])(Object(s["o"])(Object(s["c"])(r["a"],"sacadas"),Object(s["t"])("fecha",">=",t),Object(s["t"])("fecha","<=",o))),d=[];i.docs.forEach(e=>{const a=e.data();a.salidas&&a.salidas.length>0&&a.salidas.forEach(e=>{d.push({...e,fecha:a.fecha.toDate()})})});const c=d.reduce((e,a)=>{const t=`${a.proveedor}-${a.medida}${a.precio?"-$"+a.precio:""}`;return e[t]||(e[t]={proveedor:a.proveedor,medida:a.medida,precio:a.precio,kilos:0,tipo:a.tipo||"proveedor"}),e[t].kilos+=a.kilos,e},{});n.value=Object.values(c).filter(e=>e.kilos>0).sort((e,a)=>e.tipo!==a.tipo?"proveedor"===e.tipo?-1:1:e.proveedor!==a.proveedor?e.proveedor.localeCompare(a.proveedor):e.medida.localeCompare(a.medida))}catch(e){console.error("Error al cargar salidas del día siguiente: ",e)}},u=e=>{if(!Array.isArray(e))return null;const a=e.filter(e=>e.precio&&e.precio>0);if(0===a.length)return null;const t=a.reduce((e,a)=>e+a.precio*a.kilos,0),o=a.reduce((e,a)=>e+a.kilos,0);return o>0?t/o:null},m=e=>{const a=Object.values(e).filter(e=>e.precio&&e.precio>0);if(0===a.length)return null;const t=a.reduce((e,a)=>e+a.precio*a.kilos,0),o=a.reduce((e,a)=>e+a.kilos,0);return o>0?t/o:null},v=Object(i["computed"])(()=>{if(!t.value)return null;const a=["51/60","61/70","41/50"];let o=0,n=0;return Object.entries(e.value).forEach(([e,t])=>{"Selecta"===e&&Object.entries(t).forEach(([e,t])=>{const i=t.medida.split(" ")[0];a.includes(i)&&t.kilos>0&&t.precio&&t.precio>0&&(o+=t.precio*t.kilos,n+=t.kilos)})}),n>0?o/n:null}),h=Object(i["computed"])(()=>{const t=a.value.toLowerCase(),o={},n={};Object.entries(e.value).forEach(([e,a])=>{"Ozuna"!==e&&"Joselito"!==e&&(n[e]=a)});const i=a=>{if(!e.value[a])return;const t=Object.entries(e.value[a]).flatMap(([e,a])=>{const t=Array.isArray(a.lotes)&&a.lotes.length>0?a.lotes:[{kilos:a.kilos||0,fechaEntrada:a.fechaEntrada}];return t.filter(e=>e.kilos>1).map((t,o)=>{const n=`${e}__${o}`;return[n,{medida:a.medida,precio:a.precio,kilos:t.kilos,fechaEntrada:t.fechaEntrada}]})}).sort(([e,a],[t,o])=>{if(a.fechaEntrada&&o.fechaEntrada){const e=a.fechaEntrada instanceof Date?a.fechaEntrada:a.fechaEntrada.toDate(),t=o.fechaEntrada instanceof Date?o.fechaEntrada:o.fechaEntrada.toDate();return e-t}const n=parseInt(a.medida.split("/")[0]),i=parseInt(o.medida.split("/")[0]);return n-i}).reduce((e,[a,t])=>(e[a]=t,e),{});Object.keys(t).length>0&&(o[a]=t)};i("Ozuna"),i("Joselito");const r={};Object.entries(n).forEach(([e,a])=>{Object.entries(a).forEach(([a,t])=>{const o=Array.isArray(t.lotes)&&t.lotes.length>0?t.lotes:[{kilos:t.kilos||0,fechaEntrada:t.fechaEntrada}],n=o.filter(e=>e.kilos>1);if(0===n.length)return;const i=t.medida.split(" ")[0];r[i]||(r[i]={}),r[i][e]||(r[i][e]=[]),n.forEach(a=>{r[i][e].push({proveedor:e,medida:t.medida,precio:t.precio,kilos:a.kilos,fechaEntrada:a.fechaEntrada})})})});const s={};return Object.entries(r).sort(([e],[a])=>{const t=parseInt(e.split("/")[0]),o=parseInt(a.split("/")[0]);return t-o}).forEach(([e,a])=>{const o=Object.values(a).some(e=>e.some(e=>e.kilos>1));if(o&&(!t||e.toLowerCase().includes(t)||Object.entries(a).some(([e,a])=>e.toLowerCase().includes(t)||a.some(e=>e.medida.toLowerCase().includes(t))))){const t={};Object.entries(a).forEach(([e,a])=>{const o=a.filter(e=>e.kilos>1);if(o.length>0){const a=o.sort((e,a)=>{if(e.fechaEntrada&&a.fechaEntrada){const t=e.fechaEntrada instanceof Date?e.fechaEntrada:e.fechaEntrada.toDate(),o=a.fechaEntrada instanceof Date?a.fechaEntrada:a.fechaEntrada.toDate();return t-o}return null===e.precio&&null===a.precio?0:null===e.precio?1:null===a.precio?-1:e.precio-a.precio});t[e]={items:a,precioPromedio:u(a)}}}),Object.keys(t).length>0&&(s[e]={proveedores:t,precioPromedioGeneral:(()=>{const e=Object.values(t).flatMap(e=>e.items);return u(e)})()})}}),Object.entries(o).forEach(([e,a])=>{if((!t||e.toLowerCase().includes(t))&&Object.keys(a).length>0){const t=m(a);s[e]={items:a,precioPromedio:t}}}),s}),b=Object(i["computed"])(()=>{let a=0,t=0;return Object.entries(e.value).forEach(([e,o])=>{Object.values(o).forEach(o=>{"ozuna"===e.toLowerCase()?o.kilos>t&&(t=o.kilos):o.kilos>a&&(a=o.kilos)})}),{normal:a,ozuna:t}}),f=Object(i["computed"])(()=>Object.entries(h.value).reduce((e,[a,t])=>"Ozuna"===a||"Joselito"===a?e+Object.values(t.items).reduce((e,a)=>e+a.kilos,0):e+Object.values(t.proveedores).reduce((e,a)=>e+a.items.reduce((e,a)=>e+a.kilos,0),0),0)),g=Object(i["computed"])(()=>Object.entries(h.value).reduce((e,[a,t])=>"Ozuna"===a||"Joselito"===a?e+Object.values(t.items).reduce((e,a)=>a.precio&&a.precio>0?e+a.kilos*a.precio:e,0):e+Object.values(t.proveedores).reduce((e,a)=>e+a.items.reduce((e,a)=>a.precio&&a.precio>0?e+a.kilos*a.precio:e,0),0),0)),k=Object(i["computed"])(()=>o.value.filter(e=>"pendiente"===e.estado).reduce((e,a)=>e+(a.saldoPendiente||0),0)),_=Object(i["computed"])(()=>t.value?g.value-k.value:0),$=Object(i["computed"])(()=>l()().add(1,"day").format("DD/MM/YYYY")),x=Object(i["computed"])(()=>n.value.filter(e=>"proveedor"===e.tipo)),O=Object(i["computed"])(()=>n.value.filter(e=>"maquila"===e.tipo)),j=Object(i["computed"])(()=>n.value.reduce((e,a)=>e+a.kilos,0)),E=e=>Math.round(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),P=e=>{if(!e)return"";const a=e instanceof Date?e:e.toDate();return l()(a).format("DD/MM")},C=()=>{const e=(new Date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),a=(t.value,t.value,g.value),o=k.value,i=_.value,r="\n        <style>\n          @page { \n            size: A4 landscape; \n            margin: 0.3cm 0.3cm;\n          }\n          body {\n            font-family: Arial, sans-serif;\n            font-size: 16pt;\n            line-height: 1.0;\n            color: #333;\n            margin: 0;\n            padding: 0;\n          }\n          .header {\n            margin-bottom: 4px;\n            padding-bottom: 1px;\n          }\n          h1 {\n            font-size: 20pt;\n            margin: 0;\n            padding: 0;\n          }\n          .fecha-reporte {\n            font-size: 14pt;\n          }\n          .existencias-grid {\n            display: grid;\n            grid-template-columns: repeat(3, 1fr);\n            gap: 3px;\n            margin-top: 4px;\n          }\n          .medida-card {\n            padding: 4px;\n          }\n          .medida-card h2 {\n            font-size: 16pt;\n            margin: 0 0 3px 0;\n            padding-bottom: 2px;\n          }\n          th, td {\n            padding: 2px 4px;\n            font-size: 14pt;\n          }\n          .precio-cell {\n            text-align: center;\n            color: #27ae60;\n            font-weight: bold;\n          }\n          .fecha-entrada {\n            color: #6c757d;\n            font-size: 11pt;\n            font-weight: normal;\n            opacity: 0.7;\n            margin-left: 3px;\n          }\n          .precio-promedio {\n            color: #27ae60;\n            font-size: 14pt;\n            font-weight: normal;\n            margin-left: 10px;\n            opacity: 0.9;\n          }\n          .precio-promedio-proveedor {\n            color: #27ae60;\n            font-size: 12pt;\n            font-weight: normal;\n            margin-left: 8px;\n            opacity: 0.8;\n          }\n          .proveedor-section {\n            margin-bottom: 12px;\n            border-left: 3px solid #3498db;\n            padding-left: 8px;\n          }\n          .proveedor-header {\n            color: #2c3e50;\n            font-size: 16pt;\n            margin: 8px 0 6px 0;\n            border-bottom: 1px solid #bdc3c7;\n            padding-bottom: 3px;\n          }\n          .subtotal-row {\n            background-color: #ecf0f1 !important;\n            border-top: 1px solid #3498db;\n          }\n          .subtotal-row td {\n            font-weight: bold;\n            color: #2c3e50;\n          }\n          .total-medida {\n            margin-top: 8px;\n            padding: 8px;\n            background-color: #3498db;\n            color: white;\n            text-align: center;\n            border-radius: 3px;\n            font-size: 14pt;\n          }\n          @media print {\n            .existencias-grid {\n              display: grid;\n              grid-template-columns: repeat(3, 1fr);\n            }\n            .medida-card {\n              break-inside: avoid;\n              page-break-inside: avoid;\n            }\n          }\n          .valor-total {\n            margin-top: 4px;\n            padding: 2px;\n            text-align: right;\n          }\n          .valor-total h2 {\n            font-size: 20pt;\n            color: #27ae60;\n            margin: 0;\n          }\n          .saldo-pendiente-deudas {\n            margin-top: 2px;\n            padding: 2px;\n            text-align: right;\n          }\n          .saldo-pendiente-deudas h2 {\n            font-size: 18pt;\n            color: #e74c3c;\n            margin: 0;\n          }\n          .valor-libre {\n            margin-top: 2px;\n            padding: 2px;\n            text-align: right;\n            border-top: 2px solid #3498db;\n          }\n          .valor-libre h2 {\n            font-size: 20pt;\n            color: #3498db;\n            margin: 0;\n          }\n          .total-general {\n            margin-top: 2px;\n            padding: 2px;\n          }\n          .total-general h2 {\n            font-size: 20pt;\n          }\n          table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 3px;\n            border: 1px solid #2c3e50;\n          }\n          th {\n            background-color: #2c3e50;\n            color: white;\n            text-align: left;\n            padding: 2px 4px;\n            font-size: 14pt;\n            border: 1px solid #2c3e50;\n          }\n          td {\n            padding: 2px 4px;\n            font-size: 14pt;\n            border: 1px solid #bdc3c7;\n          }\n          tr:nth-child(even) {\n            background-color: #f8f9fa;\n          }\n          .kilos-cell {\n            text-align: right;\n            font-weight: bold;\n            color: #2c3e50;\n          }\n          .total-row {\n            background-color: #ecf0f1 !important;\n            border-top: 1px solid #2c3e50;\n          }\n          .total-row td {\n            font-weight: bold;\n            color: #2c3e50;\n          }\n          .medida-card {\n            padding: 4px;\n            border: 1px solid #bdc3c7;\n            background-color: white;\n          }\n          .maquila-card {\n            background-color: white;\n            border: 1px solid #f39c12;\n          }\n          .maquila-card h2 {\n            color: #d35400;\n            border-bottom: 1px solid #f39c12;\n            padding-bottom: 1px;\n          }\n          .maquila-card th {\n            background-color: #f39c12;\n            border-color: #f39c12;\n          }\n          .maquila-card .total-row {\n            background-color: #f8f9fa !important;\n            border-top: 1px solid #f39c12;\n          }\n          .maquila-card .total-row td {\n            color: #d35400;\n            font-weight: bold;\n          }\n          .salidas-dia-siguiente {\n            margin-top: 20px;\n            padding: 15px;\n            background-color: #f8f9fa;\n            border: 2px solid #6c757d;\n            border-radius: 8px;\n          }\n          .salidas-dia-siguiente h2 {\n            color: #495057;\n            font-size: 18pt;\n            margin: 0 0 10px 0;\n            text-align: center;\n            border-bottom: 2px solid #6c757d;\n            padding-bottom: 5px;\n          }\n          .salidas-grid {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: 15px;\n            margin-bottom: 10px;\n          }\n          .salidas-proveedores, .salidas-maquilas {\n            background-color: white;\n            padding: 10px;\n            border-radius: 5px;\n            border: 1px solid #ddd;\n          }\n          .salidas-proveedores h3, .salidas-maquilas h3 {\n            color: #495057;\n            font-size: 16pt;\n            margin: 0 0 8px 0;\n            border-bottom: 1px solid #6c757d;\n            padding-bottom: 3px;\n          }\n          .salidas-table {\n            width: 100%;\n            border-collapse: collapse;\n            font-size: 14pt;\n          }\n          .salidas-table th, .salidas-table td {\n            border: 1px solid #ddd;\n            padding: 5px 8px;\n            text-align: left;\n          }\n          .salidas-table th {\n            background-color: #6c757d;\n            color: white;\n            font-weight: bold;\n          }\n          .salidas-table th.kilos-cell {\n            color: white;\n          }\n          .salidas-table tr:nth-child(even) {\n            background-color: #fafafa;\n          }\n\n          .total-salidas-siguiente {\n            text-align: center;\n            margin-top: 10px;\n            padding: 8px;\n            background-color: #fff;\n            border: 1px solid #6c757d;\n            border-radius: 5px;\n          }\n          .total-salidas-siguiente h3 {\n            color: #495057;\n            font-size: 16pt;\n            margin: 0;\n          }\n          @media print {\n            .medida-card {\n              box-shadow: none;\n              border: 1px solid #bdc3c7;\n              break-inside: avoid;\n              page-break-inside: avoid;\n            }\n            .maquila-card {\n              background-color: white;\n              border: 1px solid #f39c12;\n            }\n            table {\n              page-break-inside: avoid;\n            }\n            .valor-total, .total-general, .salidas-dia-siguiente {\n              page-break-before: avoid;\n              break-before: avoid;\n            }\n            .salidas-dia-siguiente {\n              background-color: #f8f9fa !important;\n              border: 2px solid #6c757d !important;\n            }\n            .salidas-grid {\n              display: grid;\n              grid-template-columns: 1fr 1fr;\n              gap: 15px;\n            }\n          }\n        </style>\n      ",s=t.value?`\n        <div class="valor-total">\n          <h2>Valor Total: $${E(a)}</h2>\n        </div>\n      `:"",d=t.value?`\n        <div class="saldo-pendiente-deudas">\n          <h2>Saldo Pendiente Deudas: $${E(o)}</h2>\n        </div>\n      `:"",l=t.value?`\n        <div class="valor-libre">\n          <h2>Valor Libre: $${E(i)}</h2>\n        </div>\n      `:"",c=`\n        <div class="total-general">\n          <h2>Kilos Totales: ${E(f.value)}</h2>\n        </div>\n      `,p=n.value.length>0?`\n        <div class="salidas-dia-siguiente">\n          <h2>Apartado para Mañana (${$.value})</h2>\n          <div class="salidas-grid">\n            ${x.value.length>0?`\n              <div class="salidas-proveedores">\n                <h3>Clientes</h3>\n                <table class="salidas-table">\n                  <thead>\n                    <tr>\n                      <th>Proveedor</th>\n                      <th>Medida</th>\n                      ${t.value?"<th>Precio</th>":""}\n                      <th class="kilos-cell">Kilos</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    ${x.value.map(e=>`\n                      <tr>\n                        <td>${e.proveedor}</td>\n                        <td>\n                          ${e.medida}\n                          ${e.fechaEntrada?`<span class="fecha-entrada">(${P(e.fechaEntrada)})</span>`:""}\n                        </td>\n                        ${t.value?`<td class="precio-cell">${e.precio?"$"+e.precio:"-"}</td>`:""}\n                        <td class="kilos-cell">${E(e.kilos)}</td>\n                      </tr>\n                    `).join("")}\n                  </tbody>\n                </table>\n              </div>\n            `:""}\n            \n            ${O.value.length>0?`\n              <div class="salidas-maquilas">\n                <h3>Maquilas</h3>\n                <table class="salidas-table">\n                  <thead>\n                    <tr>\n                      <th>Maquila</th>\n                      <th>Medida</th>\n                      ${t.value?"<th>Precio</th>":""}\n                      <th class="kilos-cell">Kilos</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    ${O.value.map(e=>`\n                      <tr>\n                        <td>${e.proveedor}</td>\n                        <td>\n                          ${e.medida}\n                          ${e.fechaEntrada?`<span class="fecha-entrada">(${P(e.fechaEntrada)})</span>`:""}\n                        </td>\n                        ${t.value?`<td class="precio-cell">${e.precio?"$"+e.precio:"-"}</td>`:""}\n                        <td class="kilos-cell">${E(e.kilos)}</td>\n                      </tr>\n                    `).join("")}\n                  </tbody>\n                </table>\n              </div>\n            `:""}\n          </div>\n          \n          <div class="total-salidas-siguiente">\n            <h3>Total Apartado: ${E(j.value)} kg</h3>\n          </div>\n        </div>\n      `:"",u=`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <meta charset="utf-8">\n          <title>Reporte de Existencias</title>\n          ${r}\n        </head>\n        <body>\n          <div class="header">\n            <h1>Reporte de Existencias</h1>\n            <div class="fecha-reporte">Fecha: ${e}</div>\n          </div>\n          <div class="existencias-grid">\n            ${Object.entries(h.value).map(([e,a])=>"Ozuna"===e||"Joselito"===e?`\n                  <div class="medida-card maquila-card">\n                    <h2>\n                      ${e} (Maquila)\n                      ${t.value&&a.precioPromedio?`<span class="precio-promedio">- Promedio: $${a.precioPromedio.toFixed(2)}</span>`:""}\n                    </h2>\n                    <table class="medida-table">\n                      <thead>\n                        <tr>\n                          <th>Medida</th>\n                          ${t.value?"<th>Precio</th>":""}\n                          <th class="kilos-cell">Kilos</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        ${Object.entries(a.items).map(([e,a])=>a.kilos>0?`\n                            <tr>\n                              <td>\n                                ${a.medida}\n                                ${a.fechaEntrada?`<span class="fecha-entrada">(${P(a.fechaEntrada)})</span>`:""}\n                              </td>\n                              ${t.value?`<td class="precio-cell">${a.precio?"$"+a.precio:"-"}</td>`:""}\n                              <td class="kilos-cell">${E(a.kilos)}</td>\n                            </tr>\n                          `:"").join("")}\n                        <tr class="total-row">\n                          <td><strong>Total ${e}</strong></td>\n                          ${t.value?"<td></td>":""}\n                          <td class="kilos-cell">\n                            <strong>${E(Object.values(a.items).reduce((e,a)=>e+a.kilos,0))}</strong>\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                    ${("Ozuna"===e||"Joselito"===e)&&t.value&&Object.values(a.items).some(e=>e.precio)?`\n                      <div style="margin-top: 8px; padding: 8px; background-color: #f39c12; color: white; text-align: center; border-radius: 5px; font-size: 16px;">\n                        <strong>Valor Total: $${E(Object.values(a.items).reduce((e,a)=>a.precio?e+a.precio*a.kilos:e,0))}</strong>\n                      </div>\n                    `:""}\n                  </div>\n                `:`\n                  <div class="medida-card">\n                    <h2>\n                      ${e}\n                      ${"51/60"===e&&v.value?`\n                        <div style="display: block; color: #e74c3c; font-size: 12pt; font-weight: bold; margin: 3px 0; background-color: rgba(231, 76, 60, 0.1); padding: 2px 6px; border-radius: 3px; display: inline-block;">\n                          Promedio 51,61 y 41 (Selecta): $${v.value.toFixed(2)}\n                        </div>\n                      `:""}\n                      ${t.value&&a.precioPromedioGeneral?`<span class="precio-promedio">- Promedio General: $${a.precioPromedioGeneral.toFixed(2)}</span>`:""}\n                    </h2>\n                    ${Object.entries(a.proveedores).map(([e,a])=>`\n                      <div class="proveedor-section">\n                        <h3 class="proveedor-header">\n                          ${e}\n                          ${t.value&&a.precioPromedio?`<span class="precio-promedio-proveedor">- Promedio: $${a.precioPromedio.toFixed(2)}</span>`:""}\n                        </h3>\n                        <table class="medida-table">\n                          <thead>\n                            <tr>\n                              <th>Medida</th>\n                              ${t.value?"<th>Precio</th>":""}\n                              <th class="kilos-cell">Kilos</th>\n                            </tr>\n                          </thead>\n                          <tbody>\n                            ${a.items.map(e=>e.kilos>0?`\n                                <tr>\n                                  <td>\n                                    ${e.medida}\n                                    ${e.fechaEntrada?`<span class="fecha-entrada">(${P(e.fechaEntrada)})</span>`:""}\n                                  </td>\n                                  ${t.value?`<td class="precio-cell">${e.precio?"$"+e.precio:"-"}</td>`:""}\n                                  <td class="kilos-cell">${E(e.kilos)}</td>\n                                </tr>\n                              `:"").join("")}\n                            <tr class="subtotal-row">\n                              <td><strong>Total ${e}</strong></td>\n                              ${t.value?"<td></td>":""}\n                              <td class="kilos-cell">\n                                <strong>${E(a.items.reduce((e,a)=>e+a.kilos,0))}</strong>\n                              </td>\n                            </tr>\n                          </tbody>\n                        </table>\n                      </div>\n                    `).join("")}\n                    <div class="total-medida" style="padding: 10px;">\n                      <div style="font-size: 16px; margin-bottom: 5px;">\n                        <strong>Total ${e}: ${E(Object.values(a.proveedores).reduce((e,a)=>e+a.items.reduce((e,a)=>e+a.kilos,0),0))} kg</strong>\n                      </div>\n                      ${t.value&&Object.values(a.proveedores).some(e=>e.items.some(e=>e.precio))?`\n                        <div style="font-size: 16px; color: #fff; background-color: rgba(0, 0, 0, 0.15); padding: 5px 10px; border-radius: 4px; display: inline-block;">\n                          <strong>Valor Total: $${E(Object.values(a.proveedores).reduce((e,a)=>e+a.items.reduce((e,a)=>a.precio?e+a.precio*a.kilos:e,0),0))}</strong>\n                        </div>\n                      `:""}\n                    </div>\n                  </div>\n                `).join("")}\n          </div>\n          ${s}\n          ${d}\n          ${l}\n          ${p}\n          ${c}\n        </body>\n        </html>\n      `,m=window.open("","_blank");m.document.write(u),m.document.close(),setTimeout(()=>{m.print(),m.close()},250)};let y;return Object(i["onMounted"])(()=>{d(),c(),p(),y=Object(s["k"])(Object(s["c"])(r["a"],"sacadas"),()=>{d(),p()});const e=Object(s["k"])(Object(s["c"])(r["a"],"deudas"),()=>{c()}),a=y;y=()=>{a(),e()}}),Object(i["onUnmounted"])(()=>{y&&y()}),Object(i["watchEffect"])(()=>{console.log("Existencias actualizadas:",e.value)}),{existencias:e,filteredExistencias:h,search:a,maxKilos:b,totalGeneral:f,valorTotal:g,saldoPendienteDeudas:k,valorLibre:_,tienePrecio:t,formatNumber:E,formatFecha:P,imprimirReporte:C,salidasDiaSiguiente:n,fechaDiaSiguiente:$,salidasProveedoresDiaSiguiente:x,salidasMaquilasDiaSiguiente:O,totalSalidasDiaSiguiente:j,promedioCombinado516141:v}}},p=c,u=(t("6b60"),t("2877")),m=Object(u["a"])(p,o,n,!1,null,"57acedee",null);a["a"]=m.exports},"6b60":function(e,a,t){"use strict";t("723b")},"723b":function(e,a,t){}}]);