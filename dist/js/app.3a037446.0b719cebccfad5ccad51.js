(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app.3a037446"],{"0042":function(e,a,t){"use strict";var i=function(){var e=this,a=e._self._c;return a("div",{staticClass:"pedidos-container"},[a("h2",[e._v("Pedidos de CamarÃ³n")]),a("div",{staticClass:"tipo-pedido-selector"},[a("button",{class:["btn-tipo",{active:"crudo"===e.tipoPedido}],on:{click:function(a){e.tipoPedido="crudo"}}},[e._v(" CamarÃ³n Crudo ")]),a("button",{class:["btn-tipo",{active:"limpio"===e.tipoPedido}],on:{click:function(a){e.tipoPedido="limpio"}}},[e._v(" CamarÃ³n Limpio ")])]),"crudo"===e.tipoPedido?a("PedidosCrudo"):a("PedidosLimpio")],1)},o=[],s=t("cc985"),r=t("d918"),l={name:"Pedidos",components:{PedidosCrudo:s["a"],PedidosLimpio:r["a"]},data(){return{tipoPedido:"crudo"}}},n=l,d=(t("d248"),t("2877")),c=Object(d["a"])(n,i,o,!1,null,"6395483f",null);c.exports},"012b":function(e,a,t){},"281e":function(e,a,t){},"45d1":function(e,a,t){"use strict";t("e77e")},"656d":function(e,a,t){"use strict";t("012b")},"76cd":function(e,a,t){},ae46:function(e,a,t){"use strict";t("281e")},be6e:function(e,a,t){},c5f5:function(e,a,t){"use strict";var i=function(){var e,a=this,t=a._self._c;return t("div",{staticClass:"preparacion-container"},[t("BuscadorMedidas"),t("div",{staticClass:"header"},[t("div",{staticClass:"header-left"},[t("h1",[a._v("PreparaciÃ³n")]),t("div",{staticClass:"dias-dropdown"},[t("button",{staticClass:"dropdown-button",on:{click:a.toggleDiasList}},[a._v(" "+a._s(a.diaSeleccionado?a.formatearFecha(a.diaSeleccionado.fecha):"Seleccionar DÃ­a")+" "),t("i",{class:["fas",a.diasListOpen?"fa-chevron-up":"fa-chevron-down"]})]),t("transition",{attrs:{name:"slide"}},[a.diasListOpen?t("div",{staticClass:"dias-dropdown-content"},a._l(a.diasOrdenados,(function(e){return t("div",{key:e.id,staticClass:"dia-option",class:{selected:a.diaSeleccionado&&a.diaSeleccionado.id===e.id},on:{click:function(t){return a.seleccionarDia(e)}}},[a._v(" "+a._s(a.formatearFecha(e.fecha))+" ")])})),0):a._e()])],1)]),t("div",{staticClass:"header-actions"},[a.embarqueId?t("button",{staticClass:"btn-volver-embarque",on:{click:a.volverAEmbarque}},[t("i",{staticClass:"fas fa-arrow-left"}),a._v(" Volver al Embarque ")]):a._e(),t("GestionProveedores",{on:{"proveedores-actualizados":a.cargarProveedores}}),t("button",{staticClass:"btn-nuevo",on:{click:a.mostrarModalNuevoDia}},[t("i",{staticClass:"fas fa-plus"}),a._v(" Nuevo DÃ­a ")]),a.diaSeleccionado?t("button",{staticClass:"btn-eliminar-dia",on:{click:function(e){return a.confirmarBorrarDia(a.diaSeleccionado)}}},[t("i",{staticClass:"fas fa-trash"}),a._v(" Eliminar DÃ­a ")]):a._e()],1)]),a.diaSeleccionado?t("div",{staticClass:"preparacion-layout"},[t("div",{staticClass:"tabla-container"},[t("table",[a._m(0),t("tbody",a._l(a.diaSeleccionado.medidas,(function(e,i){return t("tr",{key:i},[t("td",{staticClass:"sticky-col-1"},[e.desdeRendimiento?t("input",{directives:[{name:"model",rawName:"v-model",value:e.medida,expression:"medida.medida"}],staticClass:"form-control medida-input-rendimiento",attrs:{type:"text",placeholder:"Medida desde rendimiento"},domProps:{value:e.medida},on:{change:function(e){return a.guardarCambios(a.diaSeleccionado)},input:function(t){t.target.composing||a.$set(e,"medida",t.target.value)}}}):t("select",{directives:[{name:"model",rawName:"v-model",value:e.medida,expression:"medida.medida"}],staticClass:"form-control medida-select",on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));a.$set(e,"medida",t.target.multiple?i:i[0])},function(e){return a.guardarCambios(a.diaSeleccionado)}]}},[t("option",{attrs:{value:""}},[a._v("Seleccionar medida")]),a._l(a.medidasDisponibles,(function(e){return t("option",{key:e,domProps:{value:e}},[a._v(" "+a._s(e)+" ")])}))],2)]),t("td",{staticClass:"sticky-col-2"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.proveedor,expression:"medida.proveedor"}],staticClass:"form-control proveedor-select",on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));a.$set(e,"proveedor",t.target.multiple?i:i[0])},function(e){return a.guardarCambios(a.diaSeleccionado)}]}},[t("option",{attrs:{value:""}},[a._v("Sin proveedor")]),a._l(a.proveedoresDisponibles,(function(e){return t("option",{key:e,domProps:{value:e}},[a._v(" "+a._s(e)+" ")])}))],2)]),t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.diaNoche,expression:"medida.diaNoche"}],staticClass:"form-control",on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));a.$set(e,"diaNoche",t.target.multiple?i:i[0])},function(e){return a.guardarCambios(a.diaSeleccionado)}]}},[t("option",{attrs:{value:""}},[a._v("Seleccionar")]),t("option",{attrs:{value:"DÃ­a"}},[a._v("DÃ­a")]),t("option",{attrs:{value:"Noche"}},[a._v("Noche")])])]),t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.tinas,expression:"medida.tinas"}],staticClass:"form-control",on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));a.$set(e,"tinas",t.target.multiple?i:i[0])},function(e){return a.guardarCambios(a.diaSeleccionado)}]}},[t("option",{attrs:{value:""}},[a._v("Seleccionar")]),t("option",{attrs:{value:"Tina"}},[a._v("Tina")]),t("option",{attrs:{value:"BaÃ±o"}},[a._v("BaÃ±o")])])]),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cajas,expression:"medida.cajas"}],staticClass:"form-control",attrs:{type:"number",placeholder:""},domProps:{value:e.cajas},on:{change:function(e){return a.guardarCambios(a.diaSeleccionado)},input:function(t){t.target.composing||a.$set(e,"cajas",t.target.value)}}})]),t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.cal,expression:"medida.cal"}],staticClass:"form-control",on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));a.$set(e,"cal",t.target.multiple?i:i[0])},function(e){return a.guardarCambios(a.diaSeleccionado)}]}},[t("option",{attrs:{value:""}},[a._v("Seleccionar")]),a._l(a.calDisponible,(function(e){return t("option",{key:e,domProps:{value:e}},[a._v(a._s(e))])}))],2)]),t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.sal,expression:"medida.sal"}],staticClass:"form-control",on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));a.$set(e,"sal",t.target.multiple?i:i[0])},function(e){return a.guardarCambios(a.diaSeleccionado)}]}},[t("option",{attrs:{value:""}},[a._v("Seleccionar")]),a._l(a.salDisponible,(function(e){return t("option",{key:e,domProps:{value:e}},[a._v(a._s(e))])}))],2)]),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.porcentaje,expression:"medida.porcentaje"}],staticClass:"form-control porcentaje-input",attrs:{type:"text",placeholder:""},domProps:{value:e.porcentaje},on:{change:function(e){return a.guardarCambios(a.diaSeleccionado)},input:function(t){t.target.composing||a.$set(e,"porcentaje",t.target.value)}}})]),t("td",[a.diaSeleccionado.medidas.length>1?t("button",{staticClass:"btn-delete",on:{click:function(e){return a.eliminarMedidaExistente(a.diaSeleccionado,i)}}},[t("i",{staticClass:"fas fa-trash"})]):a._e()])])})),0)]),t("div",{staticClass:"botones-container"},[t("button",{staticClass:"btn-agregar",on:{click:function(e){return a.agregarMedidaExistente(a.diaSeleccionado)}}},[t("i",{staticClass:"fas fa-plus"}),a._v(" Agregar Medida ")]),a.embarqueData&&a.rendimientosEmbarque.length>0?t("button",{staticClass:"btn-generar-rendimientos",on:{click:function(e){return a.generarMedidasDesdeRendimientos(a.diaSeleccionado)}}},[t("i",{staticClass:"fas fa-magic"}),a._v(" Generar desde Rendimientos ")]):a._e()])]),a.embarqueData?t("div",{staticClass:"tabla-rendimientos-container"},[t("div",{staticClass:"tabla-rendimientos-header"},[t("h3",[a._v("ðŸ“Š Rendimientos del Embarque")]),t("p",{staticClass:"fecha-embarque"},[a._v(a._s(a.formatearFecha(null===(e=a.embarqueData)||void 0===e?void 0:e.fecha)))])]),a.embarqueData?0===a.rendimientosEmbarque.length?t("div",{staticClass:"sin-rendimientos"},[t("p",[a._v("No hay datos de rendimientos disponibles")])]):t("div",{staticClass:"tabla-rendimientos-wrapper"},[t("table",{staticClass:"tabla-rendimientos"},[a._m(1),t("tbody",a._l(a.rendimientosEmbarque,(function(e,i){return t("tr",{key:i},[t("td",{staticClass:"medida-nombre"},[a._v(" "+a._s(e.medida)+" ")]),t("td",{staticClass:"rendimiento-valor",class:{"rendimiento-alto":e.rendimiento>1}},[a._v(" "+a._s(e.rendimiento.toFixed(2))+" ")])])})),0)])]):t("div",{staticClass:"loading-rendimientos"},[t("p",[a._v("Cargando datos del embarque...")])]),a.rendimientosEmbarque.length>0?t("div",{staticClass:"estadisticas-rendimientos"},[t("div",{staticClass:"estadistica-item"},[t("span",{staticClass:"estadistica-label"},[a._v("Total Medidas:")]),t("span",{staticClass:"estadistica-valor"},[a._v(a._s(a.rendimientosEmbarque.length))])]),t("div",{staticClass:"estadistica-item estadistica-destacada"},[t("span",{staticClass:"estadistica-label"},[a._v("Rendimiento Promedio:")]),t("span",{staticClass:"estadistica-valor"},[a._v(a._s(a.calcularRendimientoPromedio().toFixed(2)))])])]):a._e()]):a._e()]):t("div",{staticClass:"no-dia-seleccionado"},[t("p",[a._v("Selecciona un dÃ­a existente o crea uno nuevo para comenzar.")])]),t("b-modal",{attrs:{title:"Nuevo DÃ­a de PreparaciÃ³n",size:"md"},on:{ok:a.crearNuevoDia,show:a.inicializarNuevoDia},model:{value:a.showModal,callback:function(e){a.showModal=e},expression:"showModal"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"fecha-container"},[t("b-form-group",{attrs:{label:"Fecha del dÃ­a de preparaciÃ³n:"}},[t("b-form-input",{staticClass:"fecha-input",attrs:{type:"date",required:""},model:{value:a.nuevoDia.fecha,callback:function(e){a.$set(a.nuevoDia,"fecha",e)},expression:"nuevoDia.fecha"}})],1),t("div",{staticClass:"info-mensaje"},[t("i",{staticClass:"fas fa-info-circle"}),t("span",[a._v("PodrÃ¡s agregar las medidas despuÃ©s de crear el dÃ­a")])])],1)])])],1)},o=[function(){var e=this,a=e._self._c;return a("thead",[a("tr",[a("th",{staticClass:"sticky-col-1"},[e._v("Medida")]),a("th",{staticClass:"sticky-col-2"},[e._v("Proveedor")]),a("th",[e._v("DÃ­a/Noche")]),a("th",[e._v("Tinas/BaÃ±os")]),a("th",[e._v("Cajas/Kg")]),a("th",[e._v("Cal")]),a("th",[e._v("Sal")]),a("th",[e._v("%")]),a("th",[e._v("Acciones")])])])},function(){var e=this,a=e._self._c;return a("thead",[a("tr",[a("th",[e._v("Medida")]),a("th",[e._v("Rendimiento")])])])}],s=(t("14d9"),t("13d5"),t("1494")),r=t("27b2"),l=t("7508"),n={name:"Preparacion",components:{BuscadorMedidas:r["a"],GestionProveedores:l["a"]},data(){return{dias:[],showModal:!1,nuevoDia:{fecha:"",medidas:[]},diasListOpen:!1,diaSeleccionado:null,embarqueId:null,embarqueData:null,rendimientosEmbarque:[],medidasDisponibles:["Golfo","Piojo","26/30","36/40","41/50","51/60","61/70","71/90","91/110","21/25","Salmureado"],proveedoresDisponibles:[],calDisponible:["1/8","1/4","1/4+","1/2","3/4","1"],salDisponible:["1/4","1/2","3/4","1"]}},computed:{diasOrdenados(){return[...this.dias].sort((e,a)=>a.timestamp-e.timestamp)}},methods:{async aplicarSeleccionDia(){if(console.log("Aplicando selecciÃ³n de dÃ­a..."),console.log("Query fecha:",this.$route.query.fecha),console.log("DÃ­as cargados:",this.dias.length),console.log("DÃ­as disponibles:",this.dias.map(e=>({id:e.id,fecha:e.fecha}))),this.$route.query.fecha){let e=this.$route.query.fecha;if("object"===typeof e&&e.seconds){const a=new Date(1e3*e.seconds),t=a.getUTCFullYear(),i=String(a.getUTCMonth()+1).padStart(2,"0"),o=String(a.getUTCDate()).padStart(2,"0");e=`${t}-${i}-${o}`,console.log("Fecha convertida de Timestamp (UTC):",e)}console.log("Buscando dÃ­a con fecha:",e),console.log("Tipo de fecha buscada:",typeof e);const a=this.dias.find(a=>a.fecha===e);console.log("DÃ­a encontrado:",a),a?(this.diaSeleccionado=a,console.log("DÃ­a seleccionado automÃ¡ticamente:",a.fecha),await this.buscarEmbarquePorFecha(a.fecha)):(console.log("No se encontrÃ³ dÃ­a para la fecha:",e),console.log("Fechas disponibles:",this.dias.map(e=>e.fecha)),await this.crearDiaAutomaticamente(e))}else this.dias.length>0&&(this.diaSeleccionado=this.diasOrdenados[0],console.log("Seleccionado dÃ­a mÃ¡s reciente:",this.diaSeleccionado.fecha),await this.buscarEmbarquePorFecha(this.diaSeleccionado.fecha))},async crearDiaAutomaticamente(e){try{console.log("Creando dÃ­a automÃ¡ticamente para la fecha:",e);const a=Object(s["h"])(),[t,i,o]=e.split("-"),r=new Date(t,i-1,parseInt(o)),l=await Object(s["b"])(Object(s["c"])(a,"preparacion"),{fecha:e,medidas:[],createdAt:new Date,timestamp:r.getTime()}),n={id:l.id,fecha:e,medidas:[],timestamp:r.getTime()};this.dias.push(n),this.diaSeleccionado=n,console.log("DÃ­a creado y seleccionado automÃ¡ticamente:",e),await this.buscarEmbarquePorFecha(e)}catch(a){console.error("Error al crear dÃ­a automÃ¡ticamente:",a)}},formatearFecha(e){if(!e)return"";try{let a;if("object"===typeof e&&e.seconds)a=new Date(1e3*e.seconds);else if("string"===typeof e&&e.includes("-")){const[t,i,o]=e.split("-");a=new Date(t,i-1,o)}else if(e instanceof Date)a=e;else if("number"===typeof e)a=new Date(e);else{if("string"!==typeof e)return console.error("Formato de fecha no reconocido:",e),"";a=new Date(e)}return isNaN(a.getTime())?(console.error("Fecha invÃ¡lida:",e),""):a.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(a){return console.error("Error al formatear fecha:",e,a),""}},inicializarNuevoDia(){const e=new Date,a=e.getTimezoneOffset();e.setMinutes(e.getMinutes()-a),this.nuevoDia={fecha:e.toISOString().split("T")[0],medidas:[]}},mostrarModalNuevoDia(){this.showModal=!0},agregarMedida(){this.nuevoDia.medidas.push({medida:"",proveedor:"",diaNoche:"",tinas:"",cajas:"",cal:"",sal:"",porcentaje:"",editando:!1})},eliminarMedida(e){this.nuevoDia.medidas.splice(e,1)},async crearNuevoDia(){try{const e=Object(s["h"])(),[a,t,i]=this.nuevoDia.fecha.split("-"),o=new Date(a,t-1,parseInt(i)),r=await Object(s["b"])(Object(s["c"])(e,"preparacion"),{fecha:this.nuevoDia.fecha,medidas:[],createdAt:new Date,timestamp:o.getTime()}),l={id:r.id,fecha:this.nuevoDia.fecha,medidas:[],timestamp:o.getTime()};this.dias.push(l),this.diaSeleccionado=l,this.diasListOpen=!1,this.showModal=!1,console.log("DÃ­a creado exitosamente")}catch(e){console.error("Error al crear dÃ­a:",e)}},async guardarCambios(e){try{const a=Object(s["h"])();await Object(s["s"])(Object(s["e"])(a,"preparacion",e.id),{medidas:e.medidas}),console.log("Cambios guardados exitosamente")}catch(a){console.error("Error al guardar cambios:",a)}},async confirmarBorrarDia(e){if(await this.$bvModal.msgBoxConfirm("Â¿EstÃ¡s seguro de que deseas borrar este dÃ­a?"))try{const a=Object(s["h"])();await Object(s["d"])(Object(s["e"])(a,"preparacion",e.id)),this.dias=this.dias.filter(a=>a.id!==e.id),console.log("DÃ­a eliminado exitosamente")}catch(a){console.error("Error al borrar dÃ­a:",a)}},async eliminarMedidaExistente(e,a){try{e.medidas.splice(a,1),await this.guardarCambios(e),console.log("Medida eliminada exitosamente")}catch(t){console.error("Error al eliminar medida:",t)}},async cargarDias(){try{const e=Object(s["h"])(),a=Object(s["o"])(Object(s["c"])(e,"preparacion"),Object(s["l"])("timestamp","desc")),t=await Object(s["g"])(a);this.dias=t.docs.map(e=>{const a=e.data();if(!a.timestamp){const[e,t,i]=a.fecha.split("-"),o=new Date(e,t-1,parseInt(i));a.timestamp=o.getTime()}return{id:e.id,...a,medidas:a.medidas.map(e=>({...e,editando:!1}))}}),console.log("DÃ­as cargados exitosamente:",this.dias.length),console.log("Fechas de dÃ­as cargados:",this.dias.map(e=>e.fecha))}catch(e){console.error("Error al cargar dÃ­as:",e)}},async agregarMedidaExistente(e){const a={medida:"",proveedor:"",diaNoche:"",tinas:"",cajas:"",cal:"",sal:"",porcentaje:"",desdeRendimiento:!1};e.medidas.push(a),await this.guardarCambios(e)},async generarMedidasDesdeRendimientos(e){if(!this.rendimientosEmbarque||0===this.rendimientosEmbarque.length)return void this.$bvToast.toast("No hay rendimientos disponibles para generar medidas",{title:"InformaciÃ³n",variant:"warning",solid:!0});const a=this.rendimientosEmbarque.map(e=>({medida:e.medida,proveedor:"",diaNoche:"",tinas:"",cajas:"",cal:"",sal:"",porcentaje:e.rendimiento.toFixed(2),desdeRendimiento:!0}));e.medidas.push(...a),await this.guardarCambios(e),this.$bvToast.toast(`Se generaron ${a.length} medidas desde los rendimientos del embarque`,{title:"Medidas Generadas",variant:"success",solid:!0})},toggleDiasList(){this.diasListOpen=!this.diasListOpen},async seleccionarDia(e){this.diaSeleccionado=e,this.diasListOpen=!1,await this.buscarEmbarquePorFecha(e.fecha)},volverAEmbarque(){this.embarqueId&&this.$router.push({name:"EditarEmbarque",params:{id:this.embarqueId}})},async cargarProveedores(){try{const e=Object(s["h"])(),a=Object(s["o"])(Object(s["c"])(e,"proveedores"),Object(s["l"])("nombre")),t=await Object(s["g"])(a);this.proveedoresDisponibles=t.docs.map(e=>e.data().nombre),console.log("Proveedores cargados:",this.proveedoresDisponibles.length)}catch(e){console.error("Error al cargar proveedores:",e),this.proveedoresDisponibles=["Ahumada","Selecta","Tirado","Ozuna","Mx"]}},async migrarProveedoresExistentes(){try{const e=["Ahumada","Selecta","Tirado","Ozuna","Mx"],a=Object(s["h"])(),t=await Object(s["g"])(Object(s["c"])(a,"proveedores"));if(t.empty){console.log("Migrando proveedores por defecto...");const t=e.map(e=>Object(s["b"])(Object(s["c"])(a,"proveedores"),{nombre:e,createdAt:new Date,updatedAt:new Date}));await Promise.all(t),console.log("Proveedores migrados exitosamente")}}catch(e){console.error("Error al migrar proveedores:",e)}},async cargarEmbarque(){if(this.embarqueId)try{const a=Object(s["h"])(),t=Object(s["e"])(a,"embarques",this.embarqueId),i=await Object(s["f"])(t);var e;if(i.exists())this.embarqueData=i.data(),console.log("âœ… Datos del embarque cargados desde Firebase:",this.embarqueId),console.log("Kilos crudos disponibles:",this.embarqueData.kilosCrudos),console.log("NÃºmero de clientes:",(null===(e=this.embarqueData.clientes)||void 0===e?void 0:e.length)||0),console.log("Fecha del embarque:",this.embarqueData.fecha),this.calcularRendimientos();else console.error("âŒ No se encontrÃ³ el embarque")}catch(a){console.error("âŒ Error al cargar el embarque:",a)}},async buscarEmbarquePorFecha(e){if(e)try{const a=Object(s["h"])(),t=Object(s["c"])(a,"embarques"),i=Object(s["o"])(t,Object(s["l"])("fecha","desc")),o=await Object(s["g"])(i);let r=null;o.forEach(a=>{const t=a.data();let i="";if("object"===typeof t.fecha&&t.fecha.seconds){const e=new Date(1e3*t.fecha.seconds),a=e.getUTCFullYear(),o=String(e.getUTCMonth()+1).padStart(2,"0"),s=String(e.getUTCDate()).padStart(2,"0");i=`${a}-${o}-${s}`}else if("string"===typeof t.fecha)i=t.fecha;else if(t.fecha instanceof Date){const e=t.fecha.getUTCFullYear(),a=String(t.fecha.getUTCMonth()+1).padStart(2,"0"),o=String(t.fecha.getUTCDate()).padStart(2,"0");i=`${e}-${a}-${o}`}i!==e||r||(r={id:a.id,...t})}),r?(console.log("Embarque encontrado para la fecha:",e,r.id),this.embarqueId=r.id,this.embarqueData=r,this.calcularRendimientos()):(console.log("No se encontrÃ³ embarque para la fecha:",e),this.embarqueId=null,this.embarqueData=null,this.rendimientosEmbarque=[])}catch(a){console.error("Error al buscar embarque por fecha:",a)}},calcularRendimientos(){if(!this.embarqueData||!this.embarqueData.clientes)return void(this.rendimientosEmbarque=[]);const e=this.obtenerMedidasUnicas(),a=this.embarqueData.kilosCrudos||{};console.log("ðŸ“Š [Preparacion] Usando datos de rendimientos guardados en Firebase");const t=e.map(e=>{let t=0;if(this.esMedidaMix(e)){const i=a[e];i&&"object"===typeof i&&(t=Number(i.medida1||0)+Number(i.medida2||0))}else t=Number(a[e]||0);const i=this.obtenerTotalEmbarcado(e),o=i>0?t/i:0;return console.log(`ðŸ“Š ${e}: ${t} kg crudos / ${i} kg embarcado = ${o.toFixed(2)}`),{medida:e,totalEmbarcado:i,kilosCrudos:t,rendimiento:o}});this.rendimientosEmbarque=t.filter(e=>e.kilosCrudos>0&&e.totalEmbarcado>0&&e.rendimiento>0),console.log(`âœ… ${this.rendimientosEmbarque.length} rendimientos cargados correctamente`)},obtenerMedidasUnicas(){if(!this.embarqueData||!this.embarqueData.clientes)return[];const e=new Map,a=new Map;this.embarqueData.clientes.forEach(t=>{t.productos.forEach(i=>{if(i.medida){const o=i.medida.toLowerCase().trim();let s=i.medida.trim();if("Ozuna"!==t.nombre||i.esVenta||(s=i.medida.trim()+" Maquila Ozuna"),o.endsWith("mix")){const e=o.split(" ")[0];a.set(e,s)}else e.has(o)||e.set(o,s)}})});const t=Array.from(a.keys()).sort();if(t.length>=2)for(let i=0;i<t.length;i+=2)if(i+1<t.length){const a=`${t[i]}-${t[i+1]} mix`,o=a.toLowerCase();e.has(o)||e.set(o,a)}return Array.from(e.values())},obtenerTotalEmbarcado(e){if(!this.embarqueData||!this.embarqueData.clientes)return 0;if(e.includes("-")&&e.endsWith("mix")){const[a,t]=e.split("-").map(e=>e.trim()),i=this.calcularTotalParaMedidaEspecifica(a+" mix"),o=this.calcularTotalParaMedidaEspecifica(t.replace(" mix","")+" mix");return i+o}return this.calcularTotalParaMedidaEspecifica(e)},calcularTotalParaMedidaEspecifica(e){const a=e.includes("Maquila Ozuna"),t=e.replace(" Maquila Ozuna","").toLowerCase().trim();console.log("ðŸ”„ [NUEVO CÃ“DIGO v2] Calculando total para: "+e);let i=[];const o=this.embarqueData.clientes.reduce((e,o)=>e+o.productos.filter(e=>!!e.medida&&(a?e.medida.toLowerCase().trim()===t&&"Ozuna"===o.nombre&&!e.esVenta:e.medida.toLowerCase().trim()===t&&("Ozuna"!==o.nombre||e.esVenta))).reduce((e,a)=>{let t=0;if("c/h20"===a.tipo){const e=this.calcularTotalBolsas(a),i=parseFloat(a.camaronNeto)||.65;t=e*i}else{const e=a.kilos.reduce((e,a)=>e+(Number(a)||0),0),i=this.calcularTotalTaras(a),o=a.restarTaras?3*i:0;t=e-o}return i.push({cliente:o.nombre,medida:a.medida,kilos:t,refrigerado:a.refrigerar||!1}),e+t},0),0);return"51/60 tirado"===e&&(console.log(`[Preparacion] Detalle para ${e}:`,i),console.log("[Preparacion] Total calculado: "+o)),o},obtenerKilosCrudos(e){if(!this.embarqueData.kilosCrudos)return 0;if(this.esMedidaMix(e)){const a=this.embarqueData.kilosCrudos[e];return a&&"object"===typeof a?Number(a.medida1||0)+Number(a.medida2||0):0}return Number(this.embarqueData.kilosCrudos[e]||0)},esMedidaMix(e){return e.toLowerCase().includes("mix")},calcularTotalBolsas(e){const a=e.reporteTaras||[],t=e.reporteBolsas||[];let i=0;for(let o=0;o<a.length;o++){const e=parseInt(a[o])||0,s=parseInt(t[o])||0;i+=e*s}return i},calcularTotalTaras(e){const a=(e.taras||[]).reduce((e,a)=>e+(Number(a)||0),0),t=(e.tarasExtra||[]).reduce((e,a)=>e+(Number(a)||0),0);return a+t},calcularRendimientoPromedio(){if(!this.rendimientosEmbarque||0===this.rendimientosEmbarque.length)return 0;let e=0,a=0;return this.rendimientosEmbarque.forEach(t=>{t.rendimiento>0&&(e+=t.rendimiento,a++)}),a>0?e/a:0},calcularTotalEmbarcadoGeneral(){return this.rendimientosEmbarque&&0!==this.rendimientosEmbarque.length?this.rendimientosEmbarque.reduce((e,a)=>e+a.totalEmbarcado,0):0},formatearNumero(e){if(!e)return"0";const a=Math.floor(e);return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},async mounted(){console.log("ðŸš€ PREPARACION.VUE - VERSIÃ“N ACTUALIZADA (CON REFRIGERADOS) ðŸš€"),this.$route.query.embarqueId&&(this.embarqueId=this.$route.query.embarqueId,console.log("Viniendo desde embarque:",this.embarqueId)),await Promise.all([this.cargarDias(),this.cargarProveedores(),this.migrarProveedoresExistentes(),this.cargarEmbarque()]),await this.aplicarSeleccionDia()},watch:{"$route.query.fecha"(e,a){console.log("Detectado cambio en query.fecha:",{nuevaFecha:e,fechaAnterior:a}),e!==a&&this.dias.length>0&&this.aplicarSeleccionDia()},async"$route.query.embarqueId"(e){this.embarqueId=e,console.log("Embarque ID actualizado:",e),e&&await this.cargarEmbarque()}}},d=n,c=(t("45d1"),t("2877")),u=Object(c["a"])(d,i,o,!1,null,"b9aee62c",null);a["a"]=u.exports},cc985:function(e,a,t){"use strict";t("14d9");var i=function(){var e=this,a=e._self._c;return a("div",{staticClass:"pedidos-crudo-container"},[a("h2",[e._v("Pedido de CamarÃ³n Crudo")]),a("div",{staticClass:"fecha-container"},[a("label",{attrs:{for:"fecha"}},[e._v("Fecha:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fecha,expression:"fecha"}],attrs:{type:"date",id:"fecha",required:"",max:e.fechaMaxima},domProps:{value:e.fecha},on:{input:function(a){a.target.composing||(e.fecha=a.target.value)}}})]),a("div",{staticClass:"agregar-columna"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.nuevaColumna,expression:"nuevaColumna"}],staticClass:"input-nueva-columna",attrs:{type:"text",placeholder:"Nombre de nueva columna"},domProps:{value:e.nuevaColumna},on:{input:function(a){a.target.composing||(e.nuevaColumna=a.target.value)}}}),a("button",{staticClass:"btn-agregar-columna",on:{click:e.agregarColumna}},[e._v(" Agregar Columna ")])]),a("div",{staticClass:"tabla-pedidos"},[a("table",[a("thead",[a("tr",[a("th",[e._v("Cliente")]),e._l(e.columnas,(function(t){return a("th",{key:t},[e._v(" "+e._s(t)+" "),e.columnasBase.includes(t)?e._e():a("span",{staticClass:"eliminar-columna",on:{click:function(a){return e.eliminarColumna(t)}}},[e._v(" Ã— ")])])}))],2)]),a("tbody",[e._l(e.clientes,(function(t,i){return a("tr",{key:i},[a("td",{class:"cliente-"+t.toLowerCase()},[e._v(e._s(t))]),e._l(e.columnas,(function(i){return a("td",{key:i},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.pedidos[t][i.toLowerCase()],expression:"pedidos[cliente][columna.toLowerCase()]",modifiers:{number:!0}}],staticClass:"numero-input",class:"cliente-"+t.toLowerCase(),attrs:{type:"number",placeholder:""},domProps:{value:e.pedidos[t][i.toLowerCase()]},on:{input:[function(a){a.target.composing||e.$set(e.pedidos[t],i.toLowerCase(),e._n(a.target.value))},function(a){return e.handleInputChange(t,i,a)}],blur:function(a){return e.$forceUpdate()}}})])}))],2)})),a("tr",{staticClass:"fila-totales"},[e._m(0),e._l(e.columnas,(function(t){return a("td",{key:t+"-total"},[e._v(" "+e._s(e.totalesColumnas[t.toLowerCase()]||0)+" ")])}))],2)],2)])]),a("div",{staticClass:"kilos-info"},[a("h3",[e._v("Total Kilos de Crudo: "),a("span",[e._v(e._s(Math.floor(e.kilosCrudo))+" kg")])]),a("h3",[e._v("Total Taras de Crudo: "),a("span",[e._v(e._s(Math.floor(e.tarasCrudo))+" T")])])]),a("div",{staticClass:"buttons-container"},[a("button",{staticClass:"btn-guardar",on:{click:e.guardarPedido}},[e._v("Guardar Pedido")]),a("button",{staticClass:"btn-imprimir",on:{click:e.imprimirPedido}},[e._v("Imprimir")]),a("button",{staticClass:"btn-cancelar",on:{click:function(a){return e.$router.push("/procesos/pedidos")}}},[e._v("Cancelar")])])])},o=[function(){var e=this,a=e._self._c;return a("td",[a("strong",[e._v("Total")])])}],s=(t("13d5"),t("dc59")),r=t("1494"),l={name:"PedidosCrudo",data(){return{fecha:(new Date).toISOString().split("T")[0],clientes:["8a","Catarro","Otilio","Ozuna","Veronica"],columnasBase:["Med","Med-Esp","Med-gde","Gde","Extra"],columnasAdicionales:[],nuevaColumna:"",pedidos:{},barcosPorPedido:{},isEditing:!1,pedidoId:null}},computed:{fechaMinima(){const e=new Date;return e.toISOString().split("T")[0]},fechaMaxima(){const e=new Date;return e.setMonth(e.getMonth()+3),e.toISOString().split("T")[0]},columnas(){return[...this.columnasBase,...this.columnasAdicionales]},kilosCrudo(){let e=0;for(const a in this.pedidos)for(const t in this.pedidos[a]){const i=this.pedidos[a][t];i&&!isNaN(i)&&(e+=parseFloat(i))}return 19*e},totalesColumnas(){const e={};return this.columnas.forEach(a=>{const t=a.toLowerCase();e[t]=this.clientes.reduce((e,a)=>{if(!this.pedidos[a]||!this.pedidos[a][t])return e;const i=parseFloat(this.pedidos[a][t])||0;return e+i},0)}),e},tarasCrudo(){return this.kilosCrudo/19}},methods:{normalizarNombreColumna(e){return e.toLowerCase()},handleInputChange(e,a,t){const i=t.target.value,o=a.toLowerCase();""!==i&&null!==i&&void 0!==i||this.$set(this.pedidos[e],o,"")},agregarColumna(){if(!this.nuevaColumna.trim())return void alert("Por favor ingresa un nombre para la columna");const e=this.nuevaColumna.trim();if(this.columnas.includes(e))return void alert("Esta columna ya existe");this.columnasAdicionales.push(e);const a=this.normalizarNombreColumna(e);this.clientes.forEach(e=>{this.$set(this.pedidos[e],a,""),this.$set(this.barcosPorPedido[e],a,"")}),this.nuevaColumna=""},eliminarColumna(e){const a=this.columnasAdicionales.indexOf(e);if(a>-1){this.columnasAdicionales.splice(a,1);const t=this.normalizarNombreColumna(e);this.clientes.forEach(e=>{this.$delete(this.pedidos[e],t)})}},clientesConPedidoPorMedida(e){return this.clientes.filter(a=>{const t=this.pedidos[a][e.toLowerCase()];return t&&t>0})},async guardarPedido(){try{let e=!1;for(const i in this.pedidos){for(const a in this.pedidos[i]){const t=this.pedidos[i][a];if(t&&!isNaN(t)&&parseFloat(t)>0){e=!0;break}}if(e)break}if(!e)return void alert("Por favor ingresa al menos un pedido antes de guardar");const a={};for(const i in this.pedidos){a[i]={};for(const e in this.pedidos[i]){const t=this.pedidos[i][e];a[i][e]=t&&!isNaN(t)?parseFloat(t):0}}const t={fecha:this.fecha,pedidos:a,barcosPorPedido:this.barcosPorPedido,columnas:this.columnas,columnasAdicionales:this.columnasAdicionales,tipo:"crudo",kilos:Math.floor(this.kilosCrudo),taras:Math.floor(this.tarasCrudo),createdAt:r["a"].now()};if(console.log("Guardando pedido:",t),this.isEditing&&this.pedidoId){const e=Object(r["e"])(s["a"],"pedidos",this.pedidoId);await Object(r["s"])(e,t),alert("Pedido actualizado exitosamente")}else await Object(r["b"])(Object(r["c"])(s["a"],"pedidos"),t),alert("Pedido guardado exitosamente");this.$router.push("/procesos/pedidos")}catch(e){console.error("Error al guardar el pedido:",e),alert(`Error al guardar el pedido: ${e.message}. Por favor intente nuevamente.`)}},async cargarPedido(e){try{const t=Object(r["e"])(s["a"],"pedidos",e),i=await Object(r["f"])(t);if(i.exists()){var a;const e=i.data();if(console.log("Cargando pedido:",e),this.fecha=e.fecha,this.columnasAdicionales=e.columnasAdicionales||(null===(a=e.columnas)||void 0===a?void 0:a.filter(e=>!this.columnasBase.includes(e)))||[],this.clientes.forEach(e=>{const a={};this.columnasBase.forEach(e=>{const t=this.normalizarNombreColumna(e);a[t]=""}),this.columnasAdicionales.forEach(e=>{const t=this.normalizarNombreColumna(e);a[t]=""}),this.$set(this.pedidos,e,a)}),e.pedidos)for(const a in e.pedidos)if(this.pedidos[a])for(const t in e.pedidos[a]){const i=e.pedidos[a][t];this.$set(this.pedidos[a],t,i&&i>0?i:"")}this.barcosPorPedido=e.barcosPorPedido||this.initializeBarcosPorPedido()}else alert("El pedido no existe"),this.$router.push("/procesos/pedidos")}catch(t){console.error("Error al cargar el pedido:",t),alert("Error al cargar el pedido"),this.$router.push("/procesos/pedidos")}},initializeBarcosPorPedido(){const e={};return this.clientes.forEach(a=>{e[a]={}}),e},imprimirPedido(){const e={};for(const a in this.pedidos){let t=!1;for(const e in this.pedidos[a]){const i=this.pedidos[a][e];if(i&&!isNaN(i)&&parseFloat(i)>0){t=!0;break}}t&&(e[a]=this.pedidos[a])}this.$router.push({name:"PedidoCrudosImpresion",params:{fecha:this.fecha,pedidos:e,columnas:this.columnas}})}},created(){this.clientes.forEach(e=>{const a={};this.columnasBase.forEach(e=>{const t=this.normalizarNombreColumna(e);a[t]=""}),this.$set(this.pedidos,e,a)}),this.clientes.forEach(e=>{this.$set(this.barcosPorPedido,e,{})});const{edit:e,id:a}=this.$route.query;"true"===e&&a&&(this.isEditing=!0,this.pedidoId=a,this.cargarPedido(a))}},n=l,d=(t("e2b8"),t("2877")),c=Object(d["a"])(n,i,o,!1,null,"71994986",null);a["a"]=c.exports},d248:function(e,a,t){"use strict";t("be6e")},d918:function(e,a,t){"use strict";t("14d9");var i=function(){var e=this,a=e._self._c;return a("div",[e.mostrarImpresion?a("PedidoLimpioImpresion",{attrs:{fecha:e.fecha,id:e.pedidoId,pedidoOtilio:e.pedidoOtilio,pedidoCatarro:e.pedidoCatarro,pedidoJoselito:e.pedidoJoselito,pedidoLorena:e.pedidoLorena,pedidoOzuna:e.pedidoOzuna,clientesTemporales:e.clientesTemporales,rendimientosGuardados:e.rendimientosGuardados,divisoresGuardados:e.divisoresGuardados,completadosGuardados:e.completadosGuardados,kilosRefrigeradosGuardados:e.kilosRefrigeradosGuardados},on:{"actualizar-rendimientos":e.actualizarRendimientos,"actualizar-divisores":e.actualizarDivisores,"actualizar-completados":e.actualizarCompletados,"actualizar-kilos-refrigerados":e.actualizarKilosRefrigerados,volver:function(a){e.mostrarImpresion=!1}}}):a("div",{staticClass:"pedidos-limpio-container"},[a("h2",[e._v("Pedido de CamarÃ³n Limpio")]),a("div",{staticClass:"header-container"},[a("div",{staticClass:"volver-container"},[a("button",{staticClass:"btn-volver",on:{click:function(a){return e.$router.push("/procesos/pedidos")}}},[a("i",{staticClass:"fas fa-arrow-left"}),e._v(" Volver ")])]),a("div",{staticClass:"fecha-container"},[a("label",{attrs:{for:"fecha"}},[e._v("Fecha:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fecha,expression:"fecha"}],attrs:{type:"date",id:"fecha",required:"",max:e.fechaMaxima},domProps:{value:e.fecha},on:{input:function(a){a.target.composing||(e.fecha=a.target.value)}}})]),a("div",{staticClass:"totales-generales"},[a("div",{staticClass:"total-item"},[a("span",{staticClass:"total-label"},[e._v("Total Taras:")]),a("span",{staticClass:"total-value"},[e._v(e._s(e.totalesGenerales.tarasTotal)+" T")])]),a("div",{staticClass:"total-item"},[a("span",{staticClass:"total-label"},[e._v("Total Kilos:")]),a("span",{staticClass:"total-value"},[e._v(e._s(e.totalesGenerales.kilosTotal)+" kg")])])]),a("MedidasModal",{on:{"medidas-actualizadas":e.actualizarMedidas}})],1),a("div",{staticClass:"tabs-container"},[e._l(e.clientes,(function(t){return a("div",{key:t.id,staticClass:"tab-wrapper"},[a("button",{class:["tab-button",{active:e.clienteActivo===t.id}],attrs:{"data-cliente":t.id},on:{click:function(a){e.clienteActivo=t.id}}},[e._v(" "+e._s(t.nombre)+" ")]),"otilio"===t.id?a("div",{staticClass:"tab-totales"},[a("div",[e._v("Taras: "+e._s(e.calculosOtilio.tarasTotal)+" T")]),a("div",[e._v("Kilos: "+e._s(e.calculosOtilio.kilosTotal)+" kg")])]):e._e(),"catarro"===t.id?a("div",{staticClass:"tab-totales"},[a("div",[e._v("Taras: "+e._s(e.calculosCatarro.tarasTotal)+" T")]),a("div",[e._v("Kilos: "+e._s(e.calculosCatarro.kilosTotal)+" kg")])]):e._e(),"joselito"===t.id?a("div",{staticClass:"tab-totales"},[a("div",[e._v("Taras: "+e._s(e.calculosJoselito.tarasTotal)+" T")]),a("div",[e._v("Kilos: "+e._s(e.calculosJoselito.kilosTotal)+" kg")])]):e._e(),"lorena"===t.id?a("div",{staticClass:"tab-totales"},[a("div",[e._v("Taras: "+e._s(e.calculosLorena.tarasTotal)+" T")]),a("div",[e._v("Kilos: "+e._s(e.calculosLorena.kilosTotal)+" kg")])]):e._e(),"ozuna"===t.id?a("div",{staticClass:"tab-totales"},[a("div",[e._v("Taras: "+e._s(e.calculosOzuna.tarasTotal)+" T")]),a("div",[e._v("Kilos: "+e._s(e.calculosOzuna.kilosTotal)+" kg")])]):e._e()])})),e._l(e.clientesTemporales,(function(t,i){return a("div",{key:i,staticClass:"tab-wrapper"},[a("div",{staticClass:"tab-cliente-container"},[a("button",{class:["tab-button temporal",{active:e.clienteActivo===t.id}],on:{click:function(a){e.clienteActivo=t.id}}},[e._v(" "+e._s(t.nombre)+" ")]),a("button",{staticClass:"btn-eliminar-cliente",attrs:{title:"Eliminar cliente"},on:{click:function(a){return e.confirmarEliminarCliente(t.id,t.nombre)}}},[a("i",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"tab-totales"},[a("div",[e._v("Taras: "+e._s(e.calcularTotalesTemporales(t.id).tarasTotal)+" T")]),a("div",[e._v("Kilos: "+e._s(e.calcularTotalesTemporales(t.id).kilosTotal)+" kg")])])])})),a("div",{staticClass:"tab-wrapper"},[a("button",{staticClass:"tab-button nuevo-cliente",on:{click:function(a){e.mostrarModalNuevoCliente=!0}}},[e._v(" + Nuevo Cliente ")])])],2),a("div",{staticClass:"clientes-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"otilio"===e.clienteActivo,expression:"clienteActivo === 'otilio'"}],staticClass:"cliente-seccion"},[a("button",{staticClass:"btn-agregar",class:{"bg-otilio":"otilio"===e.clienteActivo,"bg-catarro":"catarro"===e.clienteActivo,"bg-joselito":"joselito"===e.clienteActivo,"bg-lorena":"lorena"===e.clienteActivo,"bg-ozuna":"ozuna"===e.clienteActivo,"bg-temporal":e.isClienteTemporal(e.clienteActivo)},on:{click:e.agregarFilaOtilio}},[e._v(" + Agregar Fila ")]),a("div",{staticClass:"pedido-grid"},e._l(e.pedidoOtilio,(function(t,i){return a("div",{key:i,staticClass:"pedido-item"},[a("div",{staticClass:"input-row"},[a("div",{staticClass:"input-group-compact kilos"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Kilos:")]),a("div",{staticClass:"tara-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.esTara,expression:"item.esTara"}],attrs:{type:"checkbox",id:"tara"+i},domProps:{checked:Array.isArray(t.esTara)?e._i(t.esTara,null)>-1:t.esTara},on:{change:function(a){var i=t.esTara,o=a.target,s=!!o.checked;if(Array.isArray(i)){var r=null,l=e._i(i,r);o.checked?l<0&&e.$set(t,"esTara",i.concat([r])):l>-1&&e.$set(t,"esTara",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t,"esTara",s)}}}),a("label",{attrs:{for:"tara"+i}},[e._v("T")])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.kilos,expression:"item.kilos"}],staticClass:"input-field",attrs:{type:"number"},domProps:{value:t.kilos},on:{input:function(a){a.target.composing||e.$set(t,"kilos",a.target.value)}}})]),a("div",{staticClass:"input-group-compact medida"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Medida:")]),a("button",{staticClass:"btn-proveedor",class:{active:t.esProveedor},attrs:{title:t.proveedor||"Agregar proveedor"},on:{click:function(a){return e.abrirModalProveedor(t)}}},[e._v(" P ")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.medida,expression:"item.medida"}],staticClass:"input-field",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"medida",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),e._l(e.medidasOrdenadas,(function(t){return a("option",{key:t.id,domProps:{value:t.nombre}},[e._v(" "+e._s(t.nombre)+" ")])}))],2)]),a("div",{staticClass:"input-group-compact tipo"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Tipo:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.nota,expression:"item.nota"}],staticClass:"input-field-notas",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"nota",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Notas")]),a("option",{attrs:{value:"Sellado"}},[e._v("Sellado")]),a("option",{attrs:{value:"Kileado"}},[e._v("Kileado")])])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tipo,expression:"item.tipo"}],staticClass:"input-field",class:{"text-blue":"C/H20"===t.tipo},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"tipo",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),a("option",{attrs:{value:"S/H20"}},[e._v("S/H20")]),a("option",{staticClass:"text-blue",attrs:{value:"C/H20"}},[e._v("C/H20")])])]),e.pedidoOtilio.length>1?a("button",{staticClass:"btn-eliminar",on:{click:function(a){return e.eliminarPedidoOtilio(i)}}},[a("i",{staticClass:"fas fa-trash"})]):e._e()])])})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"catarro"===e.clienteActivo,expression:"clienteActivo === 'catarro'"}],staticClass:"cliente-seccion"},[a("button",{staticClass:"btn-agregar",class:{"bg-otilio":"otilio"===e.clienteActivo,"bg-catarro":"catarro"===e.clienteActivo,"bg-joselito":"joselito"===e.clienteActivo,"bg-lorena":"lorena"===e.clienteActivo,"bg-ozuna":"ozuna"===e.clienteActivo,"bg-temporal":e.isClienteTemporal(e.clienteActivo)},on:{click:e.agregarFilaCatarro}},[e._v(" + Agregar Fila ")]),a("div",{staticClass:"pedido-grid"},e._l(e.pedidoCatarro,(function(t,i){return a("div",{key:i,staticClass:"pedido-item"},[a("div",{staticClass:"input-row"},[a("div",{staticClass:"input-group-compact kilos"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Kilos:")]),a("div",{staticClass:"tara-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.esTara,expression:"item.esTara"}],attrs:{type:"checkbox",id:"tara"+i},domProps:{checked:Array.isArray(t.esTara)?e._i(t.esTara,null)>-1:t.esTara},on:{change:function(a){var i=t.esTara,o=a.target,s=!!o.checked;if(Array.isArray(i)){var r=null,l=e._i(i,r);o.checked?l<0&&e.$set(t,"esTara",i.concat([r])):l>-1&&e.$set(t,"esTara",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t,"esTara",s)}}}),a("label",{attrs:{for:"tara"+i}},[e._v("T")])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.kilos,expression:"item.kilos"}],staticClass:"input-field",attrs:{type:"number"},domProps:{value:t.kilos},on:{input:function(a){a.target.composing||e.$set(t,"kilos",a.target.value)}}})]),a("div",{staticClass:"input-group-compact medida"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Medida:")]),a("button",{staticClass:"btn-proveedor",class:{active:t.esProveedor},attrs:{title:t.proveedor||"Agregar proveedor"},on:{click:function(a){return e.abrirModalProveedor(t)}}},[e._v(" P ")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.medida,expression:"item.medida"}],staticClass:"input-field",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"medida",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),e._l(e.medidasOrdenadas,(function(t){return a("option",{key:t.id,domProps:{value:t.nombre}},[e._v(" "+e._s(t.nombre)+" ")])}))],2)]),a("div",{staticClass:"input-group-compact tipo"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Tipo:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.nota,expression:"item.nota"}],staticClass:"input-field-notas",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"nota",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Notas")]),a("option",{attrs:{value:"Sellado"}},[e._v("Sellado")]),a("option",{attrs:{value:"Kileado"}},[e._v("Kileado")])])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tipo,expression:"item.tipo"}],staticClass:"input-field",class:{"text-blue":"C/H20"===t.tipo},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"tipo",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),a("option",{attrs:{value:"S/H20"}},[e._v("S/H20")]),a("option",{staticClass:"text-blue",attrs:{value:"C/H20"}},[e._v("C/H20")])])]),e.pedidoCatarro.length>1?a("button",{staticClass:"btn-eliminar",on:{click:function(a){return e.eliminarPedidoCatarro(i)}}},[a("i",{staticClass:"fas fa-trash"})]):e._e()])])})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"joselito"===e.clienteActivo,expression:"clienteActivo === 'joselito'"}],staticClass:"cliente-seccion"},[a("button",{staticClass:"btn-agregar",class:{"bg-otilio":"otilio"===e.clienteActivo,"bg-catarro":"catarro"===e.clienteActivo,"bg-joselito":"joselito"===e.clienteActivo,"bg-lorena":"lorena"===e.clienteActivo,"bg-ozuna":"ozuna"===e.clienteActivo,"bg-temporal":e.isClienteTemporal(e.clienteActivo)},on:{click:e.agregarFilaJoselito}},[e._v(" + Agregar Fila ")]),a("div",{staticClass:"pedido-grid"},e._l(e.pedidoJoselito,(function(t,i){return a("div",{key:i,staticClass:"pedido-item"},[a("div",{staticClass:"input-row"},[a("div",{staticClass:"input-group-compact kilos"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Kilos:")]),a("div",{staticClass:"tara-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.esTara,expression:"item.esTara"}],attrs:{type:"checkbox",id:"tara"+i},domProps:{checked:Array.isArray(t.esTara)?e._i(t.esTara,null)>-1:t.esTara},on:{change:function(a){var i=t.esTara,o=a.target,s=!!o.checked;if(Array.isArray(i)){var r=null,l=e._i(i,r);o.checked?l<0&&e.$set(t,"esTara",i.concat([r])):l>-1&&e.$set(t,"esTara",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t,"esTara",s)}}}),a("label",{attrs:{for:"tara"+i}},[e._v("T")])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.kilos,expression:"item.kilos"}],staticClass:"input-field",attrs:{type:"number"},domProps:{value:t.kilos},on:{input:function(a){a.target.composing||e.$set(t,"kilos",a.target.value)}}})]),a("div",{staticClass:"input-group-compact medida"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Medida:")]),a("button",{staticClass:"btn-proveedor",class:{active:t.esProveedor},attrs:{title:t.proveedor||"Agregar proveedor"},on:{click:function(a){return e.abrirModalProveedor(t)}}},[e._v(" P ")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.medida,expression:"item.medida"}],staticClass:"input-field",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"medida",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),e._l(e.medidasOrdenadas,(function(t){return a("option",{key:t.id,domProps:{value:t.nombre}},[e._v(" "+e._s(t.nombre)+" ")])}))],2)]),a("div",{staticClass:"input-group-compact tipo"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Tipo:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.nota,expression:"item.nota"}],staticClass:"input-field-notas",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"nota",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Notas")]),a("option",{attrs:{value:"Sellado"}},[e._v("Sellado")]),a("option",{attrs:{value:"Kileado"}},[e._v("Kileado")])])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tipo,expression:"item.tipo"}],staticClass:"input-field",class:{"text-blue":"C/H20"===t.tipo||"1.35 y .15"===t.tipo||"1.5 y .3"===t.tipo},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"tipo",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),a("option",{attrs:{value:"S/H20"}},[e._v("S/H20")]),a("option",{staticClass:"text-blue",attrs:{value:"C/H20"}},[e._v("C/H20")]),a("option",{staticClass:"text-blue",attrs:{value:"1.35 y .15"}},[e._v("1.35 y .15")]),a("option",{staticClass:"text-blue",attrs:{value:"1.5 y .3"}},[e._v("1.5 y .3")])])]),e.pedidoJoselito.length>1?a("button",{staticClass:"btn-eliminar",on:{click:function(a){return e.eliminarPedidoJoselito(i)}}},[a("i",{staticClass:"fas fa-trash"})]):e._e()])])})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"lorena"===e.clienteActivo,expression:"clienteActivo === 'lorena'"}],staticClass:"cliente-seccion"},[a("button",{staticClass:"btn-agregar",class:{"bg-otilio":"otilio"===e.clienteActivo,"bg-catarro":"catarro"===e.clienteActivo,"bg-joselito":"joselito"===e.clienteActivo,"bg-lorena":"lorena"===e.clienteActivo,"bg-ozuna":"ozuna"===e.clienteActivo,"bg-temporal":e.isClienteTemporal(e.clienteActivo)},on:{click:e.agregarFilaLorena}},[e._v(" + Agregar Fila ")]),a("div",{staticClass:"pedido-grid"},e._l(e.pedidoLorena,(function(t,i){return a("div",{key:i,staticClass:"pedido-item"},[a("div",{staticClass:"input-row"},[a("div",{staticClass:"input-group-compact kilos"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Kilos:")]),a("div",{staticClass:"tara-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.esTara,expression:"item.esTara"}],attrs:{type:"checkbox",id:"tara"+i},domProps:{checked:Array.isArray(t.esTara)?e._i(t.esTara,null)>-1:t.esTara},on:{change:function(a){var i=t.esTara,o=a.target,s=!!o.checked;if(Array.isArray(i)){var r=null,l=e._i(i,r);o.checked?l<0&&e.$set(t,"esTara",i.concat([r])):l>-1&&e.$set(t,"esTara",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t,"esTara",s)}}}),a("label",{attrs:{for:"tara"+i}},[e._v("T")])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.kilos,expression:"item.kilos"}],staticClass:"input-field",attrs:{type:"number"},domProps:{value:t.kilos},on:{input:function(a){a.target.composing||e.$set(t,"kilos",a.target.value)}}})]),a("div",{staticClass:"input-group-compact medida"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Medida:")]),a("button",{staticClass:"btn-proveedor",class:{active:t.esProveedor},attrs:{title:t.proveedor||"Agregar proveedor"},on:{click:function(a){return e.abrirModalProveedor(t)}}},[e._v(" P ")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.medida,expression:"item.medida"}],staticClass:"input-field",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"medida",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),e._l(e.medidasOrdenadas,(function(t){return a("option",{key:t.id,domProps:{value:t.nombre}},[e._v(" "+e._s(t.nombre)+" ")])}))],2)]),a("div",{staticClass:"input-group-compact tipo"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Tipo:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.nota,expression:"item.nota"}],staticClass:"input-field-notas",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"nota",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Notas")]),a("option",{attrs:{value:"Sellado"}},[e._v("Sellado")]),a("option",{attrs:{value:"Kileado"}},[e._v("Kileado")])])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tipo,expression:"item.tipo"}],staticClass:"input-field",class:{"text-blue":"C/H20"===t.tipo||"1.35 y .15"===t.tipo||"1.5 y .3"===t.tipo},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"tipo",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),a("option",{attrs:{value:"S/H20"}},[e._v("S/H20")]),a("option",{staticClass:"text-blue",attrs:{value:"C/H20"}},[e._v("C/H20")]),a("option",{staticClass:"text-blue",attrs:{value:"1.35 y .15"}},[e._v("1.35 y .15")]),a("option",{staticClass:"text-blue",attrs:{value:"1.5 y .3"}},[e._v("1.5 y .3")])])]),e.pedidoLorena.length>1?a("button",{staticClass:"btn-eliminar",on:{click:function(a){return e.eliminarPedidoLorena(i)}}},[a("i",{staticClass:"fas fa-trash"})]):e._e()])])})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"ozuna"===e.clienteActivo,expression:"clienteActivo === 'ozuna'"}],staticClass:"cliente-seccion"},[a("button",{staticClass:"btn-agregar",class:{"bg-otilio":"otilio"===e.clienteActivo,"bg-catarro":"catarro"===e.clienteActivo,"bg-joselito":"joselito"===e.clienteActivo,"bg-lorena":"lorena"===e.clienteActivo,"bg-ozuna":"ozuna"===e.clienteActivo,"bg-temporal":e.isClienteTemporal(e.clienteActivo)},on:{click:e.agregarFilaOzuna}},[e._v(" + Agregar Fila ")]),a("div",{staticClass:"pedido-grid"},e._l(e.pedidoOzuna,(function(t,i){return a("div",{key:i,staticClass:"pedido-item"},[a("div",{staticClass:"input-row"},[a("div",{staticClass:"input-group-compact kilos"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Kilos:")]),a("div",{staticClass:"tara-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.esTara,expression:"item.esTara"}],attrs:{type:"checkbox",id:"tara"+i},domProps:{checked:Array.isArray(t.esTara)?e._i(t.esTara,null)>-1:t.esTara},on:{change:function(a){var i=t.esTara,o=a.target,s=!!o.checked;if(Array.isArray(i)){var r=null,l=e._i(i,r);o.checked?l<0&&e.$set(t,"esTara",i.concat([r])):l>-1&&e.$set(t,"esTara",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t,"esTara",s)}}}),a("label",{attrs:{for:"tara"+i}},[e._v("T")])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.kilos,expression:"item.kilos"}],staticClass:"input-field",attrs:{type:"number"},domProps:{value:t.kilos},on:{input:function(a){a.target.composing||e.$set(t,"kilos",a.target.value)}}})]),a("div",{staticClass:"input-group-compact medida"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Medida:")]),a("button",{staticClass:"btn-proveedor",class:{active:t.esProveedor},attrs:{title:t.proveedor||"Agregar proveedor"},on:{click:function(a){return e.abrirModalProveedor(t)}}},[e._v(" P ")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.medida,expression:"item.medida"}],staticClass:"input-field",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"medida",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),e._l(e.medidasOrdenadas,(function(t){return a("option",{key:t.id,domProps:{value:t.nombre}},[e._v(" "+e._s(t.nombre)+" ")])}))],2)]),a("div",{staticClass:"input-group-compact tipo"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Tipo:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.nota,expression:"item.nota"}],staticClass:"input-field-notas",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"nota",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Notas")]),a("option",{attrs:{value:"Sellado"}},[e._v("Sellado")]),a("option",{attrs:{value:"Kileado"}},[e._v("Kileado")])])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tipo,expression:"item.tipo"}],staticClass:"input-field",class:{"text-blue":"C/H20"===t.tipo},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(t,"tipo",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),a("option",{attrs:{value:"S/H20"}},[e._v("S/H20")]),a("option",{staticClass:"text-blue",attrs:{value:"C/H20"}},[e._v("C/H20")]),a("option",{attrs:{value:".7 y .3"}},[e._v(".7 y .3")])])]),"ozuna"===e.clienteActivo?a("div",{staticClass:"input-group-compact maquila"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Maquila:")]),a("div",{staticClass:"maquila-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.esMaquila,expression:"item.esMaquila"}],attrs:{type:"checkbox",id:"maquila"+i},domProps:{checked:Array.isArray(t.esMaquila)?e._i(t.esMaquila,null)>-1:t.esMaquila},on:{change:function(a){var i=t.esMaquila,o=a.target,s=!!o.checked;if(Array.isArray(i)){var r=null,l=e._i(i,r);o.checked?l<0&&e.$set(t,"esMaquila",i.concat([r])):l>-1&&e.$set(t,"esMaquila",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t,"esMaquila",s)}}})])])]):e._e(),e.pedidoOzuna.length>1?a("button",{staticClass:"btn-eliminar",on:{click:function(a){return e.eliminarPedidoOzuna(i)}}},[a("i",{staticClass:"fas fa-trash"})]):e._e()])])})),0)]),e._l(e.clientesTemporales,(function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.clienteActivo===t.id,expression:"clienteActivo === cliente.id"}],key:i,staticClass:"cliente-seccion"},[a("button",{staticClass:"btn-agregar",class:{"bg-otilio":"otilio"===e.clienteActivo,"bg-catarro":"catarro"===e.clienteActivo,"bg-joselito":"joselito"===e.clienteActivo,"bg-ozuna":"ozuna"===e.clienteActivo,"bg-temporal":e.isClienteTemporal(e.clienteActivo)},on:{click:function(a){return e.agregarFilaTemporal(t.id)}}},[e._v(" + Agregar Fila ")]),a("div",{staticClass:"pedido-grid"},e._l(t.pedidos,(function(i,o){return a("div",{key:o,staticClass:"pedido-item"},[a("div",{staticClass:"input-row"},[a("div",{staticClass:"input-group-compact kilos"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Kilos:")]),a("div",{staticClass:"tara-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:i.esTara,expression:"item.esTara"}],attrs:{type:"checkbox",id:"tara"+t.id+o},domProps:{checked:Array.isArray(i.esTara)?e._i(i.esTara,null)>-1:i.esTara},on:{change:function(a){var t=i.esTara,o=a.target,s=!!o.checked;if(Array.isArray(t)){var r=null,l=e._i(t,r);o.checked?l<0&&e.$set(i,"esTara",t.concat([r])):l>-1&&e.$set(i,"esTara",t.slice(0,l).concat(t.slice(l+1)))}else e.$set(i,"esTara",s)}}}),a("label",{attrs:{for:"tara"+t.id+o}},[e._v("T")])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:i.kilos,expression:"item.kilos"}],staticClass:"input-field",attrs:{type:"number"},domProps:{value:i.kilos},on:{input:function(a){a.target.composing||e.$set(i,"kilos",a.target.value)}}})]),a("div",{staticClass:"input-group-compact medida"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Medida:")]),a("button",{staticClass:"btn-proveedor",class:{active:i.esProveedor},attrs:{title:i.proveedor||"Agregar proveedor"},on:{click:function(a){return e.abrirModalProveedor(i)}}},[e._v(" P ")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:i.medida,expression:"item.medida"}],staticClass:"input-field",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(i,"medida",a.target.multiple?t:t[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),e._l(e.medidasOrdenadas,(function(t){return a("option",{key:t.id,domProps:{value:t.nombre}},[e._v(" "+e._s(t.nombre)+" ")])}))],2)]),a("div",{staticClass:"input-group-compact tipo"},[a("div",{staticClass:"label-container"},[a("label",[e._v("Tipo:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:i.nota,expression:"item.nota"}],staticClass:"input-field-notas",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(i,"nota",a.target.multiple?t:t[0])}}},[a("option",{attrs:{value:""}},[e._v("Notas")]),a("option",{attrs:{value:"Sellado"}},[e._v("Sellado")]),a("option",{attrs:{value:"Kileado"}},[e._v("Kileado")])])]),a("select",{directives:[{name:"model",rawName:"v-model",value:i.tipo,expression:"item.tipo"}],staticClass:"input-field",class:{"text-blue":"C/H20"===i.tipo||"1.35 y .15"===i.tipo||"1.5 y .3"===i.tipo},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(i,"tipo",a.target.multiple?t:t[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),a("option",{attrs:{value:"S/H20"}},[e._v("S/H20")]),a("option",{staticClass:"text-blue",attrs:{value:"C/H20"}},[e._v("C/H20")]),a("option",{staticClass:"text-blue",attrs:{value:"1.35 y .15"}},[e._v("1.35 y .15")]),a("option",{staticClass:"text-blue",attrs:{value:"1.5 y .3"}},[e._v("1.5 y .3")]),a("option",{attrs:{value:".9 y .1"}},[e._v(".9 y .1")]),a("option",{attrs:{value:".9"}},[e._v(".9")])])]),a("div",{staticClass:"input-group-compact operacion"},[e._m(0,!0),a("select",{directives:[{name:"model",rawName:"v-model",value:i.tipoOperacion,expression:"item.tipoOperacion"}],staticClass:"input-field",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(i,"tipoOperacion",a.target.multiple?t:t[0])}}},[a("option",{attrs:{value:""}},[e._v("Seleccionar")]),a("option",{attrs:{value:"Venta"}},[e._v("Venta")]),a("option",{attrs:{value:"Maquila"}},[e._v("Maquila")])])]),t.pedidos.length>1?a("button",{staticClass:"btn-eliminar",on:{click:function(a){return e.eliminarPedidoTemporal(t.id,o)}}},[a("i",{staticClass:"fas fa-trash"})]):e._e()])])})),0)])}))],2),a("div",{staticClass:"buttons-container"},[a("button",{staticClass:"btn-guardar",on:{click:e.guardarPedido}},[e._v("Guardar Pedido")]),a("button",{staticClass:"btn-imprimir",on:{click:e.mostrarVistaImpresion}},[a("i",{staticClass:"fas fa-print"}),e._v(" Vista Previa ")]),a("button",{staticClass:"btn-cancelar",on:{click:function(a){return e.$router.push("/procesos/pedidos")}}},[e._v("Cancelar")])])]),a("ProveedorModal",{attrs:{mostrar:e.mostrarModalProveedor,proveedor:e.itemSeleccionado?e.itemSeleccionado.proveedor:""},on:{cerrar:function(a){e.mostrarModalProveedor=!1},guardar:e.guardarProveedor}}),a("NuevoClienteModal",{attrs:{mostrar:e.mostrarModalNuevoCliente},on:{cerrar:function(a){e.mostrarModalNuevoCliente=!1},guardar:e.agregarClienteTemporal}})],1)},o=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"label-container"},[a("label",[e._v("OperaciÃ³n:")])])}],s=t("dc59"),r=t("1494"),l=t("92c9"),n=t("73bd"),d=t("d1d7"),c=t("0b8c"),u={name:"PedidosLimpio",components:{PedidoLimpioImpresion:l["a"],MedidasModal:n["a"],ProveedorModal:d["a"],NuevoClienteModal:c["a"]},data(){return{fecha:(new Date).toISOString().split("T")[0],pedidoOtilio:[{kilos:null,medida:"",tipo:"",esTara:!0,esProveedor:!1,proveedor:""}],pedidoCatarro:[{kilos:null,medida:"",tipo:"S/H20",esTara:!1,esProveedor:!1,proveedor:""}],pedidoJoselito:[{kilos:null,medida:"",tipo:"",esTara:!1,esProveedor:!1,proveedor:""}],pedidoOzuna:[{kilos:null,medida:"",tipo:"S/H20",esTara:!1,esProveedor:!1,proveedor:"",esMaquila:!0}],pedidoLorena:[{kilos:null,medida:"",tipo:"",esTara:!1,esProveedor:!1,proveedor:""}],clientesTemporales:{},mostrarModalNuevoCliente:!1,mostrarImpresion:!1,mostrarModalProveedor:!1,itemSeleccionado:null,medidas:[],editando:!1,pedidoId:null,clienteActivo:"otilio",clientes:[{id:"otilio",nombre:"Otilio"},{id:"catarro",nombre:"Catarro"},{id:"joselito",nombre:"Joselito"},{id:"lorena",nombre:"Lorena"},{id:"ozuna",nombre:"Ozuna"}],itemSeleccionadoNotas:null,rendimientosGuardados:{},divisoresGuardados:{},completadosGuardados:{},kilosRefrigeradosGuardados:{}}},async created(){await this.cargarMedidas();const{edit:e,id:a,fecha:t}=this.$route.query;"true"===e&&a?(this.editando=!0,this.pedidoId=a,await this.cargarPedido(a)):t&&(this.fecha=t)},computed:{fechaMaxima(){const e=new Date;return e.setMonth(e.getMonth()+3),e.toISOString().split("T")[0]},medidasOrdenadas(){const e=this.medidas.filter(e=>"especial"===e.tipo),a=this.medidas.filter(e=>"granja"===e.tipo);return e.sort((e,a)=>{const t=parseFloat(e.nombre),i=parseFloat(a.nombre);return isNaN(t)||isNaN(i)?e.nombre.localeCompare(a.nombre):t-i}),a.sort((e,a)=>{const t=parseFloat(e.nombre.split("/")[0]),i=parseFloat(a.nombre.split("/")[0]);return isNaN(t)||isNaN(i)?e.nombre.localeCompare(a.nombre):t-i}),[...e,...a]},calculosOtilio(){let e=0,a=0,t=0,i=0;this.pedidoOtilio.forEach(o=>{o.kilos&&(o.esTara?(e+=Number(o.kilos),"C/H20"===o.tipo?t+=30*Number(o.kilos)*.65:i+=30*Number(o.kilos)):"S/H20"===o.tipo?a+=Number(o.kilos):"C/H20"===o.tipo&&(t+=Number(o.kilos)))});const o=a/27,s=Math.round(e+o),r=a+i,l=Math.round(r+t);return{tarasDirectas:e.toFixed(2),tarasPorKilos:o.toFixed(2),tarasTotal:s.toString(),kilosSinH2O:Math.round(r).toString(),kilosConH2O:t.toFixed(2),kilosTotal:l.toString()}},calculosCatarro(){let e=0,a=0,t=0,i=0;this.pedidoCatarro.forEach(o=>{o.kilos&&(o.esTara?(e+=Number(o.kilos),"C/H20"===o.tipo?t+=30*Number(o.kilos)*.65:i+=30*Number(o.kilos)):"S/H20"===o.tipo?a+=Number(o.kilos):"C/H20"===o.tipo&&(t+=Number(o.kilos)))});const o=a/27,s=Math.round(e+o),r=a+i,l=Math.round(r+t);return{tarasDirectas:e.toFixed(2),tarasPorKilos:o.toFixed(2),tarasTotal:s.toString(),kilosSinH2O:Math.round(r).toString(),kilosConH2O:t.toFixed(2),kilosTotal:l.toString()}},calculosJoselito(){let e=0,a=0,t=0,i=0,o=0,s=0,r=0,l=0;this.pedidoJoselito.forEach(n=>{n.kilos&&(n.esTara?(e+=Number(n.kilos),"C/H20"===n.tipo?t+=30*Number(n.kilos)*.65:"1.35 y .15"===n.tipo?s+=30*Number(n.kilos):"1.5 y .3"===n.tipo?l+=30*Number(n.kilos):i+=30*Number(n.kilos)):"S/H20"===n.tipo?a+=Number(n.kilos):"C/H20"===n.tipo?t+=Number(n.kilos):"1.35 y .15"===n.tipo?o+=1.35*Number(n.kilos):"1.5 y .3"===n.tipo&&(r+=1.5*Number(n.kilos)))});const n=a/25,d=o/33.75,c=r/37.5,u=Math.round(e+n+d+c),p=a+i+s+l,m=Math.round(p+t+o+r);return{tarasDirectas:e.toFixed(2),tarasPorKilos:n.toFixed(2),tarasTotal:u.toString(),kilosSinH2O:Math.round(p).toString(),kilosConH2O:t.toFixed(2),kilosTotal:m.toString()}},calculosLorena(){let e=0,a=0,t=0,i=0,o=0,s=0,r=0,l=0;this.pedidoLorena.forEach(n=>{n.kilos&&(n.esTara?(e+=Number(n.kilos),"C/H20"===n.tipo?t+=30*Number(n.kilos)*.65:"1.35 y .15"===n.tipo?s+=30*Number(n.kilos):"1.5 y .3"===n.tipo?l+=30*Number(n.kilos):i+=30*Number(n.kilos)):"S/H20"===n.tipo?a+=Number(n.kilos):"C/H20"===n.tipo?t+=Number(n.kilos):"1.35 y .15"===n.tipo?o+=1.35*Number(n.kilos):"1.5 y .3"===n.tipo&&(r+=1.5*Number(n.kilos)))});const n=a/25,d=o/33.75,c=r/37.5,u=Math.round(e+n+d+c),p=a+i+s+l,m=Math.round(p+t+o+r);return{tarasDirectas:e.toFixed(2),tarasPorKilos:n.toFixed(2),tarasTotal:u.toString(),kilosSinH2O:Math.round(p).toString(),kilosConH2O:t.toFixed(2),kilosTotal:m.toString()}},calculosOzuna(){let e=0,a=0,t=0,i=0,o=0;this.pedidoOzuna.forEach(s=>{s.kilos&&(s.esTara?(e+=Number(s.kilos),"C/H20"===s.tipo?t+=30*Number(s.kilos)*.65:i+=30*Number(s.kilos)):"S/H20"===s.tipo?a+=Number(s.kilos):"C/H20"===s.tipo?t+=Number(s.kilos):".7 y .3"===s.tipo&&(o+=.7*Number(s.kilos)))});const s=a/27,r=Math.round(e+s),l=a+i,n=Math.round(l+t+o);return{tarasDirectas:e.toFixed(2),tarasPorKilos:s.toFixed(2),tarasTotal:r.toString(),kilosSinH2O:Math.round(l).toString(),kilosConH2O:t.toFixed(2),kilos7y3:o.toFixed(2),kilosTotal:n.toString()}},totalesGenerales(){let e=Math.round(Number(this.calculosOtilio.tarasTotal)+Number(this.calculosCatarro.tarasTotal)+Number(this.calculosJoselito.tarasTotal)+Number(this.calculosLorena.tarasTotal)+Number(this.calculosOzuna.tarasTotal)),a=Math.round(Number(this.calculosOtilio.kilosTotal)+Number(this.calculosCatarro.kilosTotal)+Number(this.calculosJoselito.kilosTotal)+Number(this.calculosLorena.kilosTotal)+Number(this.calculosOzuna.kilosTotal));return Object.keys(this.clientesTemporales).forEach(t=>{const i=this.calcularTotalesTemporales(t);e+=Number(i.tarasTotal),a+=Number(i.kilosTotal)}),{tarasTotal:e.toString(),kilosTotal:a.toString()}}},methods:{async cargarMedidas(){try{const e=await Object(r["g"])(Object(r["c"])(s["a"],"medidas"));this.medidas=e.docs.map(e=>({id:e.id,...e.data()}))}catch(e){console.error("Error al cargar las medidas:",e)}},async cargarPedido(e){try{const a=Object(r["e"])(s["a"],"pedidos",e),t=await Object(r["f"])(a);if(t.exists()){const e=t.data();this.fecha=e.fecha,this.pedidoOtilio=e.otilio||[],this.pedidoCatarro=e.catarro||[],this.pedidoJoselito=e.joselito||[],this.pedidoOzuna=e.ozuna||[],this.pedidoLorena=e.lorena||[],this.clientesTemporales=e.clientesTemporales||{},this.rendimientosGuardados=e.rendimientos||{},this.divisoresGuardados=e.divisores||{},this.completadosGuardados=e.completados||{},this.kilosRefrigeradosGuardados=e.kilosRefrigerados||{}}}catch(a){console.error("Error al cargar el pedido:",a),alert("Error al cargar el pedido")}},agregarFilaOtilio(){this.pedidoOtilio.unshift({kilos:null,medida:"",tipo:"",esTara:!0,esProveedor:!1,proveedor:""})},agregarFilaCatarro(){this.pedidoCatarro.unshift({kilos:null,medida:"",tipo:"S/H20",esTara:!1,esProveedor:!1,proveedor:""})},agregarFilaJoselito(){this.pedidoJoselito.unshift({kilos:null,medida:"",tipo:"",esTara:!1,esProveedor:!1,proveedor:""})},agregarFilaOzuna(){this.pedidoOzuna.unshift({kilos:null,medida:"",tipo:"S/H20",esTara:!1,esProveedor:!1,proveedor:"",esMaquila:!0})},agregarFilaLorena(){this.pedidoLorena.unshift({kilos:null,medida:"",tipo:"",esTara:!1,esProveedor:!1,proveedor:""})},async guardarPedido(){try{const e={fecha:this.fecha,tipo:"limpio",otilio:this.pedidoOtilio,catarro:this.pedidoCatarro,joselito:this.pedidoJoselito,ozuna:this.pedidoOzuna,lorena:this.pedidoLorena,clientesTemporales:this.clientesTemporales,rendimientos:this.rendimientosGuardados,divisores:this.divisoresGuardados,completados:this.completadosGuardados,kilosRefrigerados:this.kilosRefrigeradosGuardados,createdAt:r["a"].now()};this.editando&&this.pedidoId?await Object(r["s"])(Object(r["e"])(s["a"],"pedidos",this.pedidoId),e):await Object(r["b"])(Object(r["c"])(s["a"],"pedidos"),e),this.$router.push("/procesos/pedidos")}catch(e){console.error("Error al guardar el pedido:",e),alert("Error al guardar el pedido")}},async mostrarVistaImpresion(){try{const e={fecha:this.fecha,otilio:this.pedidoOtilio,catarro:this.pedidoCatarro,joselito:this.pedidoJoselito,ozuna:this.pedidoOzuna,lorena:this.pedidoLorena,clientesTemporales:this.clientesTemporales,rendimientos:this.rendimientosGuardados,divisores:this.divisoresGuardados,kilosRefrigerados:this.kilosRefrigeradosGuardados,tipo:"limpio",createdAt:this.editando?r["a"].fromDate(new Date(this.fecha)):r["a"].now()};if(this.editando&&this.pedidoId)await Object(r["s"])(Object(r["e"])(s["a"],"pedidos",this.pedidoId),e);else{const a=await Object(r["b"])(Object(r["c"])(s["a"],"pedidos"),e);this.pedidoId=a.id,this.editando=!0}this.mostrarImpresion=!0}catch(e){console.error("Error al guardar el pedido:",e)}},actualizarMedidas(e){this.medidas=e},eliminarPedidoOtilio(e){this.pedidoOtilio.splice(e,1),0===this.pedidoOtilio.length&&this.agregarFilaOtilio()},eliminarPedidoCatarro(e){this.pedidoCatarro.splice(e,1),0===this.pedidoCatarro.length&&this.agregarFilaCatarro()},eliminarPedidoJoselito(e){this.pedidoJoselito.splice(e,1),0===this.pedidoJoselito.length&&this.agregarFilaJoselito()},eliminarPedidoOzuna(e){this.pedidoOzuna.splice(e,1),0===this.pedidoOzuna.length&&this.agregarFilaOzuna()},eliminarPedidoLorena(e){this.pedidoLorena.splice(e,1),0===this.pedidoLorena.length&&this.agregarFilaLorena()},abrirModalProveedor(e){this.itemSeleccionado=e,this.mostrarModalProveedor=!0},guardarProveedor(e){this.itemSeleccionado&&(this.itemSeleccionado.proveedor=e.trim(),this.itemSeleccionado.esProveedor=""!==e.trim()),this.mostrarModalProveedor=!1,this.itemSeleccionado=null},manejarCheckboxProveedor(e){e.esProveedor?this.abrirModalProveedor(e):e.proveedor=""},abrirMenuNotas(e){this.itemSeleccionadoNotas===e?this.itemSeleccionadoNotas=null:this.itemSeleccionadoNotas=e},seleccionarNota(e,a){e.nota=a,this.itemSeleccionadoNotas=null},ordenarPedidosPorMedida(e){const a=[...e],t=a.filter(e=>e.medida&&e.tipo),i=a.filter(e=>!e.medida||!e.tipo);return t.sort((e,a)=>e.medida===a.medida?e.tipo.localeCompare(a.tipo):e.medida.localeCompare(a.medida)),[...i,...t]},isClienteTemporal(e){return!["otilio","catarro","joselito","lorena","ozuna"].includes(e)},calcularTotalesTemporales(e){var a;if(null===(a=this.clientesTemporales[e])||void 0===a||!a.pedidos)return{tarasTotal:"0",kilosTotal:"0"};let t=0,i=0,o=0,s=0,r=0,l=0,n=0,d=0;this.clientesTemporales[e].pedidos.forEach(e=>{e.kilos&&(e.esTara?(t+=Number(e.kilos),"C/H20"===e.tipo?o+=30*Number(e.kilos)*.65:"1.35 y .15"===e.tipo?l+=30*Number(e.kilos):"1.5 y .3"===e.tipo?d+=30*Number(e.kilos):s+=30*Number(e.kilos)):"S/H20"===e.tipo?i+=Number(e.kilos):"C/H20"===e.tipo?o+=Number(e.kilos):"1.35 y .15"===e.tipo?r+=1.35*Number(e.kilos):"1.5 y .3"===e.tipo&&(n+=1.5*Number(e.kilos)))});const c=i/27,u=r/33.75,p=n/37.5,m=Math.round(t+c+u+p),v=i+s+l+d,h=Math.round(v+o+r+n);return{tarasTotal:m.toString(),kilosTotal:h.toString()}},agregarClienteTemporal(e){const a={id:e.id,nombre:e.nombre,pedidos:[{kilos:null,medida:"",tipo:"",esTara:!1,esProveedor:!1,proveedor:""}]};this.$set(this.clientesTemporales,e.id,a),this.clienteActivo=e.id,this.mostrarModalNuevoCliente=!1},agregarFilaTemporal(e){this.clientesTemporales[e]&&this.clientesTemporales[e].pedidos.unshift({kilos:null,medida:"",tipo:"",esTara:!1,esProveedor:!1,proveedor:""})},eliminarPedidoTemporal(e,a){this.clientesTemporales[e]&&(this.clientesTemporales[e].pedidos.splice(a,1),0===this.clientesTemporales[e].pedidos.length&&(this.$delete(this.clientesTemporales,e),this.clienteActivo===e&&(this.clienteActivo="otilio")))},confirmarEliminarCliente(e,a){confirm(`Â¿EstÃ¡s seguro de que deseas eliminar el cliente "${a}" y todos sus pedidos?`)&&this.eliminarClienteTemporal(e)},eliminarClienteTemporal(e){this.clientesTemporales[e]&&(this.$delete(this.clientesTemporales,e),this.clienteActivo===e&&(this.clienteActivo="otilio"))},actualizarRendimientos(e){if(this.rendimientosGuardados={...e},this.editando&&this.pedidoId)Object(r["s"])(Object(r["e"])(s["a"],"pedidos",this.pedidoId),{rendimientos:this.rendimientosGuardados}).catch(e=>{console.error("Error al actualizar rendimientos:",e)});else{const e={fecha:this.fecha,tipo:"limpio",otilio:this.pedidoOtilio,catarro:this.pedidoCatarro,joselito:this.pedidoJoselito,ozuna:this.pedidoOzuna,lorena:this.pedidoLorena,clientesTemporales:this.clientesTemporales,rendimientos:this.rendimientosGuardados,divisores:this.divisoresGuardados,completados:this.completadosGuardados,kilosRefrigerados:this.kilosRefrigeradosGuardados,createdAt:r["a"].now()};Object(r["b"])(Object(r["c"])(s["a"],"pedidos"),e).then(e=>{this.editando=!0,this.pedidoId=e.id}).catch(e=>{console.error("Error al crear nuevo pedido con rendimientos:",e)})}},actualizarDivisores(e){if(this.divisoresGuardados={...e},this.editando&&this.pedidoId)Object(r["s"])(Object(r["e"])(s["a"],"pedidos",this.pedidoId),{divisores:this.divisoresGuardados}).catch(e=>{console.error("Error al actualizar divisores:",e)});else{const e={fecha:this.fecha,tipo:"limpio",otilio:this.pedidoOtilio,catarro:this.pedidoCatarro,joselito:this.pedidoJoselito,ozuna:this.pedidoOzuna,lorena:this.pedidoLorena,clientesTemporales:this.clientesTemporales,rendimientos:this.rendimientosGuardados,divisores:this.divisoresGuardados,completados:this.completadosGuardados,kilosRefrigerados:this.kilosRefrigeradosGuardados,createdAt:r["a"].now()};Object(r["b"])(Object(r["c"])(s["a"],"pedidos"),e).then(e=>{this.editando=!0,this.pedidoId=e.id}).catch(e=>{console.error("Error al crear nuevo pedido con divisores:",e)})}},actualizarCompletados(e){if(this.completadosGuardados=e,this.editando&&this.pedidoId)Object(r["s"])(Object(r["e"])(s["a"],"pedidos",this.pedidoId),{completados:e}).catch(e=>{console.error("Error al actualizar estados completados:",e)});else{const a={fecha:this.fecha,tipo:"limpio",otilio:this.pedidoOtilio,catarro:this.pedidoCatarro,joselito:this.pedidoJoselito,ozuna:this.pedidoOzuna,lorena:this.pedidoLorena,clientesTemporales:this.clientesTemporales,rendimientos:this.rendimientosGuardados,divisores:this.divisoresGuardados,completados:e,kilosRefrigerados:this.kilosRefrigeradosGuardados,createdAt:r["a"].now()};Object(r["b"])(Object(r["c"])(s["a"],"pedidos"),a).then(e=>{this.editando=!0,this.pedidoId=e.id}).catch(e=>{console.error("Error al crear nuevo pedido:",e)})}},actualizarKilosRefrigerados(e){if(this.kilosRefrigeradosGuardados={...e},this.editando&&this.pedidoId)Object(r["s"])(Object(r["e"])(s["a"],"pedidos",this.pedidoId),{kilosRefrigerados:this.kilosRefrigeradosGuardados}).catch(e=>{console.error("Error al actualizar kilos refrigerados:",e)});else{const e={fecha:this.fecha,tipo:"limpio",otilio:this.pedidoOtilio,catarro:this.pedidoCatarro,joselito:this.pedidoJoselito,ozuna:this.pedidoOzuna,clientesTemporales:this.clientesTemporales,rendimientos:this.rendimientosGuardados,divisores:this.divisoresGuardados,completados:this.completadosGuardados,kilosRefrigerados:this.kilosRefrigeradosGuardados,createdAt:r["a"].now()};Object(r["b"])(Object(r["c"])(s["a"],"pedidos"),e).then(e=>{this.editando=!0,this.pedidoId=e.id}).catch(e=>{console.error("Error al crear nuevo pedido con kilos refrigerados:",e)})}}},watch:{pedidoOtilio:{deep:!0,handler(e){const a=e.some(e=>e.medida&&e.tipo);if(a){const a=this.ordenarPedidosPorMedida(e);JSON.stringify(a)!==JSON.stringify(e)&&this.$nextTick(()=>{this.pedidoOtilio=a})}}},pedidoCatarro:{deep:!0,handler(e){const a=e.some(e=>e.medida&&e.tipo);if(a){const a=this.ordenarPedidosPorMedida(e);JSON.stringify(a)!==JSON.stringify(e)&&this.$nextTick(()=>{this.pedidoCatarro=a})}}},pedidoJoselito:{deep:!0,handler(e){const a=e.some(e=>e.medida&&e.tipo);if(a){const a=this.ordenarPedidosPorMedida(e);JSON.stringify(a)!==JSON.stringify(e)&&this.$nextTick(()=>{this.pedidoJoselito=a})}}},pedidoLorena:{deep:!0,handler(e){const a=e.some(e=>e.medida&&e.tipo);if(a){const a=this.ordenarPedidosPorMedida(e);JSON.stringify(a)!==JSON.stringify(e)&&this.$nextTick(()=>{this.pedidoLorena=a})}}},pedidoOzuna:{deep:!0,handler(e){const a=e.some(e=>e.medida&&e.tipo);if(a){const a=this.ordenarPedidosPorMedida(e);JSON.stringify(a)!==JSON.stringify(e)&&this.$nextTick(()=>{this.pedidoOzuna=a})}}}}},p=u,m=(t("ae46"),t("2877")),v=Object(m["a"])(p,i,o,!1,null,"3c358da2",null);a["a"]=v.exports},e2b8:function(e,a,t){"use strict";t("76cd")},e77e:function(e,a,t){},f125:function(e,a,t){"use strict";var i=function(){var e=this,a=e._self._c;return a("div",{staticClass:"pedidos-menu-container"},[a("h1",{staticClass:"menu-title"},[e._v("MenÃº de Pedidos")]),a("div",{staticClass:"actions-container"},[a("div",{staticClass:"nuevo-pedido-buttons"},[a("router-link",{staticClass:"action-button",attrs:{to:"/procesos/pedidos/crudo"}},[a("button",{staticClass:"btn-nuevo-pedido crudo"},[a("i",{staticClass:"fas fa-plus"}),e._v(" Nuevo Pedido Crudo ")])]),a("router-link",{staticClass:"action-button",attrs:{to:"/procesos/pedidos/limpio"}},[a("button",{staticClass:"btn-nuevo-pedido limpio"},[a("i",{staticClass:"fas fa-plus"}),e._v(" Nuevo Pedido Limpio ")])])],1)]),a("div",{staticClass:"pedidos-list"},[a("div",{staticClass:"filtros"},[a("div",{staticClass:"filtro-tipo"},[a("label",[e._v("Tipo:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filtroTipo,expression:"filtroTipo"}],on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.filtroTipo=a.target.multiple?t:t[0]}}},[a("option",{attrs:{value:"todos"}},[e._v("Todos")]),a("option",{attrs:{value:"crudo"}},[e._v("Crudo")]),a("option",{attrs:{value:"limpio"}},[e._v("Limpio")])])]),a("div",{staticClass:"filtro-fecha"},[a("label",[e._v("Fecha:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.filtroFecha,expression:"filtroFecha"}],attrs:{type:"date"},domProps:{value:e.filtroFecha},on:{input:function(a){a.target.composing||(e.filtroFecha=a.target.value)}}})])]),e.pedidosFiltrados.length>0?a("div",{staticClass:"tabla-pedidos"},[a("table",[e._m(0),a("tbody",e._l(e.pedidosFiltrados,(function(t){return a("tr",{key:t.fecha},[a("td",{staticClass:"fecha-celda"},[a("div",{staticClass:"fecha-container"},[a("div",{staticClass:"fecha-dia"},[e._v(e._s(e.obtenerDia(t.fecha)))]),a("div",{staticClass:"fecha-mes-ano"},[a("span",{staticClass:"mes"},[e._v(e._s(e.obtenerMes(t.fecha)))]),a("span",{staticClass:"ano"},[e._v(e._s(e.obtenerAno(t.fecha)))])]),a("div",{staticClass:"totales-dia"},[a("div",[e._v(e._s(e.calcularTotalesDia(t.pedidos).taras)+" T")]),a("div",[e._v(e._s(e.calcularTotalesDia(t.pedidos).kilos)+" Kg")])])])]),a("td",{staticClass:"detalles-celda"},e._l(t.pedidos,(function(t){return a("div",{key:t.id,staticClass:"tipo-acciones"},[a("span",{staticClass:"tipo-badge",class:t.tipo},[e._v(" "+e._s(e.capitalizarPrimeraLetra(t.tipo))+" ")]),a("span",{class:["kilos-badge",t.tipo]},[a("div",{staticClass:"kilos-taras-container"},[a("div",[e._v(e._s("crudo"===t.tipo?e.formatearNumero(Math.round(e.calcularKilos(t))):e.formatearNumero(Math.round(e.calcularKilosLimpio(t))))+" Kg")]),a("div",[e._v(e._s("crudo"===t.tipo?Math.round(e.calcularTaras(t)):Math.round(e.calcularTarasLimpio(t)))+" T")])])]),a("div",{staticClass:"acciones"},[a("button",{staticClass:"btn-editar",attrs:{title:"Ver"},on:{click:function(a){return e.editarPedido(t)}}},[e._v(" Ver ")]),a("button",{staticClass:"btn-imprimir",attrs:{title:"Imprimir"},on:{click:function(a){return e.imprimirPedido(t)}}},[a("i",{staticClass:"fas fa-print"}),e._v(" Imprimir ")]),a("button",{staticClass:"btn-eliminar",attrs:{title:"Eliminar"},on:{click:function(a){return e.eliminarPedido(t)}}},[a("i",{staticClass:"fas fa-trash"})])])])})),0)])})),0)])]):a("div",{staticClass:"no-pedidos"},[e._v(" No hay pedidos que coincidan con los filtros seleccionados ")])])])},o=[function(){var e=this,a=e._self._c;return a("thead",[a("tr",[a("th",[e._v("Fecha")]),a("th",[e._v("Detalles")])])])}],s=(t("14d9"),t("13d5"),t("dc59")),r=t("1494"),l={name:"PedidosMenu",data(){return{pedidos:[],filtroTipo:"todos",filtroFecha:""}},computed:{pedidosFiltrados(){const e=this.pedidos.filter(e=>{const a="todos"===this.filtroTipo||e.tipo===this.filtroTipo,t=!this.filtroFecha||e.fecha===this.filtroFecha;return a&&t}),a=e.reduce((e,a)=>(e[a.fecha]||(e[a.fecha]={fecha:a.fecha,pedidos:[]}),e[a.fecha].pedidos.push(a),e),{});return Object.values(a).sort((e,a)=>new Date(a.fecha)-new Date(e.fecha))}},methods:{formatearNumero(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},obtenerDia(e){const a=new Date(e+"T00:00:00");return a.getDate().toString().padStart(2,"0")},obtenerMes(e){const a=new Date(e+"T00:00:00"),t=["ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SEP","OCT","NOV","DIC"];return t[a.getMonth()]},obtenerAno(e){const a=new Date(e+"T00:00:00");return a.getFullYear()},formatearFecha(e){const a=new Date(e);return a.setMinutes(a.getMinutes()+a.getTimezoneOffset()),a.toLocaleDateString("es-ES")},capitalizarPrimeraLetra(e){return e.charAt(0).toUpperCase()+e.slice(1)},calcularKilos(e){let a=0;if(e.pedidos)for(const t in e.pedidos)for(const i in e.pedidos[t]){const o=e.pedidos[t][i];o&&!isNaN(o)&&(a+=parseFloat(o))}return(19*a).toFixed(2)},calcularTaras(e){const a=parseFloat(this.calcularKilos(e));return(a/19).toFixed(2)},calcularKilosLimpio(e){let a=0;return e.otilio&&(a+=this.calcularKilosCliente(e.otilio)),e.catarro&&(a+=this.calcularKilosCliente(e.catarro)),e.joselito&&(a+=this.calcularKilosCliente(e.joselito)),e.ozuna&&(a+=this.calcularKilosCliente(e.ozuna)),e.lorena&&(a+=this.calcularKilosCliente(e.lorena)),a},calcularTarasLimpio(e){let a=0;return e.otilio&&(a+=this.calcularTarasCliente(e.otilio)),e.catarro&&(a+=this.calcularTarasCliente(e.catarro)),e.joselito&&(a+=this.calcularTarasCliente(e.joselito)),e.ozuna&&(a+=this.calcularTarasCliente(e.ozuna)),e.lorena&&(a+=this.calcularTarasCliente(e.lorena)),a},calcularKilosCliente(e){let a=0,t=0,i=0,o=0,s=0,r=0,l=0,n=0;return e.forEach(e=>{e.kilos&&(e.esTara?"C/H20"===e.tipo?t+=30*Number(e.kilos)*.65:"1.35 y .15"===e.tipo?s+=30*Number(e.kilos):"1.5 y .3"===e.tipo?l+=30*Number(e.kilos):i+=30*Number(e.kilos):"S/H20"===e.tipo?a+=Number(e.kilos):"C/H20"===e.tipo?t+=Number(e.kilos):"1.35 y .15"===e.tipo?o+=1.35*Number(e.kilos):"1.5 y .3"===e.tipo?r+=1.5*Number(e.kilos):".7 y .3"===e.tipo&&(n+=.7*Number(e.kilos)))}),a+i+s+l+t+o+r+n},calcularTarasCliente(e){let a=0,t=0,i=0,o=0;e.forEach(e=>{e.kilos&&(e.esTara?a+=Number(e.kilos):"S/H20"===e.tipo?t+=Number(e.kilos):"1.35 y .15"===e.tipo?i+=Number(e.kilos):"1.5 y .3"===e.tipo&&(o+=Number(e.kilos)))});const s=t/25,r=i/33.75,l=o/37.5;return a+s+r+l},imprimirPedido(e){if("crudo"===e.tipo){const a={};for(const t in e.pedidos){let i=!1;for(const a in e.pedidos[t]){const o=e.pedidos[t][a];if(o&&!isNaN(o)&&parseFloat(o)>0){i=!0;break}}i&&(a[t]=e.pedidos[t])}this.$router.push({name:"PedidoCrudosImpresion",params:{fecha:e.fecha,pedidos:a,columnas:e.columnas}})}else this.$router.push({name:"PedidoLimpioImpresion",params:{fecha:e.fecha,id:e.id,pedidoOtilio:e.otilio||[],pedidoCatarro:e.catarro||[],pedidoJoselito:e.joselito||[],pedidoOzuna:e.ozuna||[],pedidoLorena:e.lorena||[],clientesTemporales:e.clientesTemporales||{},rendimientosGuardados:e.rendimientos||{},divisoresGuardados:e.divisores||{},completadosGuardados:e.completados||{},kilosRefrigeradosGuardados:e.kilosRefrigerados||{}}})},editarPedido(e){const a="crudo"===e.tipo?"/procesos/pedidos/crudo":"/procesos/pedidos/limpio";this.$router.push({path:a,query:{edit:"true",id:e.id,fecha:e.fecha}})},async eliminarPedido(e){try{const a=window.confirm("Â¿EstÃ¡ seguro que desea eliminar este pedido? Esta acciÃ³n no se puede deshacer.");a&&(await Object(r["d"])(Object(r["e"])(s["a"],"pedidos",e.id)),alert("Pedido eliminado exitosamente"))}catch(a){console.error("Error al eliminar el pedido:",a),alert("Error al eliminar el pedido. Por favor intente nuevamente.")}},calcularTotalesDia(e){let a=0,t=0;return e.forEach(e=>{"crudo"===e.tipo?(a+=Math.round(parseFloat(this.calcularKilos(e))),t+=Math.round(parseFloat(this.calcularTaras(e)))):"limpio"===e.tipo&&(a+=Math.round(this.calcularKilosLimpio(e)),t+=Math.round(this.calcularTarasLimpio(e)))}),{kilos:this.formatearNumero(a),taras:t}}},created(){const e=Object(r["o"])(Object(r["c"])(s["a"],"pedidos"),Object(r["l"])("createdAt","desc"));this.unsubscribe=Object(r["k"])(e,e=>{this.pedidos=e.docs.map(e=>({id:e.id,...e.data()}))})},beforeDestroy(){this.unsubscribe&&this.unsubscribe()}},n=l,d=(t("656d"),t("2877")),c=Object(d["a"])(n,i,o,!1,null,"33f656fc",null);a["a"]=c.exports}}]);